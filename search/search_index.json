{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"VoiceERA Documentation","text":"<p>Welcome to the VoiceERA documentation! This is your comprehensive guide to understanding, deploying, and developing with the VoiceERA platform.</p>"},{"location":"#what-is-voiceera","title":"What is VoiceERA?","text":"<p>VoiceERA is a complete voice AI platform with telephony integration, featuring:</p> <ul> <li>\ud83c\udfa4 Real-time Speech-to-Text (STT) - Convert spoken words to text</li> <li>\ud83d\udd0a Text-to-Speech (TTS) - Convert text back to natural-sounding speech</li> <li>\ud83e\udd16 LLM-Powered Conversational Agents - Intelligent voice interactions with language models</li> <li>\u260e\ufe0f Telephony Integration - Seamless voice call handling with Vobiz platform</li> <li>\ud83d\udcca Comprehensive Dashboard - Manage agents, campaigns, and analytics</li> </ul>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#multi-language-support","title":"Multi-Language Support","text":"<p>Support for Indic languages and English with AI4Bharat services integration.</p>"},{"location":"#flexible-ai-services","title":"Flexible AI Services","text":"<p>Integration with multiple AI providers: - OpenAI (GPT-4, GPT-3.5) - Deepgram (high-quality STT) - Cartesia (advanced TTS) - AI4Bharat (Indic languages) - Local LLM support</p>"},{"location":"#enterprise-grade","title":"Enterprise-Grade","text":"<ul> <li>MongoDB for scalable data persistence</li> <li>MinIO for distributed object storage</li> <li>JWT-based authentication &amp; authorization</li> <li>Role-based access control</li> <li>Docker &amp; Kubernetes ready</li> </ul>"},{"location":"#architecture-at-a-glance","title":"Architecture at a Glance","text":""},{"location":"#quick-navigation","title":"Quick Navigation","text":""},{"location":"#new-to-voiceera","title":"New to VoiceERA?","text":"<p>Start here to get up and running:</p> <ul> <li>Installation - Set up your development environment</li> <li>Quick Start - Get VoiceERA running in minutes</li> <li>Configuration - Configure services and environment</li> </ul>"},{"location":"#for-developers","title":"For Developers","text":"<p>Extend and customize VoiceERA:</p> <ul> <li>Local Development - Set up development environment</li> <li>REST API - REST API documentation</li> <li>WebSocket API - Real-time communication</li> <li>Contributing - Contribution guidelines</li> </ul>"},{"location":"#for-operations-devops","title":"For Operations &amp; DevOps","text":"<p>Deploy and manage VoiceERA:</p> <ul> <li>Docker Deployment - Docker &amp; Docker Compose setup</li> <li>Production Deployment - Production-grade deployment</li> <li>Environment Variables - Configuration reference</li> </ul>"},{"location":"#understanding-the-system","title":"Understanding the System","text":"<p>Learn how VoiceERA works:</p> <ul> <li>System Overview - High-level architecture</li> <li>System Design - Detailed system design</li> <li>Data Flow - How data moves through the system</li> </ul>"},{"location":"#microservices-overview","title":"Microservices Overview","text":"Service Port Technology Purpose Frontend 3000 Next.js + React Web dashboard for agent/campaign management Backend 8000 FastAPI + Python REST API for data management &amp; orchestration Voice Server 7860 Pipecat + Python Real-time voice processing &amp; agent orchestration MongoDB 27017 MongoDB Primary data store MinIO 9000/9001 MinIO Object storage for recordings &amp; transcripts STT Server 8001 AI4Bharat Local Indic speech-to-text (optional) TTS Server 8002 AI4Bharat Local Indic text-to-speech (optional)"},{"location":"#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have:</p> <ul> <li>Docker &amp; Docker Compose - For containerized deployment</li> <li>Git - For version control</li> <li>Node.js 18+ - For frontend development (optional)</li> <li>Python 3.10+ - For backend/voice development (optional)</li> <li>GPU (optional) - For running local AI4Bharat services</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ol> <li>Install VoiceERA - Get your environment ready</li> <li>Run Quick Start - Launch all services</li> <li>Explore Architecture - Understand the system</li> </ol>"},{"location":"#support-community","title":"Support &amp; Community","text":"<ul> <li>\ud83d\udcda Full Documentation</li> <li>\ud83d\udc1b Report Issues</li> <li>\ud83d\udcac Discussions &amp; Q&amp;A</li> </ul> <p>Version: 1.0.0 Last Updated: January 2026</p>"},{"location":"quick-reference/","title":"VoiceERA Quick Reference","text":"<p>Quick reference for common tasks and commands.</p>"},{"location":"quick-reference/#getting-started","title":"Getting Started","text":""},{"location":"quick-reference/#installation-5-minutes","title":"Installation (5 minutes)","text":"<pre><code># Clone repository\ngit clone https://github.com/voicera/voicera_mono_repository.git\ncd voicera_mono_repository\n\n# Setup environment\ncp voicera_backend/.env.example voicera_backend/.env\ncp voice_2_voice_server/.env.example voice_2_voice_server/.env\n\n# Start services\ndocker-compose up -d\n\n# Wait for services to be ready\ndocker-compose ps\n</code></pre>"},{"location":"quick-reference/#access-services","title":"Access Services","text":"Service URL Purpose Frontend http://localhost:3000 Web dashboard Backend API http://localhost:8000 API endpoints API Docs http://localhost:8000/docs Swagger UI MinIO http://localhost:9001 Object storage Voice Server http://localhost:7860 WebSocket server"},{"location":"quick-reference/#development-commands","title":"Development Commands","text":""},{"location":"quick-reference/#backend","title":"Backend","text":"<pre><code>cd voicera_backend\n\n# Install dependencies\npip install -r requirements.txt\n\n# Start dev server\nuvicorn app.main:app --reload\n\n# Run tests\npytest\n\n# Run with coverage\npytest --cov=app\n\n# Database migrations\nalembic upgrade head\nalembic revision --autogenerate -m \"Message\"\n</code></pre>"},{"location":"quick-reference/#frontend","title":"Frontend","text":"<pre><code>cd voicera_frontend\n\n# Install dependencies\nnpm install\n\n# Start dev server (http://localhost:3000)\nnpm run dev\n\n# Build for production\nnpm run build\n\n# Run tests\nnpm test\n\n# Run linter\nnpm run lint\n</code></pre>"},{"location":"quick-reference/#voice-server","title":"Voice Server","text":"<pre><code>cd voice_2_voice_server\n\n# Install dependencies\npip install -r requirements.txt\n\n# Start server\npython main.py\n\n# Start with debug logging\nDEBUG_MODE=true python main.py\n</code></pre>"},{"location":"quick-reference/#database","title":"Database","text":"<pre><code># Start database in Docker\ndocker-compose up -d mongodb\n\n# Connect to MongoDB\ndocker exec -it voicera_mono_repository-mongodb-1 mongosh\n\n# Commands in MongoDB\nshow databases\nuse voicera_db\nshow collections\ndb.agents.find()\ndb.agents.countDocuments()\n</code></pre>"},{"location":"quick-reference/#api-quick-reference","title":"API Quick Reference","text":""},{"location":"quick-reference/#authentication","title":"Authentication","text":"<pre><code># Get token\ncurl -X POST http://localhost:8000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"email\": \"user@example.com\",\n    \"password\": \"password\"\n  }'\n\n# Use token in subsequent requests\ncurl -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  http://localhost:8000/agents\n</code></pre>"},{"location":"quick-reference/#agents","title":"Agents","text":"<pre><code># List agents\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/agents\n\n# Create agent\ncurl -X POST http://localhost:8000/agents \\\n  -H \"Authorization: Bearer TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Support Bot\",\n    \"llm_provider\": \"openai\",\n    \"system_prompt\": \"You are a helpful support agent\"\n  }'\n\n# Get agent details\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/agents/{agent_id}\n\n# Update agent\ncurl -X PUT http://localhost:8000/agents/{agent_id} \\\n  -H \"Authorization: Bearer TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"New Name\"}'\n\n# Delete agent\ncurl -X DELETE http://localhost:8000/agents/{agent_id} \\\n  -H \"Authorization: Bearer TOKEN\"\n</code></pre>"},{"location":"quick-reference/#campaigns","title":"Campaigns","text":"<pre><code># List campaigns\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/campaigns\n\n# Create campaign\ncurl -X POST http://localhost:8000/campaigns \\\n  -H \"Authorization: Bearer TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Q1 2024 Campaign\",\n    \"agent_id\": \"agent-uuid\",\n    \"contact_list\": [\"phone1\", \"phone2\"]\n  }'\n\n# Launch campaign\ncurl -X POST http://localhost:8000/campaigns/{campaign_id}/launch \\\n  -H \"Authorization: Bearer TOKEN\"\n\n# Pause campaign\ncurl -X POST http://localhost:8000/campaigns/{campaign_id}/pause \\\n  -H \"Authorization: Bearer TOKEN\"\n</code></pre>"},{"location":"quick-reference/#call-logs","title":"Call Logs","text":"<pre><code># List call logs\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/call-logs\n\n# Get call details\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/call-logs/{call_id}\n\n# Get campaign's calls\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/call-logs/campaign/{campaign_id}\n</code></pre>"},{"location":"quick-reference/#recordings","title":"Recordings","text":"<pre><code># List recordings\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/call-recordings\n\n# Download recording\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/call-recordings/{call_id}/download \\\n  -o recording.wav\n\n# Get transcript\ncurl -H \"Authorization: Bearer TOKEN\" \\\n  http://localhost:8000/call-recordings/{call_id}/transcript\n</code></pre>"},{"location":"quick-reference/#docker-commands","title":"Docker Commands","text":""},{"location":"quick-reference/#container-management","title":"Container Management","text":"<pre><code># Start all services\ndocker-compose up -d\n\n# Stop all services\ndocker-compose down\n\n# View logs\ndocker-compose logs\n\n# View logs for specific service\ndocker-compose logs -f backend\n\n# Restart service\ndocker-compose restart voice-server\n\n# Run command in container\ndocker exec -it voicera-backend bash\n\n# Check resource usage\ndocker stats\n</code></pre>"},{"location":"quick-reference/#image-management","title":"Image Management","text":"<pre><code># Build all images\ndocker-compose build\n\n# Build specific image\ndocker-compose build backend\n\n# List images\ndocker images\n\n# Remove unused images\ndocker image prune\n\n# View image layers\ndocker history image-name\n</code></pre>"},{"location":"quick-reference/#volumes","title":"Volumes","text":"<pre><code># List volumes\ndocker volume ls\n\n# Inspect volume\ndocker volume inspect volume-name\n\n# Clean up unused volumes\ndocker volume prune\n\n# Backup volume\ndocker run --rm -v volume-name:/data -v $(pwd):/backup \\\n  alpine tar czf /backup/volume-backup.tar.gz /data\n\n# Restore volume\ndocker run --rm -v volume-name:/data -v $(pwd):/backup \\\n  alpine tar xzf /backup/volume-backup.tar.gz -C /data\n</code></pre>"},{"location":"quick-reference/#troubleshooting","title":"Troubleshooting","text":""},{"location":"quick-reference/#service-wont-start","title":"Service Won't Start","text":"<pre><code># Check logs\ndocker-compose logs service-name\n\n# Check port conflicts\nlsof -i :8000\n\n# Check resource usage\ndocker stats\n\n# Rebuild images\ndocker-compose build --no-cache service-name\n</code></pre>"},{"location":"quick-reference/#database-issues","title":"Database Issues","text":"<pre><code># Connect to MongoDB\ndocker exec -it mongodb mongosh\n\n# Check connections\ndb.serverStatus().connections\n\n# See slow queries\ndb.setProfilingLevel(1, { slowms: 100 })\ndb.system.profile.find().pretty()\n\n# Check indexes\ndb.agents.getIndexes()\n\n# Create index\ndb.agents.createIndex({ \"user_id\": 1, \"created_at\": -1 })\n</code></pre>"},{"location":"quick-reference/#performance-issues","title":"Performance Issues","text":"<pre><code># Check Docker resource limits\ndocker stats\n\n# Check database performance\ndocker exec -it mongodb mongosh\ndb.serverStatus()\n\n# Check API response times\ncurl -w \"@curl_format.txt\" http://localhost:8000/agents\n\n# Profile Python code\npython -m cProfile -s cumulative script.py\n</code></pre>"},{"location":"quick-reference/#websocket-issues","title":"WebSocket Issues","text":"<pre><code># Test WebSocket connection\nwscat -c ws://localhost:7860\n\n# Check connection logs\ndocker-compose logs voice-server\n\n# Monitor WebSocket traffic\ndocker exec -it voice-server tcpdump -i any port 7860\n</code></pre>"},{"location":"quick-reference/#environment-variables-cheat-sheet","title":"Environment Variables Cheat Sheet","text":""},{"location":"quick-reference/#backend-env","title":"Backend (.env)","text":"<pre><code>MONGODB_URL=mongodb://localhost:27017\nMONGODB_DB=voicera\n\nJWT_SECRET=your-secret-key\nJWT_ALGORITHM=HS256\nJWT_EXPIRATION=3600\n\nMINIO_HOST=localhost\nMINIO_PORT=9000\nMINIO_ACCESS_KEY=minioadmin\nMINIO_SECRET_KEY=minioadmin\n\nOPENAI_API_KEY=sk-...\nDEEPGRAM_API_KEY=...\nCARTESIA_API_KEY=...\n</code></pre>"},{"location":"quick-reference/#voice-server-env","title":"Voice Server (.env)","text":"<pre><code>LLM_PROVIDER=openai\nOPENAI_API_KEY=sk-...\n\nSTT_PROVIDER=deepgram\nDEEPGRAM_API_KEY=...\n\nTTS_PROVIDER=cartesia\nCARTESIA_API_KEY=...\n\nBACKEND_API_URL=http://backend:8000\nVOBIZ_WEBHOOK_URL=http://voice-server:7860/webhook/vobiz\n</code></pre>"},{"location":"quick-reference/#frontend-envlocal","title":"Frontend (.env.local)","text":"<pre><code>NEXT_PUBLIC_API_BASE_URL=http://localhost:8000\nNEXT_PUBLIC_WS_URL=ws://localhost:7860\nNEXT_PUBLIC_LOG_LEVEL=debug\n</code></pre>"},{"location":"quick-reference/#testing-quick-reference","title":"Testing Quick Reference","text":"<pre><code># Backend tests\ncd voicera_backend\npytest                          # Run all\npytest tests/test_auth.py      # Single file\npytest -v                       # Verbose\npytest --cov=app               # Coverage\npytest -k \"test_name\"          # Pattern match\n\n# Frontend tests\ncd voicera_frontend\nnpm test                        # Run tests\nnpm test -- --watch            # Watch mode\nnpm test -- --coverage         # Coverage\n</code></pre>"},{"location":"quick-reference/#git-quick-reference","title":"Git Quick Reference","text":"<pre><code># Feature branch\ngit checkout -b feature/feature-name\n\n# Push branch\ngit push origin feature/feature-name\n\n# Create pull request\n# Go to GitHub\n\n# Update with main\ngit fetch origin\ngit rebase origin/main\n\n# Squash commits\ngit rebase -i HEAD~3\n\n# Undo last commit (keep changes)\ngit reset --soft HEAD~1\n\n# View history\ngit log --oneline --graph\n</code></pre>"},{"location":"quick-reference/#useful-links","title":"Useful Links","text":"<ul> <li>Docs: https://voicera-docs.example.com</li> <li>GitHub: https://github.com/voicera/voicera_mono_repository</li> <li>Issues: https://github.com/voicera/voicera_mono_repository/issues</li> <li>Discussions: https://github.com/voicera/voicera_mono_repository/discussions</li> <li>FastAPI Docs: https://fastapi.tiangolo.com</li> <li>Next.js Docs: https://nextjs.org/docs</li> <li>MongoDB Docs: https://docs.mongodb.com</li> </ul>"},{"location":"quick-reference/#need-help","title":"Need Help?","text":"<ol> <li>Check Troubleshooting: Troubleshooting Guide</li> <li>Search Issues: GitHub Issues</li> <li>Ask Questions: GitHub Discussions</li> <li>Read Docs: Full Documentation</li> <li>Contact: support@voicera.ai</li> </ol> <p>Last updated: January 2024</p>"},{"location":"troubleshooting/","title":"Troubleshooting Guide","text":"<p>Common issues and their solutions.</p>"},{"location":"troubleshooting/#service-startup-issues","title":"Service Startup Issues","text":""},{"location":"troubleshooting/#docker-container-wont-start","title":"Docker Container Won't Start","text":"<p>Problem: Container exits immediately or keeps restarting</p> <p>Solution: <pre><code># Check logs\ndocker-compose logs backend\n\n# Look for common errors:\n# - Port already in use\n# - Missing environment variables\n# - Database connection failure\n\n# Rebuild image\ndocker-compose build --no-cache backend\n\n# Try again\ndocker-compose up backend\n</code></pre></p>"},{"location":"troubleshooting/#port-already-in-use","title":"Port Already in Use","text":"<p>Problem: <code>Error response from daemon: Ports are not available</code></p> <p>Solution: <pre><code># Find process using port\nlsof -i :8000\n\n# Kill the process\nkill -9 &lt;PID&gt;\n\n# Or change port in docker-compose.yml\nports:\n  - \"8001:8000\"  # Map to 8001 instead\n</code></pre></p>"},{"location":"troubleshooting/#database-connection-failed","title":"Database Connection Failed","text":"<p>Problem: Backend can't connect to MongoDB</p> <p>Solution: <pre><code># Ensure MongoDB is running\ndocker-compose ps mongodb\n\n# Check MongoDB logs\ndocker-compose logs mongodb\n\n# MongoDB needs time to start\nsleep 30\ndocker-compose up backend\n\n# Verify MongoDB is healthy\ndocker exec voicera_mongodb mongosh --eval \"db.adminCommand('ping')\"\n</code></pre></p>"},{"location":"troubleshooting/#api-backend-issues","title":"API &amp; Backend Issues","text":""},{"location":"troubleshooting/#401-unauthorized-errors","title":"401 Unauthorized Errors","text":"<p>Problem: Getting 401 when accessing protected endpoints</p> <p>Solution: <pre><code># Ensure JWT token is in request headers\ncurl -H \"Authorization: Bearer &lt;token&gt;\" http://localhost:8000/agents\n\n# Check token validity\ncurl -X POST http://localhost:8000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"user@example.com\",\"password\":\"password\"}'\n\n# If login fails, check MongoDB has user data\ndocker-compose exec mongodb mongosh \\\n  --username admin --password admin123 \\\n  --eval \"db.users.find()\"\n</code></pre></p>"},{"location":"troubleshooting/#500-internal-server-error","title":"500 Internal Server Error","text":"<p>Problem: Backend returns 500 error</p> <p>Solution: <pre><code># Check backend logs for detailed error\ndocker-compose logs backend | grep -i error\n\n# Common causes:\n# 1. Database error - check MongoDB logs\ndocker-compose logs mongodb\n\n# 2. Missing API keys - check .env file\ncat voicera_backend/.env | grep -i api\n\n# 3. Dependency error - reinstall packages\ndocker-compose build --no-cache backend\n</code></pre></p>"},{"location":"troubleshooting/#slow-api-responses","title":"Slow API Responses","text":"<p>Problem: API endpoints are slow (&gt;1 second)</p> <p>Solution: <pre><code># Check database indexes\ndocker-compose exec mongodb mongosh --username admin --password admin123 \\\n  --eval \"db.call_logs.getIndexes()\"\n\n# If missing indexes, create them:\n# From troubleshooting/create-indexes.js\n\n# Check MongoDB connection pool\ndocker-compose exec mongodb mongosh --username admin --password admin123 \\\n  --eval \"db.serverStatus().connections\"\n\n# Check backend resource usage\ndocker stats voicera_backend\n</code></pre></p>"},{"location":"troubleshooting/#voice-server-issues","title":"Voice Server Issues","text":""},{"location":"troubleshooting/#websocket-connection-failed","title":"WebSocket Connection Failed","text":"<p>Problem: Frontend can't establish WebSocket connection</p> <p>Solution: <pre><code># Check voice server is running\ndocker-compose ps voice_server\n\n# Check WebSocket endpoint\ncurl http://localhost:7860/health\n\n# Verify backend connection\ndocker-compose exec voice_server curl http://backend:8000/health\n\n# Check logs\ndocker-compose logs voice_server\n\n# Firewall issue? Allow WebSocket traffic\nsudo ufw allow 7860/tcp\n</code></pre></p>"},{"location":"troubleshooting/#stt-not-working","title":"STT Not Working","text":"<p>Problem: Voice server can't transcribe audio</p> <p>Solution: <pre><code># Check STT provider configuration\ndocker-compose exec voice_server cat .env | grep STT\n\n# If using Deepgram, verify API key\nexport DEEPGRAM_API_KEY=...\ndocker-compose exec voice_server python -c \\\n  \"from deepgram import DeepgramClient; print('OK')\"\n\n# If using AI4Bharat, check service is running\ndocker-compose ps ai4bharat_stt_server\n\n# Verify connection to STT service\ndocker-compose exec voice_server curl http://ai4bharat_stt_server:8001/health\n</code></pre></p>"},{"location":"troubleshooting/#tts-not-working","title":"TTS Not Working","text":"<p>Problem: Voice server can't generate speech</p> <p>Solution: <pre><code># Check TTS provider configuration\ndocker-compose exec voice_server cat .env | grep TTS\n\n# Test TTS endpoint manually\ncurl -X POST http://localhost:8002/synthesize \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"text\":\"Hello world\",\"language\":\"en\"}'\n\n# If using AI4Bharat\ndocker-compose ps ai4bharat_tts_server\ndocker-compose logs ai4bharat_tts_server\n</code></pre></p>"},{"location":"troubleshooting/#high-cpu-usage","title":"High CPU Usage","text":"<p>Problem: Voice server consuming 100% CPU</p> <p>Solution: <pre><code># Check active sessions\ndocker-compose exec voice_server curl http://localhost:7860/health | grep sessions\n\n# Kill stuck sessions\ndocker-compose restart voice_server\n\n# Check audio buffer settings in .env\nAUDIO_CHUNK_SIZE=2048  # Reduce if too high\nBATCH_SIZE=32          # Reduce for slower machines\n</code></pre></p>"},{"location":"troubleshooting/#frontend-issues","title":"Frontend Issues","text":""},{"location":"troubleshooting/#page-wont-load","title":"Page Won't Load","text":"<p>Problem: Frontend shows blank page or 404</p> <p>Solution: <pre><code># Check frontend is running\ndocker-compose ps frontend\n\n# Check logs\ndocker-compose logs frontend\n\n# Verify API connection\ncurl http://localhost:3000\n\n# Check .env.local configuration\ncat voicera_frontend/.env.local\n\n# Ensure API_BASE_URL is correct\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\n</code></pre></p>"},{"location":"troubleshooting/#login-not-working","title":"Login Not Working","text":"<p>Problem: Login credentials rejected</p> <p>Solution: <pre><code># Check if user exists in database\ndocker-compose exec mongodb mongosh --username admin --password admin123 \\\n  --eval \"db.users.findOne({email:'user@example.com'})\"\n\n# Create test user\ndocker-compose exec backend python -c \\\n  \"from app.services.auth_service import create_user; create_user('user@example.com', 'password123')\"\n\n# Clear browser storage\n# Open browser console and run:\n# localStorage.clear()\n# sessionStorage.clear()\n# Then reload page\n</code></pre></p>"},{"location":"troubleshooting/#api-call-errors","title":"API Call Errors","text":"<p>Problem: Frontend API calls failing with CORS or network errors</p> <p>Solution: <pre><code># Check backend is running and accessible\ncurl http://localhost:8000/health\n\n# Check CORS configuration in backend\n# Should include frontend origin in CORS_ORIGINS\n\n# Frontend .env should have correct API URL\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\n\n# Check browser console for detailed error\n# Open DevTools (F12) and check Network and Console tabs\n</code></pre></p>"},{"location":"troubleshooting/#database-issues","title":"Database Issues","text":""},{"location":"troubleshooting/#mongodb-disk-space-full","title":"MongoDB Disk Space Full","text":"<p>Problem: MongoDB stops accepting writes</p> <p>Solution: <pre><code># Check disk usage\ndf -h /data/db\n\n# Clean up old data\ndocker-compose exec mongodb mongosh --username admin --password admin123 \\\n  --eval \"db.call_logs.deleteMany({created_at: {'\\$lt': new Date(Date.now() - 30*24*60*60*1000)}})\"\n\n# Or expand volume\n# Stop container, expand volume, restart\n</code></pre></p>"},{"location":"troubleshooting/#mongodb-replication-issues-replica-set","title":"MongoDB Replication Issues (Replica Set)","text":"<p>Problem: Replica set stuck in recovery</p> <p>Solution: <pre><code># Check replica set status\ndocker-compose exec mongodb mongosh --username admin --password admin123 \\\n  --eval \"rs.status()\"\n\n# Reset replica set if needed (DATA LOSS!)\n# Only if absolutely necessary\ndocker-compose exec mongodb mongosh --username admin --password admin123 \\\n  --eval \"rs.initiate()\"\n</code></pre></p>"},{"location":"troubleshooting/#storage-minio-issues","title":"Storage (MinIO) Issues","text":""},{"location":"troubleshooting/#cant-upload-to-minio","title":"Can't Upload to MinIO","text":"<p>Problem: Recording uploads failing</p> <p>Solution: <pre><code># Check MinIO is running\ndocker-compose ps minio\n\n# Check MinIO console\n# Open http://localhost:9001\n\n# Verify credentials\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\n\n# Create bucket if missing\ndocker-compose exec minio mc mb minio/recordings\n\n# Check available space\ndocker stats voicera_minio\n</code></pre></p>"},{"location":"troubleshooting/#download-urls-not-working","title":"Download URLs Not Working","text":"<p>Problem: Pre-signed URLs expire or fail</p> <p>Solution: <pre><code># Check S3 bucket policy allows public read (if needed)\n# Otherwise use pre-signed URLs with short expiry\n\n# Verify backend can access MinIO\ndocker-compose exec backend python -c \\\n  \"from app.storage.minio_client import get_minio; print(get_minio())\"\n</code></pre></p>"},{"location":"troubleshooting/#monitoring-performance","title":"Monitoring &amp; Performance","text":""},{"location":"troubleshooting/#check-service-health","title":"Check Service Health","text":"<pre><code># All services\ndocker-compose ps\n\n# Individual health checks\ncurl http://localhost:8000/health           # Backend\ncurl http://localhost:7860/health           # Voice Server\ncurl http://localhost:9001/minio/health     # MinIO\ncurl http://localhost:27017                 # MongoDB\n\n# Detailed status\ndocker inspect voicera_backend | grep -A 20 \"State\"\n</code></pre>"},{"location":"troubleshooting/#monitor-resource-usage","title":"Monitor Resource Usage","text":"<pre><code># Real-time stats\ndocker stats\n\n# See which container is using most resources\ndocker stats --no-stream\n\n# Memory issues?\ndocker stats voicera_backend\ndocker update --memory 4g voicera_backend  # Increase limit\n\n# CPU issues?\n# Check logs for infinite loops\n# Restart container if needed\n</code></pre>"},{"location":"troubleshooting/#network-issues","title":"Network Issues","text":""},{"location":"troubleshooting/#services-cant-communicate","title":"Services Can't Communicate","text":"<p>Problem: Backend can't reach MongoDB</p> <p>Solution: <pre><code># Check network\ndocker network ls | grep voicera\n\n# Inspect network\ndocker network inspect voicera_mono_repository_voicera_network\n\n# Test DNS resolution\ndocker-compose exec backend nslookup mongodb\n\n# Test connectivity\ndocker-compose exec backend ping mongodb\n\n# If not working, rebuild network\ndocker-compose down\ndocker network prune\ndocker-compose up -d\n</code></pre></p>"},{"location":"troubleshooting/#development-issues","title":"Development Issues","text":""},{"location":"troubleshooting/#changes-not-reflected","title":"Changes Not Reflected","text":"<p>Problem: Code changes don't appear when running</p> <p>Solution: <pre><code># Ensure hot-reload is enabled for local development\nRELOAD=true  # In backend .env\n\n# For frontend, usually works automatically with npm run dev\n\n# Manual rebuild if needed\ndocker-compose build --no-cache &lt;service&gt;\ndocker-compose up &lt;service&gt;\n</code></pre></p>"},{"location":"troubleshooting/#dependency-conflicts","title":"Dependency Conflicts","text":"<p>Problem: ModuleNotFoundError or ImportError</p> <p>Solution: <pre><code># Backend - reinstall Python dependencies\ndocker-compose exec backend pip install --no-cache-dir -r requirements.txt\n\n# Frontend - reinstall Node packages\ndocker-compose exec frontend npm install --legacy-peer-deps\n\n# Or rebuild containers\ndocker-compose build --no-cache\ndocker-compose up -d\n</code></pre></p>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you're stuck:</p> <ol> <li> <p>Check the logs - Often has the answer    <pre><code>docker-compose logs -f &lt;service&gt;\n</code></pre></p> </li> <li> <p>Google the error - Exact error message usually helps</p> </li> <li> <p>Search GitHub issues - voicera/voicera/issues</p> </li> <li> <p>Ask in discussions - voicera/voicera/discussions</p> </li> <li> <p>Check documentation - You're reading it!</p> </li> </ol>"},{"location":"troubleshooting/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Get started</li> <li>Configuration - Setup guide</li> <li>Docker - Container guide</li> </ul>"},{"location":"api/endpoints/","title":"API Endpoints Reference","text":"<p>Quick reference for all VoiceERA API endpoints.</p>"},{"location":"api/endpoints/#authentication","title":"Authentication","text":"Method Endpoint Auth Description POST <code>/auth/register</code> - Register new user POST <code>/auth/login</code> - User login POST <code>/auth/refresh-token</code> \u2713 Refresh JWT token GET <code>/auth/me</code> \u2713 Get current user info POST <code>/auth/logout</code> \u2713 User logout POST <code>/auth/forgot-password</code> - Request password reset POST <code>/auth/reset-password</code> - Reset password with token"},{"location":"api/endpoints/#users","title":"Users","text":"Method Endpoint Auth Description GET <code>/users</code> \u2713 List all users (admin) GET <code>/users/{user_id}</code> \u2713 Get user details PUT <code>/users/{user_id}</code> \u2713 Update user DELETE <code>/users/{user_id}</code> \u2713 Delete user GET <code>/users/{user_id}/agents</code> \u2713 Get user's agents GET <code>/users/{user_id}/campaigns</code> \u2713 Get user's campaigns"},{"location":"api/endpoints/#agents","title":"Agents","text":"Method Endpoint Auth Description GET <code>/agents</code> \u2713 List agents POST <code>/agents</code> \u2713 Create agent GET <code>/agents/{agent_id}</code> \u2713 Get agent details PUT <code>/agents/{agent_id}</code> \u2713 Update agent DELETE <code>/agents/{agent_id}</code> \u2713 Delete agent GET <code>/agents/{agent_id}/config</code> \u2713 Get agent configuration POST <code>/agents/{agent_id}/clone</code> \u2713 Clone agent GET <code>/agents/{agent_id}/campaigns</code> \u2713 Get agent's campaigns"},{"location":"api/endpoints/#campaigns","title":"Campaigns","text":"Method Endpoint Auth Description GET <code>/campaigns</code> \u2713 List campaigns POST <code>/campaigns</code> \u2713 Create campaign GET <code>/campaigns/{campaign_id}</code> \u2713 Get campaign details PUT <code>/campaigns/{campaign_id}</code> \u2713 Update campaign DELETE <code>/campaigns/{campaign_id}</code> \u2713 Delete campaign POST <code>/campaigns/{campaign_id}/launch</code> \u2713 Launch campaign POST <code>/campaigns/{campaign_id}/pause</code> \u2713 Pause campaign POST <code>/campaigns/{campaign_id}/resume</code> \u2713 Resume campaign POST <code>/campaigns/{campaign_id}/stop</code> \u2713 Stop campaign GET <code>/campaigns/{campaign_id}/stats</code> \u2713 Campaign statistics"},{"location":"api/endpoints/#call-logs","title":"Call Logs","text":"Method Endpoint Auth Description GET <code>/call-logs</code> \u2713 List call logs GET <code>/call-logs/{call_id}</code> \u2713 Get call details DELETE <code>/call-logs/{call_id}</code> \u2713 Delete call log GET <code>/call-logs/campaign/{campaign_id}</code> \u2713 Get campaign's calls GET <code>/call-logs/agent/{agent_id}</code> \u2713 Get agent's calls GET <code>/call-logs/date/{date}</code> \u2713 Get calls by date PUT <code>/call-logs/{call_id}/notes</code> \u2713 Add notes to call GET <code>/call-logs/{call_id}/transcript</code> \u2713 Get call transcript"},{"location":"api/endpoints/#recordings","title":"Recordings","text":"Method Endpoint Auth Description GET <code>/call-recordings</code> \u2713 List recordings GET <code>/call-recordings/{call_id}</code> \u2713 Get recording metadata GET <code>/call-recordings/{call_id}/download</code> \u2713 Download recording DELETE <code>/call-recordings/{call_id}</code> \u2713 Delete recording GET <code>/call-recordings/{call_id}/transcript</code> \u2713 Get transcript POST <code>/call-recordings/{call_id}/transcribe</code> \u2713 Request transcription GET <code>/call-recordings/{call_id}/transcript/download</code> \u2713 Download transcript"},{"location":"api/endpoints/#analytics","title":"Analytics","text":"Method Endpoint Auth Description GET <code>/analytics/calls</code> \u2713 Call statistics GET <code>/analytics/sentiment</code> \u2713 Sentiment analysis GET <code>/analytics/emotions</code> \u2713 Emotion distribution GET <code>/analytics/top-phrases</code> \u2713 Most common phrases GET <code>/analytics/agent-performance</code> \u2713 Agent metrics GET <code>/analytics/campaign-stats</code> \u2713 Campaign statistics GET <code>/analytics/hourly-calls</code> \u2713 Calls by hour GET <code>/analytics/daily-calls</code> \u2713 Calls by day GET <code>/analytics/export</code> \u2713 Export analytics to CSV"},{"location":"api/endpoints/#integrations","title":"Integrations","text":"Method Endpoint Auth Description GET <code>/integrations</code> \u2713 List integrations POST <code>/integrations</code> \u2713 Create integration GET <code>/integrations/{integration_id}</code> \u2713 Get integration details PUT <code>/integrations/{integration_id}</code> \u2713 Update integration DELETE <code>/integrations/{integration_id}</code> \u2713 Delete integration POST <code>/integrations/{integration_id}/test</code> \u2713 Test integration GET <code>/integrations/{integration_id}/status</code> \u2713 Get status"},{"location":"api/endpoints/#webhooks","title":"Webhooks","text":"Method Endpoint Auth Description GET <code>/webhooks</code> \u2713 List webhooks POST <code>/webhooks</code> \u2713 Create webhook GET <code>/webhooks/{webhook_id}</code> \u2713 Get webhook PUT <code>/webhooks/{webhook_id}</code> \u2713 Update webhook DELETE <code>/webhooks/{webhook_id}</code> \u2713 Delete webhook POST <code>/webhooks/{webhook_id}/test</code> \u2713 Send test event GET <code>/webhooks/{webhook_id}/logs</code> \u2713 Get webhook logs"},{"location":"api/endpoints/#admin","title":"Admin","text":"Method Endpoint Auth Description GET <code>/admin/users</code> \u2713 admin List all users POST <code>/admin/users/{user_id}/activate</code> \u2713 admin Activate user POST <code>/admin/users/{user_id}/deactivate</code> \u2713 admin Deactivate user GET <code>/admin/system/stats</code> \u2713 admin System statistics GET <code>/admin/system/health</code> \u2713 admin Health status POST <code>/admin/system/maintenance</code> \u2713 admin Enable maintenance mode GET <code>/admin/logs</code> \u2713 admin System logs"},{"location":"api/endpoints/#health-status","title":"Health &amp; Status","text":"Method Endpoint Auth Description GET <code>/health</code> - Service health GET <code>/readiness</code> - Readiness probe GET <code>/liveness</code> - Liveness probe GET <code>/version</code> - API version GET <code>/docs</code> - Swagger UI GET <code>/redoc</code> - ReDoc UI GET <code>/openapi.json</code> - OpenAPI spec"},{"location":"api/endpoints/#query-parameters","title":"Query Parameters","text":""},{"location":"api/endpoints/#pagination","title":"Pagination","text":"<pre><code>?skip=0        # Number of items to skip (default: 0)\n?limit=10      # Number of items to return (default: 10, max: 100)\n</code></pre>"},{"location":"api/endpoints/#filtering","title":"Filtering","text":"<pre><code>?status=active                    # Filter by status\n?agent_id=uuid                    # Filter by agent\n?campaign_id=uuid                 # Filter by campaign\n?date_from=2024-01-01            # Start date\n?date_to=2024-01-31              # End date\n?phone_number=%2B1234567890      # Filter by phone (URL encoded)\n?search=keyword                   # Search in name/description\n</code></pre>"},{"location":"api/endpoints/#sorting","title":"Sorting","text":"<pre><code>?sort=created_at              # Sort field\n?order=asc                    # asc or desc\n?sort=-created_at             # Descending (shorthand)\n?sort=name,created_at         # Multiple sorts\n</code></pre>"},{"location":"api/endpoints/#common-responses","title":"Common Responses","text":""},{"location":"api/endpoints/#success-200-ok","title":"Success (200 OK)","text":"<pre><code>{\n  \"success\": true,\n  \"data\": {...},\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre>"},{"location":"api/endpoints/#created-201-created","title":"Created (201 Created)","text":"<pre><code>{\n  \"success\": true,\n  \"data\": {...},\n  \"message\": \"Resource created successfully\",\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre>"},{"location":"api/endpoints/#no-content-204","title":"No Content (204)","text":"<pre><code>Empty response\n</code></pre>"},{"location":"api/endpoints/#error-4xx5xx","title":"Error (4xx/5xx)","text":"<pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable error message\",\n    \"details\": \"Additional error details\"\n  },\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre>"},{"location":"api/endpoints/#authentication-headers","title":"Authentication Headers","text":"<pre><code>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\nContent-Type: application/json\nAccept: application/json\n</code></pre>"},{"location":"api/endpoints/#rate-limiting","title":"Rate Limiting","text":"<pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1674007200\n</code></pre>"},{"location":"api/endpoints/#next-steps","title":"Next Steps","text":"<ul> <li>REST API Details - Complete REST API documentation</li> <li>WebSocket API - Real-time API</li> <li>Quick Start - Get started</li> </ul>"},{"location":"api/rest-api/","title":"REST API Documentation","text":"<p>Complete REST API reference for VoiceERA Backend.</p>"},{"location":"api/rest-api/#base-url","title":"Base URL","text":"<pre><code>http://localhost:8000        # Development\nhttps://api.yourdomain.com   # Production\n</code></pre>"},{"location":"api/rest-api/#authentication","title":"Authentication","text":"<p>All protected endpoints require JWT token in the <code>Authorization</code> header:</p> <pre><code>Authorization: Bearer &lt;jwt_token&gt;\n</code></pre>"},{"location":"api/rest-api/#response-format","title":"Response Format","text":"<p>All responses are JSON:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {...},\n  \"error\": null,\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre> <p>Or for errors:</p> <pre><code>{\n  \"success\": false,\n  \"data\": null,\n  \"error\": {\n    \"code\": \"AUTH_001\",\n    \"message\": \"Invalid credentials\",\n    \"details\": \"Email not found\"\n  },\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre>"},{"location":"api/rest-api/#authentication-endpoints","title":"Authentication Endpoints","text":""},{"location":"api/rest-api/#register-user","title":"Register User","text":"<pre><code>POST /auth/register\nContent-Type: application/json\n\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\"\n}\n</code></pre> <p>Response: <code>201 Created</code> <pre><code>{\n  \"id\": \"user-uuid\",\n  \"email\": \"user@example.com\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#login","title":"Login","text":"<pre><code>POST /auth/login\nContent-Type: application/json\n\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"SecurePass123!\"\n}\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refresh_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"expires_in\": 86400,\n  \"user\": {\n    \"id\": \"user-uuid\",\n    \"email\": \"user@example.com\",\n    \"role\": \"user\"\n  }\n}\n</code></pre></p>"},{"location":"api/rest-api/#get-current-user","title":"Get Current User","text":"<pre><code>GET /auth/me\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"id\": \"user-uuid\",\n  \"email\": \"user@example.com\",\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"role\": \"user\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#refresh-token","title":"Refresh Token","text":"<pre><code>POST /auth/refresh-token\nAuthorization: Bearer &lt;refresh_token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"token\": \"new-jwt-token\",\n  \"expires_in\": 86400\n}\n</code></pre></p>"},{"location":"api/rest-api/#agent-endpoints","title":"Agent Endpoints","text":""},{"location":"api/rest-api/#list-agents","title":"List Agents","text":"<pre><code>GET /agents\nAuthorization: Bearer &lt;token&gt;\n\n# Optional query parameters:\n# ?skip=0&amp;limit=10\n# ?search=sales\n# ?status=active\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"total\": 15,\n  \"skip\": 0,\n  \"limit\": 10,\n  \"items\": [\n    {\n      \"id\": \"agent-uuid\",\n      \"name\": \"Sales Agent\",\n      \"description\": \"Handles sales inquiries\",\n      \"llm_provider\": \"openai\",\n      \"llm_model\": \"gpt-4\",\n      \"status\": \"active\",\n      \"created_at\": \"2024-01-29T10:30:00Z\"\n    }\n    // ... more agents\n  ]\n}\n</code></pre></p>"},{"location":"api/rest-api/#create-agent","title":"Create Agent","text":"<pre><code>POST /agents\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n\n{\n  \"name\": \"Support Agent\",\n  \"description\": \"Handles customer support\",\n  \"llm_provider\": \"openai\",\n  \"llm_model\": \"gpt-4\",\n  \"stt_provider\": \"deepgram\",\n  \"tts_provider\": \"cartesia\",\n  \"system_prompt\": \"You are a helpful support agent. Help customers with their issues.\",\n  \"language\": \"en\",\n  \"voice_parameters\": {\n    \"voice_id\": \"english_male\",\n    \"speed\": 1.0,\n    \"tone\": \"professional\"\n  }\n}\n</code></pre> <p>Response: <code>201 Created</code> <pre><code>{\n  \"id\": \"new-agent-uuid\",\n  \"name\": \"Support Agent\",\n  \"status\": \"active\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#get-agent","title":"Get Agent","text":"<pre><code>GET /agents/{agent_id}\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"id\": \"agent-uuid\",\n  \"user_id\": \"user-uuid\",\n  \"name\": \"Support Agent\",\n  \"description\": \"Handles customer support\",\n  \"llm_provider\": \"openai\",\n  \"llm_model\": \"gpt-4\",\n  \"stt_provider\": \"deepgram\",\n  \"tts_provider\": \"cartesia\",\n  \"system_prompt\": \"You are a helpful support agent...\",\n  \"language\": \"en\",\n  \"status\": \"active\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#update-agent","title":"Update Agent","text":"<pre><code>PUT /agents/{agent_id}\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n\n{\n  \"name\": \"Updated Name\",\n  \"system_prompt\": \"New system prompt here\"\n}\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"id\": \"agent-uuid\",\n  \"name\": \"Updated Name\",\n  \"updated_at\": \"2024-01-29T10:35:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#delete-agent","title":"Delete Agent","text":"<pre><code>DELETE /agents/{agent_id}\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>204 No Content</code></p>"},{"location":"api/rest-api/#campaign-endpoints","title":"Campaign Endpoints","text":""},{"location":"api/rest-api/#list-campaigns","title":"List Campaigns","text":"<pre><code>GET /campaigns\nAuthorization: Bearer &lt;token&gt;\n\n# Optional query parameters:\n# ?agent_id=uuid\n# ?status=active\n# ?skip=0&amp;limit=20\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"total\": 5,\n  \"items\": [\n    {\n      \"id\": \"campaign-uuid\",\n      \"name\": \"Q1 Sales Campaign\",\n      \"agent_id\": \"agent-uuid\",\n      \"status\": \"active\",\n      \"phone_numbers\": [\"+1234567890\"],\n      \"start_time\": \"2024-01-29T00:00:00Z\",\n      \"end_time\": \"2024-03-31T23:59:59Z\",\n      \"created_at\": \"2024-01-29T10:30:00Z\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/rest-api/#create-campaign","title":"Create Campaign","text":"<pre><code>POST /campaigns\nAuthorization: Bearer &lt;token&gt;\nContent-Type: application/json\n\n{\n  \"name\": \"Q2 Marketing Campaign\",\n  \"agent_id\": \"agent-uuid\",\n  \"phone_numbers\": [\"+1234567890\", \"+1234567891\"],\n  \"start_time\": \"2024-04-01T00:00:00Z\",\n  \"end_time\": \"2024-06-30T23:59:59Z\",\n  \"max_concurrent_calls\": 50\n}\n</code></pre> <p>Response: <code>201 Created</code> <pre><code>{\n  \"id\": \"new-campaign-uuid\",\n  \"status\": \"draft\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#launch-campaign","title":"Launch Campaign","text":"<pre><code>POST /campaigns/{campaign_id}/launch\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"id\": \"campaign-uuid\",\n  \"status\": \"active\",\n  \"launched_at\": \"2024-01-29T10:35:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#pause-campaign","title":"Pause Campaign","text":"<pre><code>POST /campaigns/{campaign_id}/pause\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"id\": \"campaign-uuid\",\n  \"status\": \"paused\",\n  \"paused_at\": \"2024-01-29T10:36:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#call-log-endpoints","title":"Call Log Endpoints","text":""},{"location":"api/rest-api/#list-call-logs","title":"List Call Logs","text":"<pre><code>GET /call-logs\nAuthorization: Bearer &lt;token&gt;\n\n# Optional filters:\n# ?campaign_id=uuid\n# ?status=completed\n# ?phone_number=%2B1234567890\n# ?start_date=2024-01-01\n# ?end_date=2024-01-31\n# ?skip=0&amp;limit=50\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"total\": 1250,\n  \"items\": [\n    {\n      \"id\": \"call-uuid\",\n      \"campaign_id\": \"campaign-uuid\",\n      \"phone_number\": \"+1234567890\",\n      \"status\": \"completed\",\n      \"duration_seconds\": 120,\n      \"sentiment\": \"positive\",\n      \"emotions\": [\"satisfied\"],\n      \"transcript\": \"User: Hello... Agent: Hi...\",\n      \"created_at\": \"2024-01-29T10:30:00Z\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"api/rest-api/#get-call-details","title":"Get Call Details","text":"<pre><code>GET /call-logs/{call_id}\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"id\": \"call-uuid\",\n  \"campaign_id\": \"campaign-uuid\",\n  \"phone_number\": \"+1234567890\",\n  \"status\": \"completed\",\n  \"duration_seconds\": 120,\n  \"transcript\": \"Full transcript here...\",\n  \"summary\": \"Customer called about billing issue...\",\n  \"sentiment\": \"positive\",\n  \"emotions\": [\"satisfied\", \"relieved\"],\n  \"key_phrases\": [\"billing\", \"resolution\"],\n  \"recording_url\": \"https://minio:9001/recordings/call-uuid.wav\",\n  \"cost\": 0.50,\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#recording-endpoints","title":"Recording Endpoints","text":""},{"location":"api/rest-api/#get-recording","title":"Get Recording","text":"<pre><code>GET /call-recordings/{call_id}\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"call_id\": \"call-uuid\",\n  \"duration_seconds\": 120,\n  \"format\": \"wav\",\n  \"size_bytes\": 960000,\n  \"download_url\": \"https://signed-url-with-expiry\",\n  \"transcript\": \"Full transcript...\",\n  \"metadata\": {\n    \"agent_id\": \"agent-uuid\",\n    \"campaign_id\": \"campaign-uuid\",\n    \"phone_number\": \"+1234567890\"\n  }\n}\n</code></pre></p>"},{"location":"api/rest-api/#download-recording","title":"Download Recording","text":"<pre><code>GET /call-recordings/{call_id}/download\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>Response: <code>200 OK</code> with audio file (WAV format)</p>"},{"location":"api/rest-api/#analytics-endpoints","title":"Analytics Endpoints","text":""},{"location":"api/rest-api/#call-statistics","title":"Call Statistics","text":"<pre><code>GET /analytics/calls\nAuthorization: Bearer &lt;token&gt;\n\n# Optional filters:\n# ?agent_id=uuid\n# ?campaign_id=uuid\n# ?days=30\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"total_calls\": 1250,\n  \"completed_calls\": 1200,\n  \"failed_calls\": 50,\n  \"average_duration\": 180,\n  \"success_rate\": 96.0,\n  \"cost_per_call\": 0.45\n}\n</code></pre></p>"},{"location":"api/rest-api/#sentiment-analysis","title":"Sentiment Analysis","text":"<pre><code>GET /analytics/sentiment\nAuthorization: Bearer &lt;token&gt;\n\n# Optional:\n# ?agent_id=uuid&amp;days=7\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"positive\": 850,\n  \"neutral\": 300,\n  \"negative\": 100,\n  \"positive_percentage\": 68.0,\n  \"neutral_percentage\": 24.0,\n  \"negative_percentage\": 8.0\n}\n</code></pre></p>"},{"location":"api/rest-api/#top-phrases","title":"Top Phrases","text":"<pre><code>GET /analytics/top-phrases\nAuthorization: Bearer &lt;token&gt;\n\n# Optional:\n# ?agent_id=uuid&amp;limit=20\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>[\n  {\n    \"phrase\": \"billing issue\",\n    \"count\": 234,\n    \"frequency\": 18.7\n  },\n  {\n    \"phrase\": \"account access\",\n    \"count\": 156,\n    \"frequency\": 12.5\n  },\n  {\n    \"phrase\": \"payment problem\",\n    \"count\": 145,\n    \"frequency\": 11.6\n  }\n]\n</code></pre></p>"},{"location":"api/rest-api/#health-status","title":"Health &amp; Status","text":""},{"location":"api/rest-api/#health-check","title":"Health Check","text":"<pre><code>GET /health\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"status\": \"ok\",\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#readiness","title":"Readiness","text":"<pre><code>GET /readiness\n</code></pre> <p>Response: <code>200 OK</code> <pre><code>{\n  \"database\": \"ok\",\n  \"storage\": \"ok\",\n  \"cache\": \"ok\"\n}\n</code></pre></p>"},{"location":"api/rest-api/#error-codes","title":"Error Codes","text":"Code HTTP Description AUTH_001 401 Invalid credentials AUTH_002 401 Token expired AUTH_003 401 Token invalid AUTH_004 403 Permission denied AGENT_001 404 Agent not found AGENT_002 409 Agent already exists CAMPAIGN_001 404 Campaign not found CAMPAIGN_002 409 Cannot launch campaign CALL_001 404 Call log not found SERVER_001 500 Internal server error"},{"location":"api/rest-api/#rate-limiting","title":"Rate Limiting","text":"<p>API has rate limiting to prevent abuse:</p> <pre><code>General endpoints: 100 requests/minute\nAuth endpoints: 10 requests/minute\nUpload endpoints: 10 MB/minute\n</code></pre> <p>Rate limit headers:</p> <pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1674007200\n</code></pre>"},{"location":"api/rest-api/#next-steps","title":"Next Steps","text":"<ul> <li>WebSocket API - Real-time communication</li> <li>Quick Start - Get started</li> <li>Voice Server API - Voice processing</li> </ul>"},{"location":"api/websocket-api/","title":"WebSocket API Documentation","text":"<p>Real-time communication protocol for VoiceERA Voice Server.</p>"},{"location":"api/websocket-api/#connection","title":"Connection","text":"<pre><code>// Client-side (JavaScript)\nconst socket = new WebSocket('ws://localhost:7860/voice');\n\n// Or with authentication\nconst token = localStorage.getItem('token');\nconst socket = new WebSocket(\n  `ws://localhost:7860/voice?token=${token}`\n);\n</code></pre>"},{"location":"api/websocket-api/#message-format","title":"Message Format","text":"<p>All messages are JSON:</p> <pre><code>{\n  \"type\": \"message_type\",\n  \"session_id\": \"session-uuid\",\n  \"timestamp\": 1674003600000,\n  \"payload\": {}\n}\n</code></pre>"},{"location":"api/websocket-api/#authentication","title":"Authentication","text":""},{"location":"api/websocket-api/#client-send-auth-message","title":"Client: Send Auth Message","text":"<pre><code>{\n  \"type\": \"auth\",\n  \"token\": \"jwt-token-here\",\n  \"agent_id\": \"agent-uuid\",\n  \"campaign_id\": \"campaign-uuid\"\n}\n</code></pre>"},{"location":"api/websocket-api/#server-auth-response","title":"Server: Auth Response","text":"<pre><code>{\n  \"type\": \"auth_response\",\n  \"status\": \"success\",\n  \"session_id\": \"session-uuid\",\n  \"message\": \"Authentication successful\"\n}\n</code></pre> <p>Or on failure:</p> <pre><code>{\n  \"type\": \"auth_response\",\n  \"status\": \"error\",\n  \"message\": \"Invalid token\"\n}\n</code></pre>"},{"location":"api/websocket-api/#call-control","title":"Call Control","text":""},{"location":"api/websocket-api/#client-start-call","title":"Client: Start Call","text":"<p>After authentication, server automatically signals readiness:</p> <pre><code>{\n  \"type\": \"ready\",\n  \"session_id\": \"session-uuid\",\n  \"message\": \"Ready to receive audio\"\n}\n</code></pre>"},{"location":"api/websocket-api/#client-send-audio","title":"Client: Send Audio","text":"<pre><code>{\n  \"type\": \"audio\",\n  \"session_id\": \"session-uuid\",\n  \"sequence\": 1,\n  \"format\": \"pcm_16k\",\n  \"data\": \"base64-encoded-audio-data\"\n}\n</code></pre> <p>Audio Format Details: - Format: PCM 16-bit signed - Sample Rate: 16kHz (mono) - Duration: 100ms chunks - Encoding: base64 for JSON</p>"},{"location":"api/websocket-api/#server-send-response-audio","title":"Server: Send Response Audio","text":"<pre><code>{\n  \"type\": \"audio\",\n  \"session_id\": \"session-uuid\",\n  \"sequence\": 1,\n  \"format\": \"pcm_16k\",\n  \"data\": \"base64-encoded-response-audio\"\n}\n</code></pre>"},{"location":"api/websocket-api/#client-control-messages","title":"Client: Control Messages","text":"<pre><code>{\n  \"type\": \"control\",\n  \"action\": \"pause|resume|end\",\n  \"session_id\": \"session-uuid\"\n}\n</code></pre>"},{"location":"api/websocket-api/#server-status-updates","title":"Server: Status Updates","text":"<pre><code>{\n  \"type\": \"status\",\n  \"status\": \"transcribing|processing|synthesizing\",\n  \"session_id\": \"session-uuid\",\n  \"message\": \"Processing your request...\"\n}\n</code></pre>"},{"location":"api/websocket-api/#metadata-events","title":"Metadata &amp; Events","text":""},{"location":"api/websocket-api/#client-send-metadata","title":"Client: Send Metadata","text":"<pre><code>{\n  \"type\": \"metadata\",\n  \"session_id\": \"session-uuid\",\n  \"phone_number\": \"+1234567890\",\n  \"caller_id\": \"caller-name\",\n  \"agent_config\": {\n    \"language\": \"en\",\n    \"emotions_enabled\": true\n  }\n}\n</code></pre>"},{"location":"api/websocket-api/#server-transcript-update","title":"Server: Transcript Update","text":"<p>Real-time transcript as user speaks:</p> <pre><code>{\n  \"type\": \"transcript\",\n  \"session_id\": \"session-uuid\",\n  \"partial\": \"Hello, I'd like to\",\n  \"complete\": false,\n  \"confidence\": 0.95\n}\n</code></pre> <p>Final transcript:</p> <pre><code>{\n  \"type\": \"transcript\",\n  \"session_id\": \"session-uuid\",\n  \"partial\": null,\n  \"complete\": \"Hello, I'd like to know about your services\",\n  \"confidence\": 0.98,\n  \"final\": true\n}\n</code></pre>"},{"location":"api/websocket-api/#server-agent-response","title":"Server: Agent Response","text":"<pre><code>{\n  \"type\": \"response\",\n  \"session_id\": \"session-uuid\",\n  \"text\": \"Sure! I'd be happy to help. We offer...\",\n  \"agent_id\": \"agent-uuid\",\n  \"emotion\": \"helpful\",\n  \"sentiment\": \"positive\"\n}\n</code></pre>"},{"location":"api/websocket-api/#server-error-messages","title":"Server: Error Messages","text":"<pre><code>{\n  \"type\": \"error\",\n  \"session_id\": \"session-uuid\",\n  \"error_code\": \"STT_FAILED\",\n  \"message\": \"Failed to transcribe audio\",\n  \"details\": \"Please try again\"\n}\n</code></pre>"},{"location":"api/websocket-api/#session-lifecycle","title":"Session Lifecycle","text":""},{"location":"api/websocket-api/#1-connection-established","title":"1. Connection Established","text":"<pre><code>Client connects \u2192 Server accepts \u2192 WebSocket open\n</code></pre>"},{"location":"api/websocket-api/#2-authentication","title":"2. Authentication","text":"<pre><code>Client sends auth message\n      \u2193\nServer validates JWT\n      \u2193\nServer sends auth_response (success)\n      \u2193\nServer sends ready message\n</code></pre>"},{"location":"api/websocket-api/#3-call-processing","title":"3. Call Processing","text":"<pre><code>Client sends audio chunk\n      \u2193\nServer transcribes (STT)\n      \u2193\nServer generates response (LLM)\n      \u2193\nServer sends response audio (TTS)\n      \u2193\nClient plays audio\n      \u2193\n(Loop continues)\n</code></pre>"},{"location":"api/websocket-api/#4-call-termination","title":"4. Call Termination","text":"<pre><code>Client sends control message (action: \"end\")\n      \u2193\nServer stops audio stream\n      \u2193\nServer saves recording\n      \u2193\nServer sends final transcript &amp; analytics\n      \u2193\nServer closes connection\n</code></pre>"},{"location":"api/websocket-api/#example-javascript-client","title":"Example: JavaScript Client","text":"<pre><code>class VoiceClient {\n  constructor(serverUrl, token) {\n    this.socket = null;\n    this.serverUrl = serverUrl;\n    this.token = token;\n    this.sessionId = null;\n    this.mediaRecorder = null;\n  }\n\n  async connect(agentId) {\n    return new Promise((resolve, reject) =&gt; {\n      this.socket = new WebSocket(this.serverUrl);\n\n      this.socket.onopen = () =&gt; {\n        // Send authentication\n        this.socket.send(JSON.stringify({\n          type: 'auth',\n          token: this.token,\n          agent_id: agentId\n        }));\n      };\n\n      this.socket.onmessage = (event) =&gt; {\n        const message = JSON.parse(event.data);\n\n        if (message.type === 'auth_response') {\n          if (message.status === 'success') {\n            this.sessionId = message.session_id;\n            resolve(this.sessionId);\n          } else {\n            reject(new Error(message.message));\n          }\n        }\n\n        if (message.type === 'ready') {\n          this.startAudioCapture();\n        }\n\n        if (message.type === 'audio') {\n          this.playAudio(message.data);\n        }\n\n        if (message.type === 'transcript') {\n          console.log('Transcript:', message.partial || message.complete);\n        }\n\n        if (message.type === 'response') {\n          console.log('Agent:', message.text);\n        }\n\n        if (message.type === 'error') {\n          console.error('Error:', message.message);\n        }\n      };\n\n      this.socket.onerror = (error) =&gt; {\n        reject(error);\n      };\n    });\n  }\n\n  async startAudioCapture() {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n\n    this.mediaRecorder = new MediaRecorder(stream);\n\n    this.mediaRecorder.ondataavailable = (event) =&gt; {\n      const audioBlob = event.data;\n      const reader = new FileReader();\n\n      reader.onload = () =&gt; {\n        const arrayBuffer = reader.result;\n        const base64 = btoa(\n          String.fromCharCode(...new Uint8Array(arrayBuffer))\n        );\n\n        this.socket.send(JSON.stringify({\n          type: 'audio',\n          session_id: this.sessionId,\n          data: base64,\n          format: 'pcm_16k'\n        }));\n      };\n\n      reader.readAsArrayBuffer(audioBlob);\n    };\n\n    this.mediaRecorder.start(100); // Send chunks every 100ms\n  }\n\n  playAudio(base64Data) {\n    const binaryString = atob(base64Data);\n    const bytes = new Uint8Array(binaryString.length);\n\n    for (let i = 0; i &lt; binaryString.length; i++) {\n      bytes[i] = binaryString.charCodeAt(i);\n    }\n\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    const audioBuffer = audioContext.createBuffer(1, bytes.length, 16000);\n    const channelData = audioBuffer.getChannelData(0);\n\n    for (let i = 0; i &lt; bytes.length; i++) {\n      channelData[i] = (bytes[i] - 128) / 128;\n    }\n\n    const audioSource = audioContext.createBufferSource();\n    audioSource.buffer = audioBuffer;\n    audioSource.connect(audioContext.destination);\n    audioSource.start(0);\n  }\n\n  end() {\n    this.mediaRecorder.stop();\n\n    this.socket.send(JSON.stringify({\n      type: 'control',\n      action: 'end',\n      session_id: this.sessionId\n    }));\n\n    this.socket.close();\n  }\n\n  pause() {\n    this.mediaRecorder.pause();\n    this.socket.send(JSON.stringify({\n      type: 'control',\n      action: 'pause',\n      session_id: this.sessionId\n    }));\n  }\n\n  resume() {\n    this.mediaRecorder.resume();\n    this.socket.send(JSON.stringify({\n      type: 'control',\n      action: 'resume',\n      session_id: this.sessionId\n    }));\n  }\n}\n\n// Usage\nconst client = new VoiceClient(\n  'ws://localhost:7860/voice',\n  'jwt-token'\n);\n\nclient.connect('agent-uuid').then((sessionId) =&gt; {\n  console.log('Connected:', sessionId);\n  // Client will automatically start recording\n});\n</code></pre>"},{"location":"api/websocket-api/#example-python-client","title":"Example: Python Client","text":"<pre><code>import json\nimport asyncio\nimport aiohttp\nimport pyaudio\nimport numpy as np\nfrom base64 import b64encode, b64decode\n\nclass VoiceClient:\n    def __init__(self, server_url, token):\n        self.server_url = server_url\n        self.token = token\n        self.session_id = None\n        self.websocket = None\n\n    async def connect(self, agent_id):\n        \"\"\"Establish WebSocket connection\"\"\"\n        async with aiohttp.ClientSession() as session:\n            async with session.ws_connect(self.server_url) as ws:\n                self.websocket = ws\n\n                # Send authentication\n                await ws.send_json({\n                    'type': 'auth',\n                    'token': self.token,\n                    'agent_id': agent_id\n                })\n\n                # Handle authentication response\n                async for message in ws:\n                    data = json.loads(message.data)\n\n                    if data['type'] == 'auth_response':\n                        if data['status'] == 'success':\n                            self.session_id = data['session_id']\n                            await self.start_audio_capture()\n                        break\n\n    async def start_audio_capture(self):\n        \"\"\"Capture microphone input and send to server\"\"\"\n        p = pyaudio.PyAudio()\n        stream = p.open(\n            format=pyaudio.paInt16,\n            channels=1,\n            rate=16000,\n            input=True,\n            frames_per_buffer=1024\n        )\n\n        try:\n            while True:\n                data = stream.read(1024)\n                base64_data = b64encode(data).decode()\n\n                await self.websocket.send_json({\n                    'type': 'audio',\n                    'session_id': self.session_id,\n                    'data': base64_data,\n                    'format': 'pcm_16k'\n                })\n\n                # Process server responses\n                async for message in self.websocket:\n                    server_data = json.loads(message.data)\n\n                    if server_data['type'] == 'transcript':\n                        if server_data.get('final'):\n                            print(f\"Transcript: {server_data['complete']}\")\n\n                    elif server_data['type'] == 'response':\n                        print(f\"Agent: {server_data['text']}\")\n\n                    elif server_data['type'] == 'audio':\n                        await self.play_audio(server_data['data'])\n\n                    break\n\n        finally:\n            stream.stop_stream()\n            stream.close()\n            p.terminate()\n\n    async def play_audio(self, base64_data):\n        \"\"\"Decode and play audio response\"\"\"\n        audio_bytes = b64decode(base64_data)\n        audio_array = np.frombuffer(audio_bytes, dtype=np.int16)\n\n        # Play audio (simplified)\n        # In production, use sounddevice or similar\n        print(f\"Playing {len(audio_array)} samples\")\n\n    async def end(self):\n        \"\"\"End the call\"\"\"\n        await self.websocket.send_json({\n            'type': 'control',\n            'action': 'end',\n            'session_id': self.session_id\n        })\n        await self.websocket.close()\n\n# Usage\nasync def main():\n    client = VoiceClient('ws://localhost:7860/voice', 'jwt-token')\n    await client.connect('agent-uuid')\n\nasyncio.run(main())\n</code></pre>"},{"location":"api/websocket-api/#error-handling","title":"Error Handling","text":"<p>Common WebSocket errors:</p> Code Message Action 1000 Normal closure Connection ended normally 1002 Protocol error Invalid message format 1003 Unsupported data Invalid message type 1008 Policy violation Invalid token 1011 Server error Internal server error"},{"location":"api/websocket-api/#best-practices","title":"Best Practices","text":"<ol> <li>Audio Quality: Send 16kHz mono PCM for best compatibility</li> <li>Chunk Size: 100ms chunks (1600 samples at 16kHz)</li> <li>Error Handling: Implement retry logic for network failures</li> <li>Resource Cleanup: Always close WebSocket and stop audio capture</li> <li>Token Refresh: Refresh JWT before it expires</li> <li>Logging: Log all errors for debugging</li> </ol>"},{"location":"api/websocket-api/#next-steps","title":"Next Steps","text":"<ul> <li>REST API - HTTP endpoints</li> <li>Voice Server - Server documentation</li> <li>Quick Start - Get started</li> </ul>"},{"location":"architecture/data-flow/","title":"Data Flow Through the System","text":"<p>This document explains how data moves through VoiceERA during various operations.</p>"},{"location":"architecture/data-flow/#voice-call-data-flow","title":"Voice Call Data Flow","text":"<p>The most complex and important flow in VoiceERA.</p>"},{"location":"architecture/data-flow/#complete-voice-call-sequence","title":"Complete Voice Call Sequence","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Step 1: Call Initiation                                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Caller (Phone) \u2500\u2500[Ring &amp; Answer]\u2500\u2500\u25ba Vobiz Platform                \u2502\n\u2502                                           \u2502                         \u2502\n\u2502                                           \u25bc                         \u2502\n\u2502                      Voice Server [WebSocket Ready]                \u2502\n\u2502                                           \u2502                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Step 2: Audio Input (Caller Speaks)                                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Caller Audio Frames \u2500\u2500[Vobiz]\u2500\u2500\u25ba Voice Server                     \u2502\n\u2502                                        \u2502                            \u2502\n\u2502                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502                        \u2502               \u2502               \u2502            \u2502\n\u2502                        \u25bc               \u25bc               \u25bc            \u2502\n\u2502                    [Buffer]        [Resample]   [Validate Audio]   \u2502\n\u2502                        \u2502               \u2502               \u2502            \u2502\n\u2502                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2502                                        \u2502                            \u2502\n\u2502                                        \u25bc                            \u2502\n\u2502                                   [STT Service]                    \u2502\n\u2502                                        \u2502                            \u2502\n\u2502                                        \u25bc                            \u2502\n\u2502                                   \"Hello, I'd like...\"              \u2502\n\u2502                                   (Transcript)                      \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Step 3: LLM Processing (Generate Response)                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Transcript \u2500\u2500\u25ba [System Prompt + Context] \u2500\u2500\u25ba LLM API              \u2502\n\u2502                                                   \u2502                 \u2502\n\u2502                                                   \u25bc                 \u2502\n\u2502                                              OpenAI, Claude, etc.   \u2502\n\u2502                                                   \u2502                 \u2502\n\u2502                                                   \u25bc                 \u2502\n\u2502                                      \"Sure, I'd be happy to help...\"\u2502\n\u2502                                      (LLM Response)                 \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Step 4: TTS Synthesis (Voice Generation)                            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Response Text \u2500\u2500\u25ba TTS API \u2500\u2500\u25ba Voice Generation                    \u2502\n\u2502                                   \u2502                                \u2502\n\u2502                                   \u25bc                                \u2502\n\u2502                            [Audio Synthesis]                       \u2502\n\u2502                                   \u2502                                \u2502\n\u2502                                   \u25bc                                \u2502\n\u2502                              Audio Frames                          \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Step 5: Audio Output (Caller Hears Response)                        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Audio Frames \u2500\u2500\u25ba [Vobiz] \u2500\u2500\u25ba Caller (Phone Speaker)              \u2502\n\u2502                                                                      \u2502\n\u2502                        [Loop continues]                            \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Step 6: Call Termination &amp; Storage                                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502  Caller hangs up \u2500\u2500\u25ba Voice Server                                  \u2502\n\u2502                          \u2502                                          \u2502\n\u2502          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                         \u2502\n\u2502          \u2502               \u2502               \u2502                         \u2502\n\u2502          \u25bc               \u25bc               \u25bc                         \u2502\n\u2502       [Save Audio]   [Save Transcript] [Log Metadata]              \u2502\n\u2502          \u2502               \u2502               \u2502                         \u2502\n\u2502          \u25bc               \u25bc               \u25bc                         \u2502\n\u2502        MinIO          MongoDB         MongoDB                      \u2502\n\u2502      (.wav file)      (transcript)    (call_log)                   \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/data-flow/#detailed-data-structures","title":"Detailed Data Structures","text":"<p>Audio Frame: <pre><code>{\n  \"type\": \"audio\",\n  \"session_id\": \"uuid\",\n  \"timestamp\": 1234567890,\n  \"sequence\": 1,\n  \"data\": \"&lt;base64-encoded-audio&gt;\",\n  \"format\": \"pcm_16k\"\n}\n</code></pre></p> <p>STT Request: <pre><code>{\n  \"audio\": \"&lt;audio-data&gt;\",\n  \"language\": \"en\",\n  \"model\": \"nova-2\"\n}\n</code></pre></p> <p>STT Response: <pre><code>{\n  \"transcript\": \"Hello, I'd like to know about your services\",\n  \"confidence\": 0.98,\n  \"alternatives\": [\n    { \"transcript\": \"Hello, I'd like to know about the services\" }\n  ]\n}\n</code></pre></p> <p>LLM Request: <pre><code>{\n  \"model\": \"gpt-4\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You are a helpful customer service agent...\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": \"Hello, I'd like to know about your services\"\n    }\n  ],\n  \"temperature\": 0.7,\n  \"max_tokens\": 150\n}\n</code></pre></p> <p>LLM Response: <pre><code>{\n  \"choices\": [\n    {\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Sure, I'd be happy to help! We offer...\"\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 45,\n    \"completion_tokens\": 78,\n    \"total_tokens\": 123\n  }\n}\n</code></pre></p> <p>Call Log (MongoDB): <pre><code>{\n  \"_id\": ObjectId(...),\n  \"campaign_id\": \"uuid\",\n  \"phone_number\": \"+1234567890\",\n  \"caller_id\": \"uuid\",\n  \"duration_seconds\": 120,\n  \"status\": \"completed\",\n  \"transcript\": \"...\",\n  \"emotions\": [\"satisfied\", \"engaged\"],\n  \"sentiment\": \"positive\",\n  \"created_at\": ISODate(\"2024-01-29T10:30:00Z\"),\n  \"updated_at\": ISODate(\"2024-01-29T10:32:00Z\")\n}\n</code></pre></p> <p>Recording (MinIO): <pre><code>Path: recordings/{campaign_id}/{call_id}.wav\nSize: ~960 KB (2-minute call at 16kHz)\nFormat: WAV (PCM, 16-bit, 16kHz mono)\n</code></pre></p>"},{"location":"architecture/data-flow/#agent-creation-data-flow","title":"Agent Creation Data Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Frontend: Create Agent Form \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502 Validate Form\u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\n  POST /agents (JSON)\n</code></pre> <p>Request Payload: <pre><code>{\n  \"name\": \"Sales Agent\",\n  \"llm_provider\": \"openai\",\n  \"llm_model\": \"gpt-4\",\n  \"stt_provider\": \"deepgram\",\n  \"tts_provider\": \"cartesia\",\n  \"system_prompt\": \"You are a sales agent...\",\n  \"language\": \"en\"\n}\n</code></pre></p> <p>Processing in Backend: <pre><code>1. Validate request data\n2. Check user permissions\n3. Create Agent document in MongoDB\n4. Generate config file\n5. Save config to MinIO\n6. Return Agent ID to frontend\n</code></pre></p> <p>Response: <pre><code>{\n  \"id\": \"agent-uuid\",\n  \"name\": \"Sales Agent\",\n  \"status\": \"active\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p> <p>Stored in MongoDB (agents collection): <pre><code>{\n  \"_id\": ObjectId(...),\n  \"id\": \"agent-uuid\",\n  \"user_id\": \"user-uuid\",\n  \"name\": \"Sales Agent\",\n  \"llm_provider\": \"openai\",\n  \"llm_model\": \"gpt-4\",\n  \"stt_provider\": \"deepgram\",\n  \"tts_provider\": \"cartesia\",\n  \"system_prompt\": \"You are a sales agent...\",\n  \"language\": \"en\",\n  \"status\": \"active\",\n  \"created_at\": ISODate(...),\n  \"updated_at\": ISODate(...)\n}\n</code></pre></p>"},{"location":"architecture/data-flow/#campaign-launch-data-flow","title":"Campaign Launch Data Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Backend: Create Campaign \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\n  POST /campaigns (JSON)\n\n  {\n    \"name\": \"New Year Sale\",\n    \"agent_id\": \"agent-uuid\",\n    \"phone_numbers\": [\"+1234567890\", \"+1234567891\"],\n    \"start_time\": \"2024-02-01T00:00:00Z\",\n    \"end_time\": \"2024-02-28T23:59:59Z\"\n  }\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Backend: Validation &amp; Setup  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502       \u2502        \u2502\n  \u25bc       \u25bc        \u25bc\n1. Fetch 2. Check 3. Create\n   Agent  Limits   Campaign\n   Config         Document\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Save to MongoDB      \u2502\n\u2502 campaigns collection \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502 Schedule calls    \u2502\n  \u2502 via Vobiz API     \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\n  Response: campaign_id\n</code></pre>"},{"location":"architecture/data-flow/#analytics-data-flow","title":"Analytics Data Flow","text":"<pre><code>Real-time call data\n       \u2502\n       \u251c\u2500\u25ba MongoDB (Raw logs)\n       \u2502\n       \u251c\u2500\u25ba Aggregation Pipeline\n       \u2502\n       \u2514\u2500\u25ba Cached metrics\n           (Redis optional)\n\nFrontend Dashboard\n       \u2502\n       \u25bc\nGET /analytics/calls?agent_id=...\nGET /analytics/sentiment?campaign_id=...\nGET /analytics/top-phrases?agent_id=...\n       \u2502\n       \u25bc\n  Backend aggregates\n       \u2502\n       \u25bc\n  Return JSON metrics\n       \u2502\n       \u25bc\n  Display in charts\n</code></pre> <p>Analytics Data in MongoDB: <pre><code>{\n  \"_id\": ObjectId(...),\n  \"type\": \"call_analytics\",\n  \"agent_id\": \"agent-uuid\",\n  \"campaign_id\": \"campaign-uuid\",\n  \"period\": \"2024-01-29\",\n  \"metrics\": {\n    \"total_calls\": 150,\n    \"completed_calls\": 145,\n    \"average_duration\": 180,\n    \"sentiment\": {\n      \"positive\": 95,\n      \"neutral\": 40,\n      \"negative\": 10\n    },\n    \"top_phrases\": [\n      \"pricing\",\n      \"features\",\n      \"support\"\n    ]\n  }\n}\n</code></pre></p>"},{"location":"architecture/data-flow/#recording-retrieval-data-flow","title":"Recording Retrieval Data Flow","text":"<p>User Action: Download call recording</p> <pre><code>Frontend\n    \u2502\n    \u251c\u2500\u25ba User clicks \"Download\"\n    \u2502\n    \u251c\u2500\u25ba GET /call-logs/{call_id}\n    \u2502\n    \u25bc\nBackend\n    \u2502\n    \u251c\u2500\u25ba Fetch metadata from MongoDB\n    \u2502\n    \u251c\u2500\u25ba Generate pre-signed URL for MinIO\n    \u2502\n    \u25bc\nResponse\n    \u2502\n    \u251c\u2500\u25ba {\n         \"call_id\": \"...\",\n         \"download_url\": \"https://minio:9001/...\",\n         \"transcript\": \"...\",\n         \"duration\": 120\n       }\n    \u2502\n    \u25bc\nFrontend\n    \u2502\n    \u251c\u2500\u25ba User clicks download link\n    \u2502\n    \u2514\u2500\u25ba Browser downloads audio from MinIO\n</code></pre>"},{"location":"architecture/data-flow/#authentication-data-flow","title":"Authentication Data Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Frontend: Login Form         \u2502\n\u2502 Email: user@example.com      \u2502\n\u2502 Password: \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\nPOST /auth/login\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\"\n}\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Backend: Authenticate        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502           \u2502\n    \u25bc           \u25bc\n1. Fetch   2. Hash &amp;\n   User       Compare\n   from       password\n   MongoDB\n    \u2502           \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502 Credentials  \u2502\n    \u2502 Valid?       \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u251c\u2500\u2500\u2500 YES \u2500\u2500\u25ba Generate JWT\n          \u2502                \u2502\n          \u2502                \u25bc\n          \u2502           {\n          \u2502             \"user_id\": \"uuid\",\n          \u2502             \"email\": \"...\",\n          \u2502             \"iat\": 1234567890,\n          \u2502             \"exp\": 1234571490,\n          \u2502             \"permissions\": [\"read\", \"write\"]\n          \u2502           }\n          \u2502                \u2502\n          \u2502                \u25bc\n          \u2502           Response:\n          \u2502           {\n          \u2502             \"token\": \"eyJ0eXAi...\",\n          \u2502             \"expires_in\": 3600\n          \u2502           }\n          \u2502\n          \u251c\u2500\u2500\u2500 NO \u2500\u2500\u25ba Response 401 Unauthorized\n</code></pre>"},{"location":"architecture/data-flow/#caching-performance","title":"Caching &amp; Performance","text":""},{"location":"architecture/data-flow/#backend-caching","title":"Backend Caching","text":"<pre><code>Request 1: GET /agents/123\n  \u2502\n  \u251c\u2500\u25ba Cache MISS\n  \u2502      \u2502\n  \u2502      \u25bc\n  \u2502   Query MongoDB\n  \u2502      \u2502\n  \u2502      \u25bc\n  \u2502   Store in cache (TTL: 10min)\n  \u2502      \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u25ba Return to client\n\nRequest 2: GET /agents/123 (within 10min)\n  \u2502\n  \u251c\u2500\u25ba Cache HIT\n  \u2502      \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u25ba Return from cache (no DB query)\n</code></pre>"},{"location":"architecture/data-flow/#database-query-optimization","title":"Database Query Optimization","text":"<p>Without index (slow): <pre><code>SCAN all documents in call_logs collection\nFilter by campaign_id\nO(n) - millions of documents\n</code></pre></p> <p>With index (fast): <pre><code>LOOKUP in index for campaign_id\nO(log n) - direct access\n</code></pre></p>"},{"location":"architecture/data-flow/#error-handling-recovery","title":"Error Handling &amp; Recovery","text":""},{"location":"architecture/data-flow/#stt-failure-scenario","title":"STT Failure Scenario","text":"<pre><code>Voice Server receives audio\n    \u2502\n    \u25bc\nSend to STT Service\n    \u2502\n    X Error: Service unavailable\n    \u2502\n    \u25bc\nRetry with backoff (1s, 2s, 4s)\n    \u2502\n    \u251c\u2500\u25ba Success on retry 2\n    \u2502      \u2502\n    \u2502      \u25bc\n    \u2502   Continue call flow\n    \u2502\n    \u2514\u2500\u25ba All retries failed\n         \u2502\n         \u25bc\n      Fallback: Ask user to repeat\n      \u2502\n      \u25bc\n      If persistent: End call gracefully\n</code></pre>"},{"location":"architecture/data-flow/#summary","title":"Summary","text":"Operation Data Path Storage Latency Voice Call Audio frames \u2192 STT \u2192 LLM \u2192 TTS MinIO + MongoDB &lt;500ms Create Agent Form \u2192 Backend \u2192 MongoDB MongoDB &lt;200ms Launch Campaign Form \u2192 Backend \u2192 Vobiz MongoDB &lt;500ms Get Analytics Query MongoDB \u2192 Aggregate MongoDB &lt;1000ms Download Recording Pre-signed URL \u2192 MinIO MinIO Depends on file size"},{"location":"architecture/data-flow/#next-steps","title":"Next Steps","text":"<ul> <li>System Design Details - Component implementation details</li> <li>REST API - Endpoint specifications</li> <li>WebSocket API - Real-time communication protocol</li> </ul>"},{"location":"architecture/overview/","title":"System Architecture Overview","text":"<p>This document provides a high-level overview of the VoiceERA system architecture using the C4 Model for system design.</p>"},{"location":"architecture/overview/#system-context-level-1","title":"System Context (Level 1)","text":"<p>The \"10,000-foot view\" showing VoiceERA's interactions with users and external systems.</p>"},{"location":"architecture/overview/#overview","title":"Overview","text":""},{"location":"architecture/overview/#key-actors","title":"Key Actors","text":"<ul> <li>End Users: People making/receiving voice calls</li> <li>Platform Operators: Administrators managing agents and campaigns</li> <li>AI Providers: External services for LLM, STT, TTS</li> <li>Telephony Provider: Vobiz platform for call handling</li> </ul>"},{"location":"architecture/overview/#container-diagram-level-2","title":"Container Diagram (Level 2)","text":"<p>Zooming in to show the major technology choices and inter-service communication.</p>"},{"location":"architecture/overview/#architecture-components","title":"Architecture Components","text":""},{"location":"architecture/overview/#service-responsibilities","title":"Service Responsibilities","text":"Service Technology Responsibility Frontend Next.js, React, TailwindCSS User interface, dashboards, real-time call monitoring Backend FastAPI, Python API endpoints, data persistence, authentication, orchestration Voice Server Pipecat, Python Real-time audio processing, agent orchestration, AI integration MongoDB NoSQL Database Store users, agents, campaigns, call logs, transcripts MinIO Object Storage Store audio files, recordings, transcripts External AI Various APIs LLM, STT, TTS, Translation services"},{"location":"architecture/overview/#key-design-patterns","title":"Key Design Patterns","text":""},{"location":"architecture/overview/#1-microservices-architecture","title":"1. Microservices Architecture","text":"<ul> <li>Independent, deployable services</li> <li>Clear separation of concerns</li> <li>Horizontal scaling capability</li> </ul>"},{"location":"architecture/overview/#2-api-first-design","title":"2. API-First Design","text":"<ul> <li>RESTful APIs for data operations</li> <li>WebSockets for real-time communication</li> <li>Clear service boundaries</li> </ul>"},{"location":"architecture/overview/#3-stateless-processing","title":"3. Stateless Processing","text":"<ul> <li>Frontend and Backend are stateless</li> <li>Enables horizontal scaling</li> <li>Voice Server maintains session state (WebSocket connections)</li> </ul>"},{"location":"architecture/overview/#4-external-service-integration","title":"4. External Service Integration","text":"<ul> <li>Pluggable AI providers</li> <li>Flexible STT/TTS/LLM configuration</li> <li>Fallback and failover support</li> </ul>"},{"location":"architecture/overview/#5-data-separation","title":"5. Data Separation","text":"<ul> <li>Structured data in MongoDB</li> <li>Unstructured content (audio/files) in MinIO</li> <li>Clear data ownership per service</li> </ul>"},{"location":"architecture/overview/#communication-patterns","title":"Communication Patterns","text":""},{"location":"architecture/overview/#synchronous-communication","title":"Synchronous Communication","text":"<pre><code>Frontend \u2500\u2500REST/HTTP\u2500\u2500\u25ba Backend \u2500\u2500HTTP\u2500\u2500\u25ba MongoDB\n         \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500       \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n</code></pre>"},{"location":"architecture/overview/#real-time-communication","title":"Real-Time Communication","text":"<pre><code>Frontend \u2500\u2500WebSocket\u2500\u2500\u2500\u2500\u25ba Voice Server \u2500\u2500\u2500\u25ba External AI\n         \u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500             \u25c4\u2500\u2500\n         (Audio frames, metadata)\n</code></pre>"},{"location":"architecture/overview/#event-based-processing","title":"Event-Based Processing","text":"<pre><code>Backend \u2500\u2500\u2500write\u2500\u2500\u2500\u2500\u25ba MongoDB\n           (User event, call data)\n             \u2502\n             \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u25ba MinIO (Audio file)\n             \u2502\n             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u25ba Voice Server (via API)\n</code></pre>"},{"location":"architecture/overview/#data-flow-at-a-glance","title":"Data Flow at a Glance","text":""},{"location":"architecture/overview/#voice-call-flow","title":"Voice Call Flow","text":"<pre><code>1. User calls phone number\n         \u25bc\n2. Vobiz routes call to Voice Server\n         \u25bc\n3. Voice Server authenticates with Backend\n         \u25bc\n4. Voice Server processes audio:\n   - STT: Audio \u2500\u2500\u25ba Text\n   - LLM: Text \u2500\u2500\u25ba Response\n   - TTS: Response \u2500\u2500\u25ba Audio\n         \u25bc\n5. Voice Server streams audio back to caller\n         \u25bc\n6. Backend logs call metadata &amp; stores recordings\n</code></pre>"},{"location":"architecture/overview/#deployment-architecture","title":"Deployment Architecture","text":""},{"location":"architecture/overview/#docker-containers","title":"Docker Containers","text":"<p>Each service runs in its own container:</p> <p></p>"},{"location":"architecture/overview/#volume-mounts","title":"Volume Mounts","text":"<pre><code>Host Machine          Docker Container\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500         \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n./voicera_backend  \u2500\u2500\u25ba /app\n./voicera_frontend \u2500\u2500\u25ba /app\n./data/mongodb     \u2500\u2500\u25ba /data/db\n./data/minio       \u2500\u2500\u25ba /data\n</code></pre>"},{"location":"architecture/overview/#security-layers","title":"Security Layers","text":""},{"location":"architecture/overview/#authentication-authorization","title":"Authentication &amp; Authorization","text":"<pre><code>User Login\n   \u2502\n   \u25bc\nBackend (JWT Token generation)\n   \u2502\n   \u25bc\nFrontend (Store JWT)\n   \u2502\n   \u25bc\nVoice Server (Validate JWT)\n   \u2502\n   \u25bc\nAudio Processing\n</code></pre>"},{"location":"architecture/overview/#data-protection","title":"Data Protection","text":"<ul> <li>In Transit: TLS/HTTPS for all external API calls</li> <li>At Rest: Database and storage encryption</li> <li>Access Control: MongoDB authentication, MinIO IAM</li> </ul>"},{"location":"architecture/overview/#scalability-considerations","title":"Scalability Considerations","text":""},{"location":"architecture/overview/#horizontal-scaling","title":"Horizontal Scaling","text":"<p>Stateless Services: - Frontend (multiple replicas behind load balancer) - Backend (multiple replicas with shared MongoDB)</p> <p>Stateful Services: - Voice Server (sticky sessions or session store like Redis) - MongoDB (replica set or sharding)</p>"},{"location":"architecture/overview/#vertical-scaling","title":"Vertical Scaling","text":"<ul> <li>Increase CPU/Memory for services</li> <li>GPU acceleration for STT/TTS</li> <li>Connection pooling for databases</li> </ul>"},{"location":"architecture/overview/#technology-stack-summary","title":"Technology Stack Summary","text":"Layer Technology Version Frontend Next.js 16+ React 18+ TailwindCSS 4+ Backend FastAPI 0.100+ Python 3.10+ Uvicorn Latest Voice Pipecat Latest Python 3.10+ Database MongoDB 5.0+ Storage MinIO Latest Infrastructure Docker 20.10+ Docker Compose 1.29+ Nginx Latest"},{"location":"architecture/overview/#next-steps","title":"Next Steps","text":"<ul> <li>System Design Details - Deep dive into each component</li> <li>Data Flow - How data moves through the system</li> <li>Quick Start - Start using VoiceERA</li> </ul>"},{"location":"architecture/system-design/","title":"System Design","text":"<p>Detailed technical design and component documentation.</p>"},{"location":"architecture/system-design/#component-deep-dives","title":"Component Deep Dives","text":""},{"location":"architecture/system-design/#1-frontend-service","title":"1. Frontend Service","text":"<p>Stack: Next.js 16+, React 18+, TailwindCSS 4+</p> <p>Port: 3000</p> <p>Key Features: - Server-side rendering (SSR) for performance - Client-side state management - Real-time WebSocket connections - Responsive design for mobile/desktop</p> <p>Key Modules: <pre><code>app/\n\u251c\u2500\u2500 (auth)              # Authentication pages\n\u2502   \u251c\u2500\u2500 login.tsx\n\u2502   \u2514\u2500\u2500 signup.tsx\n\u251c\u2500\u2500 (dashboard)         # Main application\n\u2502   \u251c\u2500\u2500 agents/\n\u2502   \u251c\u2500\u2500 campaigns/\n\u2502   \u251c\u2500\u2500 call-logs/\n\u2502   \u2514\u2500\u2500 analytics/\n\u251c\u2500\u2500 api/                # API routes\n\u2514\u2500\u2500 components/         # Shared components\n</code></pre></p> <p>Dependencies: - <code>axios</code> or <code>fetch</code> - HTTP client - <code>socket.io-client</code> - WebSocket client - <code>zustand</code> or <code>redux</code> - State management - <code>next-auth</code> - Authentication</p>"},{"location":"architecture/system-design/#2-backend-api-service","title":"2. Backend API Service","text":"<p>Stack: FastAPI, Python 3.10+, SQLAlchemy/Motor</p> <p>Port: 8000</p> <p>Key Endpoints: - <code>/auth/*</code> - Authentication - <code>/agents/*</code> - Agent CRUD operations - <code>/campaigns/*</code> - Campaign management - <code>/call-logs/*</code> - Call history - <code>/transcripts/*</code> - Transcription data - <code>/health</code> - Service health</p> <p>Database Schema: <pre><code>Users\n\u251c\u2500\u2500 id (UUID)\n\u251c\u2500\u2500 email\n\u251c\u2500\u2500 password (hashed)\n\u251c\u2500\u2500 role (admin/user)\n\u2514\u2500\u2500 created_at\n\nAgents\n\u251c\u2500\u2500 id (UUID)\n\u251c\u2500\u2500 name\n\u251c\u2500\u2500 llm_provider\n\u251c\u2500\u2500 stt_provider\n\u251c\u2500\u2500 tts_provider\n\u251c\u2500\u2500 system_prompt\n\u251c\u2500\u2500 user_id (FK)\n\u2514\u2500\u2500 created_at\n\nCampaigns\n\u251c\u2500\u2500 id (UUID)\n\u251c\u2500\u2500 name\n\u251c\u2500\u2500 agent_id (FK)\n\u251c\u2500\u2500 phone_numbers\n\u251c\u2500\u2500 status\n\u2514\u2500\u2500 created_at\n\nCallLogs\n\u251c\u2500\u2500 id (UUID)\n\u251c\u2500\u2500 campaign_id (FK)\n\u251c\u2500\u2500 phone_number\n\u251c\u2500\u2500 duration\n\u251c\u2500\u2500 transcript\n\u251c\u2500\u2500 status\n\u2514\u2500\u2500 created_at\n</code></pre></p> <p>Key Services: <pre><code># app/services/\n\u251c\u2500\u2500 agent_service.py      # Agent logic\n\u251c\u2500\u2500 campaign_service.py   # Campaign logic\n\u251c\u2500\u2500 call_recording_service.py\n\u251c\u2500\u2500 auth_service.py       # JWT tokens\n\u2514\u2500\u2500 analytics_service.py  # Call analytics\n</code></pre></p>"},{"location":"architecture/system-design/#3-voice-server","title":"3. Voice Server","text":"<p>Stack: Pipecat, Python 3.10+</p> <p>Port: 7860</p> <p>Responsibilities: - Accept WebSocket connections from frontend - Receive raw audio frames - Process audio through STT pipeline - Generate LLM responses - Convert responses to speech via TTS - Stream audio back to user</p> <p>Pipeline Architecture: <pre><code>Audio Input\n    \u2502\n    \u25bc\n[Resampler]\n    \u2502\n    \u25bc\n[STT Service]\n    \u2502\n    \u25bc (Transcript)\n[LLM Service]\n    \u2502\n    \u25bc (Response)\n[TTS Service]\n    \u2502\n    \u25bc\n[Audio Output]\n</code></pre></p> <p>Configuration: <pre><code># config/config.example.yaml\nstt:\n  provider: deepgram  # or ai4bharat, google, etc.\n  language: en\n\nllm:\n  provider: openai\n  model: gpt-4\n  temperature: 0.7\n\ntts:\n  provider: cartesia\n  voice: english_male\n  speed: 1.0\n</code></pre></p>"},{"location":"architecture/system-design/#4-mongodb","title":"4. MongoDB","text":"<p>Purpose: Primary data store</p> <p>Collections: - <code>users</code> - User accounts - <code>agents</code> - Agent configurations - <code>campaigns</code> - Campaign definitions - <code>call_logs</code> - Call history and metadata - <code>transcripts</code> - Call transcriptions - <code>analytics</code> - Aggregated metrics</p> <p>Indices: <pre><code>// Performance-critical indices\ndb.users.createIndex({ email: 1 }, { unique: true })\ndb.agents.createIndex({ user_id: 1 })\ndb.campaigns.createIndex({ agent_id: 1 })\ndb.call_logs.createIndex({ campaign_id: 1, created_at: -1 })\ndb.call_logs.createIndex({ phone_number: 1 })\n</code></pre></p>"},{"location":"architecture/system-design/#5-minio-object-storage","title":"5. MinIO (Object Storage)","text":"<p>Purpose: Store binary files - recordings, transcripts, etc.</p> <p>Bucket Structure: <pre><code>minio/\n\u251c\u2500\u2500 recordings/\n\u2502   \u2514\u2500\u2500 {campaign_id}/{call_id}.wav\n\u251c\u2500\u2500 transcripts/\n\u2502   \u2514\u2500\u2500 {campaign_id}/{call_id}.json\n\u2514\u2500\u2500 agent-configs/\n    \u2514\u2500\u2500 {agent_id}/config.json\n</code></pre></p> <p>Access: S3-compatible API (AWS SDK compatible)</p>"},{"location":"architecture/system-design/#6-external-ai-services","title":"6. External AI Services","text":""},{"location":"architecture/system-design/#llm-services","title":"LLM Services","text":"<ul> <li>OpenAI: GPT-4, GPT-3.5-turbo</li> <li>Anthropic: Claude</li> <li>Local: LLaMA, Mistral (self-hosted)</li> </ul>"},{"location":"architecture/system-design/#stt-services","title":"STT Services","text":"<ul> <li>Deepgram: High-accuracy transcription</li> <li>Google Cloud: Speech-to-Text</li> <li>AI4Bharat: Indic language support</li> </ul>"},{"location":"architecture/system-design/#tts-services","title":"TTS Services","text":"<ul> <li>Cartesia: High-quality voice synthesis</li> <li>Google Cloud: Text-to-Speech</li> <li>AI4Bharat: Indic language synthesis</li> </ul>"},{"location":"architecture/system-design/#request-response-flows","title":"Request-Response Flows","text":""},{"location":"architecture/system-design/#authentication-flow","title":"Authentication Flow","text":"<pre><code>1. Frontend sends login credentials\n   POST /auth/login { email, password }\n\n2. Backend validates credentials\n   - Hash password\n   - Compare with stored hash\n\n3. Backend generates JWT token\n   token = sign({ user_id, exp, permissions })\n\n4. Frontend stores token\n   localStorage.setItem('token', jwt)\n\n5. Subsequent requests include token\n   headers.Authorization = \"Bearer \" + jwt\n</code></pre>"},{"location":"architecture/system-design/#voice-call-flow","title":"Voice Call Flow","text":"<pre><code>1. User initiates call in frontend\n   websocket.connect('ws://voice-server:7860')\n\n2. Frontend sends auth token\n   message: { type: 'auth', token: jwt }\n\n3. Voice Server validates token\n   - Decodes JWT\n   - Checks permissions\n\n4. Voice Server sends ready signal\n   message: { type: 'ready', session_id: uuid }\n\n5. Frontend streams audio chunks\n   message: { type: 'audio', data: ArrayBuffer }\n\n6. Voice Server processes\n   - STT: Audio \u2192 Text\n   - LLM: Text \u2192 Response\n   - TTS: Response \u2192 Audio\n\n7. Voice Server sends response audio\n   message: { type: 'audio', data: ArrayBuffer }\n\n8. Frontend plays audio\n   audioContext.playback(data)\n</code></pre>"},{"location":"architecture/system-design/#recording-storage","title":"Recording &amp; Storage","text":"<pre><code>1. During call, Voice Server buffers audio\n\n2. After call ends\n   - Save raw audio to MinIO\n   - Save transcript to MongoDB &amp; MinIO\n   - Log call metadata to MongoDB\n\n3. Frontend fetches call data\n   GET /call-logs/{call_id}\n   - Returns metadata from MongoDB\n   - Returns pre-signed URL to audio in MinIO\n</code></pre>"},{"location":"architecture/system-design/#error-handling-resilience","title":"Error Handling &amp; Resilience","text":""},{"location":"architecture/system-design/#circuit-breaker-pattern","title":"Circuit Breaker Pattern","text":"<pre><code>class CircuitBreaker:\n    def __init__(self, failure_threshold=5, timeout=60):\n        self.failure_count = 0\n        self.threshold = failure_threshold\n        self.timeout = timeout\n\n    def call(self, func, *args):\n        if self.is_open():\n            raise CircuitBreakerOpen()\n\n        try:\n            result = func(*args)\n            self.reset()\n            return result\n        except Exception as e:\n            self.record_failure()\n            raise\n</code></pre>"},{"location":"architecture/system-design/#retry-logic","title":"Retry Logic","text":"<pre><code>@retry(max_attempts=3, backoff=exponential)\ndef call_external_api(endpoint):\n    # Automatically retry on failure\n    # with exponential backoff\n    pass\n</code></pre>"},{"location":"architecture/system-design/#health-checks","title":"Health Checks","text":"<p>Backend: <pre><code>GET /health\nResponse: { status: \"ok\", timestamp: \"...\" }\n</code></pre></p> <p>Voice Server: <pre><code>- STT service connectivity\n- LLM service connectivity\n- TTS service connectivity\n- Memory usage\n- Active connections\n</code></pre></p>"},{"location":"architecture/system-design/#performance-considerations","title":"Performance Considerations","text":""},{"location":"architecture/system-design/#caching-strategy","title":"Caching Strategy","text":"<pre><code># Cache agent configurations (10 min TTL)\n@cache(ttl=600)\ndef get_agent(agent_id):\n    return db.agents.find_one({\"_id\": ObjectId(agent_id)})\n\n# Cache call logs (1 hour TTL)\n@cache(ttl=3600)\ndef get_call_logs(campaign_id, limit=100):\n    return db.call_logs.find({...})\n</code></pre>"},{"location":"architecture/system-design/#database-optimization","title":"Database Optimization","text":"<ul> <li>Connection pooling</li> <li>Query indexing</li> <li>Pagination for list endpoints</li> <li>Aggregation pipelines for analytics</li> </ul>"},{"location":"architecture/system-design/#audio-processing","title":"Audio Processing","text":"<ul> <li>Streaming rather than buffering entire files</li> <li>Resampling to match provider requirements</li> <li>Compression for storage</li> </ul>"},{"location":"architecture/system-design/#monitoring-observability","title":"Monitoring &amp; Observability","text":""},{"location":"architecture/system-design/#logging","title":"Logging","text":"<p>All services log to stdout in JSON format:</p> <pre><code>{\n  \"timestamp\": \"2024-01-29T10:30:45Z\",\n  \"level\": \"INFO\",\n  \"service\": \"backend\",\n  \"message\": \"Call initiated\",\n  \"call_id\": \"abc123\",\n  \"agent_id\": \"xyz789\"\n}\n</code></pre>"},{"location":"architecture/system-design/#metrics","title":"Metrics","text":"<p>Key metrics to monitor:</p> <ul> <li>API Response Time: Mean, P95, P99</li> <li>Call Duration: Average, distribution</li> <li>STT Accuracy: Word error rate</li> <li>LLM Response Time: Latency</li> <li>System Resources: CPU, Memory, Disk</li> <li>Error Rate: By service, by endpoint</li> </ul>"},{"location":"architecture/system-design/#tracing","title":"Tracing","text":"<p>Optional: Implement distributed tracing with Jaeger or Zipkin to track request flows across services.</p>"},{"location":"architecture/system-design/#security-considerations","title":"Security Considerations","text":""},{"location":"architecture/system-design/#data-validation","title":"Data Validation","text":"<pre><code>from pydantic import BaseModel, validator\n\nclass CreateAgentRequest(BaseModel):\n    name: str = Field(..., min_length=1, max_length=100)\n    llm_provider: str = Field(..., pattern=\"^[a-z0-9_]+$\")\n\n    @validator('name')\n    def name_must_be_valid(cls, v):\n        if not v.strip():\n            raise ValueError('Name cannot be empty')\n        return v.strip()\n</code></pre>"},{"location":"architecture/system-design/#sql-injection-prevention","title":"SQL Injection Prevention","text":"<ul> <li>Use parameterized queries (SQLAlchemy ORM)</li> <li>Never concatenate user input into queries</li> </ul>"},{"location":"architecture/system-design/#cors-configuration","title":"CORS Configuration","text":"<pre><code>app.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://yourdomain.com\"],\n    allow_credentials=True,\n    allow_methods=[\"GET\", \"POST\", \"PUT\", \"DELETE\"],\n    allow_headers=[\"Authorization\", \"Content-Type\"],\n)\n</code></pre>"},{"location":"architecture/system-design/#rate-limiting","title":"Rate Limiting","text":"<pre><code>from slowapi import Limiter\nfrom slowapi.util import get_remote_address\n\nlimiter = Limiter(key_func=get_remote_address)\n\n@app.post(\"/auth/login\")\n@limiter.limit(\"5/minute\")\nasync def login(request: Request, ...):\n    # Max 5 login attempts per minute\n    pass\n</code></pre>"},{"location":"architecture/system-design/#next-steps","title":"Next Steps","text":"<ul> <li>Data Flow - Trace how data moves through the system</li> <li>Docker Deployment - Containerized deployment</li> <li>API Documentation - Detailed API endpoints</li> </ul>"},{"location":"deployment/docker/","title":"Docker &amp; Docker Compose Deployment","text":"<p>Complete guide to deploying VoiceERA using Docker and Docker Compose.</p>"},{"location":"deployment/docker/#overview","title":"Overview","text":"<p>Docker containerization ensures consistent behavior across development, staging, and production environments.</p> <p>Key Benefits: - Reproducible deployments - Easy scaling - Service isolation - Simplified dependency management - Production-ready setup</p>"},{"location":"deployment/docker/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker 20.10+</li> <li>Docker Compose 1.29+</li> <li>8GB+ RAM</li> <li>50GB+ disk space</li> </ul>"},{"location":"deployment/docker/#installation","title":"Installation","text":""},{"location":"deployment/docker/#docker-desktop-macos-windows","title":"Docker Desktop (macOS &amp; Windows)","text":"<p>Download and install from docker.com/products/docker-desktop</p>"},{"location":"deployment/docker/#linux-ubuntudebian","title":"Linux (Ubuntu/Debian)","text":"<pre><code># Install Docker\nsudo apt-get update\nsudo apt-get install docker.io docker-compose\n\n# Add user to docker group\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre>"},{"location":"deployment/docker/#building-images","title":"Building Images","text":""},{"location":"deployment/docker/#build-all-services","title":"Build All Services","text":"<pre><code># Using Makefile\nmake build-all-services\n\n# Or manually\ndocker-compose build\n</code></pre>"},{"location":"deployment/docker/#build-specific-service","title":"Build Specific Service","text":"<pre><code># Build only backend\ndocker-compose build backend\n\n# Build only frontend\ndocker-compose build frontend\n\n# Build voice server\ndocker-compose build voice_server\n</code></pre>"},{"location":"deployment/docker/#view-built-images","title":"View Built Images","text":"<pre><code># List all images\ndocker images | grep voicera\n\n# Expected output:\n# voicera_mono_repository_backend      latest    abc123...\n# voicera_mono_repository_frontend     latest    def456...\n# voicera_mono_repository_voice_server latest    ghi789...\n</code></pre>"},{"location":"deployment/docker/#running-services","title":"Running Services","text":""},{"location":"deployment/docker/#start-all-services","title":"Start All Services","text":"<pre><code># Using Makefile (recommended)\nmake start-all-services\n\n# Or manually\ndocker-compose up -d\n\n# Or with logs\ndocker-compose up\n\n# Stop gracefully\ndocker-compose down\n</code></pre>"},{"location":"deployment/docker/#service-startup-sequence","title":"Service Startup Sequence","text":"<p>The services start with proper dependencies:</p> <pre><code>1. MongoDB starts first\n   (other services depend on it)\n         \u2502\n2. MinIO starts\n   (storage dependency)\n         \u2502\n3. Backend starts\n   (orchestrator)\n         \u2502\n4. Voice Server starts\n   (depends on Backend)\n         \u2502\n5. Frontend starts\n   (depends on Backend)\n</code></pre>"},{"location":"deployment/docker/#health-checks","title":"Health Checks","text":"<p>Docker Compose has health checks configured:</p> <pre><code># View service health status\ndocker-compose ps\n\n# Example output:\nNAME              STATUS\nvoicera_mongodb   Up (healthy)\nvoicera_minio     Up (healthy)\nvoicera_backend   Up (healthy)\nvoicera_voice_server  Up\nvoicera_frontend  Up\n</code></pre>"},{"location":"deployment/docker/#service-configuration","title":"Service Configuration","text":""},{"location":"deployment/docker/#docker-composeyml-structure","title":"docker-compose.yml Structure","text":"<pre><code>version: '3.8'\n\nservices:\n  # Service definitions\n  mongodb:\n    image: mongo:latest\n    ports:\n      - \"27017:27017\"\n    environment:\n      MONGO_INITDB_ROOT_USERNAME: admin\n      MONGO_INITDB_ROOT_PASSWORD: admin123\n    volumes:\n      - mongodb_data:/data/db\n    networks:\n      - voicera_network\n\n  backend:\n    build:\n      context: ./voicera_backend\n      dockerfile: Dockerfile\n    ports:\n      - \"8000:8000\"\n    env_file:\n      - ./voicera_backend/.env\n    depends_on:\n      mongodb:\n        condition: service_healthy\n    networks:\n      - voicera_network\n\n  # ... other services\n\nvolumes:\n  mongodb_data:\n  minio_data:\n\nnetworks:\n  voicera_network:\n    driver: bridge\n</code></pre>"},{"location":"deployment/docker/#environment-file-management","title":"Environment File Management","text":"<pre><code># Copy all example files\ncp voicera_backend/env.example voicera_backend/.env\ncp voice_2_voice_server/.env.example voice_2_voice_server/.env\ncp voicera_frontend/.env.example voicera_frontend/.env.local\n\n# Edit each file with your configuration\nnano voicera_backend/.env\nnano voice_2_voice_server/.env\nnano voicera_frontend/.env.local\n</code></pre>"},{"location":"deployment/docker/#managing-services","title":"Managing Services","text":""},{"location":"deployment/docker/#view-logs","title":"View Logs","text":"<pre><code># All services\ndocker-compose logs\n\n# Specific service\ndocker-compose logs backend\ndocker-compose logs voice_server\n\n# Follow logs (real-time)\ndocker-compose logs -f backend\n\n# Last 100 lines\ndocker-compose logs --tail 100 mongodb\n\n# Since specific time\ndocker-compose logs --since 2024-01-29T10:00:00 backend\n</code></pre>"},{"location":"deployment/docker/#execute-commands-in-container","title":"Execute Commands in Container","text":"<pre><code># Access backend shell\ndocker-compose exec backend bash\n\n# Run Python command\ndocker-compose exec backend python -c \"import app; print(app.__version__)\"\n\n# Access MongoDB shell\ndocker-compose exec mongodb mongosh --username admin --password admin123\n\n# Access MinIO console\n# Open http://localhost:9001\n</code></pre>"},{"location":"deployment/docker/#restart-services","title":"Restart Services","text":"<pre><code># Restart all\ndocker-compose restart\n\n# Restart specific\ndocker-compose restart backend\n\n# Hard restart (stop then start)\ndocker-compose down\ndocker-compose up -d\n</code></pre>"},{"location":"deployment/docker/#networking","title":"Networking","text":""},{"location":"deployment/docker/#service-discovery","title":"Service Discovery","text":"<p>Services automatically discover each other via service names:</p> <pre><code>Backend \u2192 MongoDB: mongodb:27017\nBackend \u2192 MinIO: minio:9000\nVoice Server \u2192 Backend: backend:8000\n</code></pre>"},{"location":"deployment/docker/#exposing-ports","title":"Exposing Ports","text":"<pre><code># Internal network (not exposed to host)\nmongodb:\n  ports: [\"27017:27017\"]  # Only internal\n\n# Exposed to host\nbackend:\n  ports: [\"8000:8000\"]    # localhost:8000\n</code></pre>"},{"location":"deployment/docker/#custom-network","title":"Custom Network","text":"<p>Services are on <code>voicera_network</code>:</p> <pre><code># View network details\ndocker network inspect voicera_mono_repository_voicera_network\n\n# Test connectivity between containers\ndocker-compose exec backend ping mongodb\n</code></pre>"},{"location":"deployment/docker/#data-persistence","title":"Data Persistence","text":""},{"location":"deployment/docker/#volumes","title":"Volumes","text":"<pre><code>volumes:\n  mongodb_data:\n    driver: local\n  minio_data:\n    driver: local\n</code></pre>"},{"location":"deployment/docker/#volume-paths","title":"Volume Paths","text":"<pre><code># List volumes\ndocker volume ls | grep voicera\n\n# Inspect volume\ndocker volume inspect voicera_mono_repository_mongodb_data\n\n# View volume location on host\ndocker volume inspect voicera_mono_repository_minio_data\n</code></pre>"},{"location":"deployment/docker/#backup-restore","title":"Backup &amp; Restore","text":"<p>Backup MongoDB: <pre><code># Export database\ndocker-compose exec mongodb mongodump \\\n  --username admin \\\n  --password admin123 \\\n  --out /backup\n\n# Copy to host\ndocker cp voicera_mongodb:/backup ./mongodb_backup\n</code></pre></p> <p>Backup MinIO: <pre><code># Use MinIO client\ndocker-compose exec minio mc mirror minio/bucket ./backup/minio\n</code></pre></p>"},{"location":"deployment/docker/#scaling-services","title":"Scaling Services","text":""},{"location":"deployment/docker/#horizontal-scaling-multiple-replicas","title":"Horizontal Scaling (Multiple Replicas)","text":"<p>For stateless services (Frontend, Backend):</p> <pre><code># Scale backend to 3 instances\ndocker-compose up -d --scale backend=3\n\n# Load balancer required (use nginx or traefik)\n</code></pre>"},{"location":"deployment/docker/#vertical-scaling-more-resources","title":"Vertical Scaling (More Resources)","text":"<p>Increase CPU/Memory allocation:</p> <pre><code>services:\n  backend:\n    # ... other config\n    deploy:\n      resources:\n        limits:\n          cpus: '2.0'\n          memory: 4G\n        reservations:\n          cpus: '1.0'\n          memory: 2G\n</code></pre>"},{"location":"deployment/docker/#production-considerations","title":"Production Considerations","text":""},{"location":"deployment/docker/#use-production-image-registry","title":"Use Production Image Registry","text":"<pre><code># Tag images for registry\ndocker tag voicera_backend:latest registry.example.com/voicera/backend:1.0.0\ndocker tag voicera_frontend:latest registry.example.com/voicera/frontend:1.0.0\ndocker tag voicera_voice_server:latest registry.example.com/voicera/voice-server:1.0.0\n\n# Push to registry\ndocker push registry.example.com/voicera/backend:1.0.0\n</code></pre>"},{"location":"deployment/docker/#update-docker-composeyml-for-production","title":"Update docker-compose.yml for Production","text":"<pre><code>services:\n  backend:\n    image: registry.example.com/voicera/backend:1.0.0\n    restart: always\n    deploy:\n      resources:\n        limits:\n          cpus: '2'\n          memory: 4G\n\n  mongodb:\n    restart: always\n    command: mongod --replSet rs0  # Enable replication\n\n  minio:\n    restart: always\n    command: minio server /data --console-address \":9001\"\n</code></pre>"},{"location":"deployment/docker/#enable-logging","title":"Enable Logging","text":"<pre><code>services:\n  backend:\n    logging:\n      driver: \"json-file\"\n      options:\n        max-size: \"100m\"\n        max-file: \"10\"\n        labels: \"service=backend\"\n</code></pre>"},{"location":"deployment/docker/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/docker/#container-wont-start","title":"Container won't start","text":"<pre><code># Check logs\ndocker-compose logs backend\n\n# Inspect container\ndocker inspect voicera_backend\n\n# Rebuild image\ndocker-compose build --no-cache backend\ndocker-compose up backend\n</code></pre>"},{"location":"deployment/docker/#port-conflicts","title":"Port conflicts","text":"<pre><code># Find process using port\nlsof -i :8000\n\n# Change port in docker-compose.yml\nports:\n  - \"8001:8000\"  # Map to different port\n</code></pre>"},{"location":"deployment/docker/#out-of-memory","title":"Out of memory","text":"<pre><code># Check Docker resource usage\ndocker stats\n\n# Increase Docker memory\n# Docker Desktop: Settings &gt; Resources &gt; Memory\n\n# Linux: Increase swap\nsudo fallocate -l 4G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n</code></pre>"},{"location":"deployment/docker/#network-issues","title":"Network issues","text":"<pre><code># Verify network connectivity\ndocker network inspect voicera_mono_repository_voicera_network\n\n# Test DNS resolution\ndocker-compose exec backend nslookup mongodb\n\n# Ping between services\ndocker-compose exec backend ping minio\n</code></pre>"},{"location":"deployment/docker/#cleanup","title":"Cleanup","text":"<pre><code># Stop and remove all containers\ndocker-compose down\n\n# Also remove volumes (DELETE DATA!)\ndocker-compose down -v\n\n# Remove unused images\ndocker image prune -a\n\n# Remove unused volumes\ndocker volume prune\n\n# Remove everything\ndocker system prune -a --volumes\n</code></pre>"},{"location":"deployment/docker/#next-steps","title":"Next Steps","text":"<ul> <li>Production Deployment - Production setup guide</li> <li>Configuration - Environment setup</li> <li>Quick Start - Get running quickly</li> </ul>"},{"location":"deployment/environment/","title":"Environment Variables Reference","text":"<p>Complete reference for all environment variables used in VoiceERA services.</p>"},{"location":"deployment/environment/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Backend Environment</li> <li>Voice Server Environment</li> <li>Frontend Environment</li> <li>AI4Bharat Services</li> <li>Security &amp; Secrets</li> </ol>"},{"location":"deployment/environment/#backend-environment","title":"Backend Environment","text":""},{"location":"deployment/environment/#file-voicera_backendenv","title":"File: <code>voicera_backend/.env</code>","text":""},{"location":"deployment/environment/#database-configuration","title":"Database Configuration","text":"<pre><code># MongoDB Connection\nMONGODB_HOST=mongodb\nMONGODB_PORT=27017\nMONGODB_USER=admin\nMONGODB_PASSWORD=admin123\nMONGODB_DATABASE=voicera\n\n# Connection Pool\nMONGODB_MAX_POOL_SIZE=50\nMONGODB_TIMEOUT_MS=5000\nMONGODB_SERVER_SELECTION_TIMEOUT_MS=5000\n</code></pre>"},{"location":"deployment/environment/#minio-configuration","title":"MinIO Configuration","text":"<pre><code># MinIO S3-Compatible Storage\nMINIO_HOST=minio\nMINIO_PORT=9000\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\nMINIO_REGION=us-east-1\nMINIO_SECURE=false          # true for HTTPS in production\n\n# Buckets (auto-created if not exist)\nMINIO_BUCKET_RECORDINGS=recordings\nMINIO_BUCKET_TRANSCRIPTS=transcripts\nMINIO_BUCKET_AGENTS=agent-configs\n</code></pre>"},{"location":"deployment/environment/#jwt-security","title":"JWT &amp; Security","text":"<pre><code># JWT Configuration\nJWT_SECRET_KEY=your-secret-key-change-this\nJWT_ALGORITHM=HS256\nJWT_EXPIRATION_HOURS=24\nJWT_REFRESH_EXPIRATION_DAYS=30\n\n# CORS Configuration\nCORS_ORIGINS=[\"http://localhost:3000\",\"https://yourdomain.com\"]\nCORS_ALLOW_CREDENTIALS=true\nCORS_MAX_AGE=3600\n</code></pre>"},{"location":"deployment/environment/#api-configuration","title":"API Configuration","text":"<pre><code># API Settings\nAPI_TITLE=VoiceERA API\nAPI_VERSION=1.0.0\nAPI_DESCRIPTION=Voice AI Platform with Telephony Integration\nAPI_DOCS_ENABLED=true            # /docs endpoint\nAPI_REDOC_ENABLED=true           # /redoc endpoint\n\n# Server\nHOST=0.0.0.0\nPORT=8000\nWORKERS=4\nWORKER_CLASS=uvicorn.workers.UvicornWorker\nRELOAD=false                     # true in development\n</code></pre>"},{"location":"deployment/environment/#logging","title":"Logging","text":"<pre><code># Logging Configuration\nLOG_LEVEL=INFO                   # DEBUG, INFO, WARNING, ERROR, CRITICAL\nLOG_FORMAT=json                  # json or text\nLOG_FILE=/var/log/voicera/backend.log\nLOG_MAX_BYTES=104857600          # 100MB\nLOG_BACKUP_COUNT=10\n</code></pre>"},{"location":"deployment/environment/#email-configuration-optional","title":"Email Configuration (Optional)","text":"<pre><code># SMTP for email notifications\nSMTP_ENABLED=false\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USE_TLS=true\nSMTP_USER=your-email@gmail.com\nSMTP_PASSWORD=your-app-password\nSMTP_FROM=noreply@voicera.ai\n</code></pre>"},{"location":"deployment/environment/#voice-server-environment","title":"Voice Server Environment","text":""},{"location":"deployment/environment/#file-voice_2_voice_serverenv","title":"File: <code>voice_2_voice_server/.env</code>","text":""},{"location":"deployment/environment/#vobiz-telephony","title":"Vobiz Telephony","text":"<pre><code># Vobiz API Configuration\nVOBIZ_ENABLED=true\nVOBIZ_API_BASE=https://api.vobiz.ai/api/v1\nVOBIZ_AUTH_ID=your_auth_id\nVOBIZ_AUTH_PASSWORD=your_auth_password\nVOBIZ_WEBHOOK_URL=https://yourdomain.com/vobiz/webhook\n</code></pre>"},{"location":"deployment/environment/#llm-provider","title":"LLM Provider","text":"OpenAIAnthropicLocal LLM <pre><code>LLM_PROVIDER=openai\nOPENAI_API_KEY=sk-your-api-key-here\nOPENAI_MODEL=gpt-4                  # gpt-4, gpt-3.5-turbo\nOPENAI_TEMPERATURE=0.7\nOPENAI_MAX_TOKENS=200\nOPENAI_TIMEOUT_SECONDS=30\n</code></pre> <pre><code>LLM_PROVIDER=anthropic\nANTHROPIC_API_KEY=sk-ant-...\nANTHROPIC_MODEL=claude-3-opus      # claude-3-opus, claude-3-sonnet\nANTHROPIC_TEMPERATURE=0.7\n</code></pre> <pre><code>LLM_PROVIDER=local\nLOCAL_LLM_API_BASE=http://localhost:8000\nLOCAL_LLM_MODEL=mistral-7b\nLOCAL_LLM_TEMPERATURE=0.7\n</code></pre>"},{"location":"deployment/environment/#speech-to-text-stt-provider","title":"Speech-to-Text (STT) Provider","text":"DeepgramGoogle CloudAI4Bharat <pre><code>STT_PROVIDER=deepgram\nDEEPGRAM_API_KEY=your-api-key\nDEEPGRAM_MODEL=nova-2              # nova-2, nova, enhanced\nDEEPGRAM_LANGUAGE=en\nDEEPGRAM_ENCODING=linear16\nDEEPGRAM_SAMPLE_RATE=16000\n</code></pre> <pre><code>STT_PROVIDER=google\nGOOGLE_CLOUD_STT_CREDENTIALS=/path/to/credentials.json\nGOOGLE_CLOUD_STT_LANGUAGE=en-US\n</code></pre> <pre><code>STT_PROVIDER=ai4bharat\nSTT_SERVICE_URL=http://ai4bharat_stt_server:8001\nSTT_LANGUAGE=hi                    # Language code\nSTT_SAMPLE_RATE=16000\n</code></pre>"},{"location":"deployment/environment/#text-to-speech-tts-provider","title":"Text-to-Speech (TTS) Provider","text":"CartesiaGoogle CloudAI4Bharat <pre><code>TTS_PROVIDER=cartesia\nCARTESIA_API_KEY=your-api-key\nCARTESIA_VOICE=english_male\nCARTESIA_LANGUAGE=en\nCARTESIA_SAMPLE_RATE=16000\nCARTESIA_SPEED=1.0\n</code></pre> <pre><code>TTS_PROVIDER=google\nGOOGLE_CLOUD_TTS_CREDENTIALS=/path/to/credentials.json\nGOOGLE_CLOUD_TTS_VOICE_NAME=en-US-Neural2-C\nGOOGLE_CLOUD_TTS_LANGUAGE=en-US\n</code></pre> <pre><code>TTS_PROVIDER=ai4bharat\nTTS_SERVICE_URL=http://ai4bharat_tts_server:8002\nTTS_LANGUAGE=hi\nTTS_SPEAKER=female\nTTS_SAMPLE_RATE=16000\nTTS_SPEED=1.0\n</code></pre>"},{"location":"deployment/environment/#backend-integration","title":"Backend Integration","text":"<pre><code># Backend API Connection\nBACKEND_API_URL=http://backend:8000    # Docker\n# BACKEND_API_URL=http://localhost:8000 # Local dev\nBACKEND_API_TIMEOUT=30\n\n# Session Management\nSESSION_TIMEOUT_MINUTES=30\nMAX_CONCURRENT_CALLS=100\nENABLE_CALL_RECORDING=true\nENABLE_TRANSCRIPT_LOGGING=true\n</code></pre>"},{"location":"deployment/environment/#server-configuration","title":"Server Configuration","text":"<pre><code># Server\nHOST=0.0.0.0\nPORT=7860\nWORKERS=4\n\n# Audio\nAUDIO_SAMPLE_RATE=16000\nAUDIO_CHANNELS=1\nAUDIO_FORMAT=pcm\nAUDIO_CHUNK_SIZE=2048\n</code></pre>"},{"location":"deployment/environment/#logging-debugging","title":"Logging &amp; Debugging","text":"<pre><code># Logging\nLOG_LEVEL=INFO                   # DEBUG, INFO, WARNING, ERROR\nLOG_FILE=/var/log/voicera/voice_server.log\nDEBUG_MODE=false                 # Enable verbose logging\nENABLE_AUDIO_LOGGING=false       # Log audio streams (CPU intensive!)\n</code></pre>"},{"location":"deployment/environment/#frontend-environment","title":"Frontend Environment","text":""},{"location":"deployment/environment/#file-voicera_frontendenvlocal","title":"File: <code>voicera_frontend/.env.local</code>","text":""},{"location":"deployment/environment/#api-configuration_1","title":"API Configuration","text":"<pre><code># Backend API\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\nNEXT_PUBLIC_API_TIMEOUT=30000              # Milliseconds\n\n# Voice Server WebSocket\nNEXT_PUBLIC_VOICE_SERVER_URL=http://localhost:7860\nNEXT_PUBLIC_WS_URL=ws://localhost:7860\nNEXT_PUBLIC_WS_TIMEOUT=30000\n</code></pre>"},{"location":"deployment/environment/#authentication","title":"Authentication","text":"<pre><code># Authentication Settings\nNEXT_PUBLIC_AUTH_ENABLED=true\nNEXT_PUBLIC_JWT_STORAGE_KEY=voicera_token\nNEXT_PUBLIC_AUTH_REDIRECT_URL=/dashboard\nNEXT_PUBLIC_LOGIN_URL=/login\n</code></pre>"},{"location":"deployment/environment/#application-configuration","title":"Application Configuration","text":"<pre><code># App Info\nNEXT_PUBLIC_APP_NAME=VoiceERA\nNEXT_PUBLIC_APP_VERSION=1.0.0\nNEXT_PUBLIC_APP_ENVIRONMENT=development  # development, staging, production\n\n# Logging\nNEXT_PUBLIC_LOG_LEVEL=info                # debug, info, warn, error\nNEXT_PUBLIC_SENTRY_DSN=\nNEXT_PUBLIC_DEBUG=false\n</code></pre>"},{"location":"deployment/environment/#analytics-tracking","title":"Analytics &amp; Tracking","text":"<pre><code># Analytics\nNEXT_PUBLIC_ANALYTICS_ENABLED=false\nNEXT_PUBLIC_GA_TRACKING_ID=              # Google Analytics ID\nNEXT_PUBLIC_MIXPANEL_TOKEN=              # Mixpanel token\n\n# Feature Flags\nNEXT_PUBLIC_FEATURE_VOICE_CALLS=true\nNEXT_PUBLIC_FEATURE_ANALYTICS=true\nNEXT_PUBLIC_FEATURE_RECORDINGS=true\n</code></pre>"},{"location":"deployment/environment/#ui-configuration","title":"UI Configuration","text":"<pre><code># UI Preferences\nNEXT_PUBLIC_THEME=light                  # light, dark, auto\nNEXT_PUBLIC_ANIMATIONS_ENABLED=true\nNEXT_PUBLIC_RECORDS_PER_PAGE=25\n</code></pre>"},{"location":"deployment/environment/#ai4bharat-services","title":"AI4Bharat Services","text":""},{"location":"deployment/environment/#file-ai4bharat_stt_serverenv","title":"File: <code>ai4bharat_stt_server/.env</code>","text":"<pre><code># Server\nHOST=0.0.0.0\nPORT=8001\nWORKERS=4\n\n# Model Configuration\nMODEL_NAME=indic-conformer-hi\nMODEL_PATH=/models\nDEVICE=cuda                    # cuda or cpu\nBATCH_SIZE=32\n\n# Audio\nSAMPLE_RATE=16000\nAUDIO_FORMAT=wav\n\n# Logging\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"deployment/environment/#file-ai4bharat_tts_serverenv","title":"File: <code>ai4bharat_tts_server/.env</code>","text":"<pre><code># Server\nHOST=0.0.0.0\nPORT=8002\nWORKERS=2\n\n# Model Configuration\nMODEL_NAME=indic-parler-hi\nMODEL_PATH=/models\nDEVICE=cuda                    # cuda or cpu\n\n# Audio\nSAMPLE_RATE=16000\nAUDIO_FORMAT=wav\nSPEED=1.0\n\n# Caching\nENABLE_CACHING=true\nCACHE_SIZE_MB=500\nCACHE_TTL_HOURS=24\n\n# Logging\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"deployment/environment/#security-secrets","title":"Security &amp; Secrets","text":""},{"location":"deployment/environment/#secret-management-best-practices","title":"Secret Management Best Practices","text":"<pre><code># Never commit secrets\necho \".env\" &gt;&gt; .gitignore\necho \".env.prod\" &gt;&gt; .gitignore\necho \"secrets/\" &gt;&gt; .gitignore\n\n# Store secrets in environment variables\nexport MONGODB_PASSWORD=$(aws secretsmanager get-secret-value --secret-id prod/mongodb/password)\nexport JWT_SECRET_KEY=$(aws secretsmanager get-secret-value --secret-id prod/jwt-secret)\n\n# Or use a secrets management tool\n# HashiCorp Vault, AWS Secrets Manager, GCP Secret Manager\n</code></pre>"},{"location":"deployment/environment/#secret-rotation","title":"Secret Rotation","text":"<pre><code># Rotate JWT secret\n# 1. Generate new secret\nNEW_SECRET=$(openssl rand -hex 32)\n\n# 2. Update in environment\nJWT_SECRET_KEY=$NEW_SECRET\n\n# 3. Rotate tokens after grace period\n# 4. Monitor for authentication failures\n</code></pre>"},{"location":"deployment/environment/#environment-by-stage","title":"Environment by Stage","text":"<p>Development: <pre><code>DEBUG=true\nLOG_LEVEL=DEBUG\nMONGODB_SECURE=false\nMINIO_SECURE=false\nJWT_EXPIRATION_HOURS=24\n</code></pre></p> <p>Staging: <pre><code>DEBUG=false\nLOG_LEVEL=INFO\nMONGODB_SECURE=true\nMINIO_SECURE=true\nJWT_EXPIRATION_HOURS=12\n</code></pre></p> <p>Production: <pre><code>DEBUG=false\nLOG_LEVEL=WARNING\nMONGODB_SECURE=true\nMINIO_SECURE=true\nJWT_EXPIRATION_HOURS=1\nSESSION_TIMEOUT_MINUTES=15\n</code></pre></p>"},{"location":"deployment/environment/#validation-checklist","title":"Validation Checklist","text":"<ul> <li>[ ] All required variables set</li> <li>[ ] No secrets in .env.example</li> <li>[ ] API keys rotated regularly</li> <li>[ ] Passwords meet security requirements (16+ chars, mixed case, numbers, symbols)</li> <li>[ ] URLs use HTTPS in production</li> <li>[ ] Timeout values are reasonable</li> <li>[ ] Rate limits are set appropriately</li> <li>[ ] Logging doesn't expose sensitive data</li> </ul>"},{"location":"deployment/environment/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Detailed configuration</li> <li>Quick Start - Get running</li> <li>Production Deployment - Production setup</li> </ul>"},{"location":"deployment/production/","title":"Production Deployment","text":"<p>Guidelines and best practices for deploying VoiceERA to production.</p>"},{"location":"deployment/production/#pre-deployment-checklist","title":"Pre-Deployment Checklist","text":"<ul> <li>[ ] All environment variables configured securely</li> <li>[ ] Database backups configured</li> <li>[ ] SSL/TLS certificates obtained</li> <li>[ ] Load balancer configured</li> <li>[ ] Monitoring and logging setup</li> <li>[ ] Security scanning completed</li> <li>[ ] Performance testing passed</li> <li>[ ] Disaster recovery plan documented</li> </ul>"},{"location":"deployment/production/#infrastructure-requirements","title":"Infrastructure Requirements","text":""},{"location":"deployment/production/#minimum-production-setup","title":"Minimum Production Setup","text":"<ul> <li>CPU: 4 cores</li> <li>RAM: 16GB</li> <li>Disk: 200GB (SSD preferred)</li> <li>Network: 100 Mbps bandwidth</li> </ul>"},{"location":"deployment/production/#recommended-production-setup","title":"Recommended Production Setup","text":"<ul> <li>CPU: 8+ cores</li> <li>RAM: 32GB+</li> <li>Disk: 500GB+ SSD (for call recordings)</li> <li>GPU: NVIDIA GPU (for AI4Bharat services)</li> <li>Network: 1 Gbps bandwidth</li> </ul>"},{"location":"deployment/production/#deployment-architecture","title":"Deployment Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                Internet                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502 SSL/TLS     \u2502\n              \u2502 Termination \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502 Load         \u2502\n              \u2502 Balancer     \u2502\n              \u2502 (Nginx/HAProxy)\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u25bc           \u25bc           \u25bc\n    Backend 1  Backend 2  Backend 3\n    :8000      :8000      :8000\n         \u2502           \u2502           \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502 MongoDB     \u2502\n              \u2502 Replica Set \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nVoice Servers (Separate cluster):\n    Voice 1 (:7860)\n    Voice 2 (:7860)\n    Voice 3 (:7860)\n         \u2502\n         \u25bc\n    Backend (Shared)\n</code></pre>"},{"location":"deployment/production/#ssltls-configuration","title":"SSL/TLS Configuration","text":""},{"location":"deployment/production/#obtain-certificates","title":"Obtain Certificates","text":"<pre><code># Using Let's Encrypt with Certbot\nsudo certbot certonly --standalone -d yourdomain.com -d api.yourdomain.com\n\n# Certificates saved to:\n# /etc/letsencrypt/live/yourdomain.com/\n</code></pre>"},{"location":"deployment/production/#nginx-configuration","title":"Nginx Configuration","text":"<pre><code># /etc/nginx/sites-enabled/voicera.conf\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name yourdomain.com api.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\n# HTTPS - Frontend\nserver {\n    listen 443 ssl http2;\n    server_name yourdomain.com;\n\n    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;\n\n    # SSL configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    location / {\n        proxy_pass http://frontend:3000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n\n# HTTPS - Backend API\nserver {\n    listen 443 ssl http2;\n    server_name api.yourdomain.com;\n\n    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;\n\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers on;\n\n    # Rate limiting\n    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/s;\n    limit_req zone=api_limit burst=200;\n\n    location / {\n        proxy_pass http://backend:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # WebSocket support\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n\n# Voice Server WebSocket\nupstream voice_servers {\n    least_conn;\n    server voice-server-1:7860;\n    server voice-server-2:7860;\n    server voice-server-3:7860;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name voice.yourdomain.com;\n\n    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;\n\n    location / {\n        proxy_pass http://voice_servers;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n</code></pre>"},{"location":"deployment/production/#database-configuration","title":"Database Configuration","text":""},{"location":"deployment/production/#mongodb-production-setup","title":"MongoDB Production Setup","text":"<pre><code># docker-compose.prod.yml\nmongodb:\n  image: mongo:6.0\n  command: mongod --replSet rs0 --bind_ip_all\n  environment:\n    MONGO_INITDB_ROOT_USERNAME: ${MONGO_ADMIN_USER}\n    MONGO_INITDB_ROOT_PASSWORD: ${MONGO_ADMIN_PASSWORD}\n  volumes:\n    - mongodb_prod_data:/data/db\n    - mongodb_prod_config:/data/configdb\n  networks:\n    - voicera_network\n  restart: always\n  healthcheck:\n    test: [\"CMD\", \"mongosh\", \"--eval\", \"db.adminCommand('ping')\"]\n    interval: 10s\n    timeout: 5s\n    retries: 5\n</code></pre>"},{"location":"deployment/production/#mongodb-replica-set-initialization","title":"MongoDB Replica Set Initialization","text":"<pre><code># Initialize replica set\ndocker-compose exec mongodb mongosh --username $MONGO_ADMIN_USER --password $MONGO_ADMIN_PASSWORD\n\n# In mongosh:\nrs.initiate({\n  _id: \"rs0\",\n  members: [\n    { _id: 0, host: \"mongodb:27017\" }\n  ]\n})\n</code></pre>"},{"location":"deployment/production/#backup-strategy","title":"Backup Strategy","text":"<pre><code>#!/bin/bash\n# Daily MongoDB backup script\n\nBACKUP_DIR=/backups/mongodb\nDATE=$(date +%Y%m%d_%H%M%S)\n\n# Create backup\ndocker-compose exec mongodb mongodump \\\n  --username $MONGO_ADMIN_USER \\\n  --password $MONGO_ADMIN_PASSWORD \\\n  --out $BACKUP_DIR/backup_$DATE\n\n# Upload to S3\naws s3 cp $BACKUP_DIR/backup_$DATE s3://voicera-backups/\n\n# Keep only last 30 days\nfind $BACKUP_DIR -type d -mtime +30 -exec rm -rf {} \\;\n</code></pre>"},{"location":"deployment/production/#monitoring-observability","title":"Monitoring &amp; Observability","text":""},{"location":"deployment/production/#prometheus-configuration","title":"Prometheus Configuration","text":"<pre><code># prometheus.yml\nglobal:\n  scrape_interval: 15s\n  evaluation_interval: 15s\n\nscrape_configs:\n  - job_name: 'voicera-backend'\n    static_configs:\n      - targets: ['backend:8000']\n    metrics_path: '/metrics'\n\n  - job_name: 'voicera-voice-server'\n    static_configs:\n      - targets: ['voice_server:7860']\n    metrics_path: '/metrics'\n\n  - job_name: 'mongodb'\n    static_configs:\n      - targets: ['mongodb:27017']\n</code></pre>"},{"location":"deployment/production/#grafana-dashboards","title":"Grafana Dashboards","text":"<p>Key dashboards to create:</p> <ul> <li>System Health: CPU, Memory, Disk usage</li> <li>API Metrics: Request rate, response time, errors</li> <li>Voice Metrics: Active calls, call duration, success rate</li> <li>Database: Connection pool, query latency, document count</li> </ul>"},{"location":"deployment/production/#log-aggregation-elk-stack","title":"Log Aggregation (ELK Stack)","text":"<pre><code># docker-compose.prod.yml additions\nelasticsearch:\n  image: docker.elastic.co/elasticsearch/elasticsearch:8.0.0\n  environment:\n    - discovery.type=single-node\n    - xpack.security.enabled=false\n\nlogstash:\n  image: docker.elastic.co/logstash/logstash:8.0.0\n  volumes:\n    - ./logstash.conf:/usr/share/logstash/pipeline/logstash.conf\n\nkibana:\n  image: docker.elastic.co/kibana/kibana:8.0.0\n  ports:\n    - \"5601:5601\"\n</code></pre>"},{"location":"deployment/production/#security-hardening","title":"Security Hardening","text":""},{"location":"deployment/production/#firewall-rules","title":"Firewall Rules","text":"<pre><code># UFW (Ubuntu)\nsudo ufw default deny incoming\nsudo ufw default allow outgoing\n\n# Allow SSH\nsudo ufw allow 22/tcp\n\n# Allow HTTP/HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Allow specific internal services\nsudo ufw allow from 10.0.0.0/8 to any port 27017\n\n# Enable firewall\nsudo ufw enable\n</code></pre>"},{"location":"deployment/production/#secrets-management","title":"Secrets Management","text":"<pre><code># Never commit secrets to git\n.env.prod\nsecrets/\n*.key\n\n# Use environment variables or secret management tool\n# Example: HashiCorp Vault\n\n# Access secret\ncurl -H \"X-Vault-Token: $VAULT_TOKEN\" \\\n  https://vault.example.com/v1/secret/data/voicera\n</code></pre>"},{"location":"deployment/production/#database-security","title":"Database Security","text":"<pre><code># Create restricted user\ndb.createUser({\n  user: \"backend_user\",\n  pwd: \"strong_password_here\",\n  roles: [\n    { role: \"readWrite\", db: \"voicera\" }\n  ]\n})\n\n# Create read-only user\ndb.createUser({\n  user: \"analytics_user\",\n  pwd: \"analytics_password\",\n  roles: [\n    { role: \"read\", db: \"voicera\" }\n  ]\n})\n</code></pre>"},{"location":"deployment/production/#performance-tuning","title":"Performance Tuning","text":""},{"location":"deployment/production/#backend-configuration","title":"Backend Configuration","text":"<pre><code># voicera_backend environment\nMONGODB_MAX_POOL_SIZE=50\nMONGODB_TIMEOUT_MS=10000\nAPI_WORKER_COUNT=8\nAPI_WORKER_CLASS=uvicorn.workers.UvicornWorker\n</code></pre>"},{"location":"deployment/production/#voice-server-optimization","title":"Voice Server Optimization","text":"<pre><code># voice_2_voice_server environment\nMAX_CONCURRENT_CALLS=100\nAUDIO_BUFFER_SIZE=32768\nSTT_BATCH_SIZE=32\nSESSION_TIMEOUT_MINUTES=60\n</code></pre>"},{"location":"deployment/production/#database-indexes","title":"Database Indexes","text":"<pre><code>// Ensure critical indexes exist\ndb.agents.createIndex({ user_id: 1 })\ndb.campaigns.createIndex({ agent_id: 1, status: 1 })\ndb.call_logs.createIndex({ campaign_id: 1, created_at: -1 })\ndb.call_logs.createIndex({ phone_number: 1 })\ndb.call_logs.createIndex({ status: 1, created_at: -1 })\n</code></pre>"},{"location":"deployment/production/#disaster-recovery","title":"Disaster Recovery","text":""},{"location":"deployment/production/#backup-strategy_1","title":"Backup Strategy","text":"<ol> <li>Daily backups - Automated MongoDB dumps</li> <li>Hourly snapshots - EBS volume snapshots (AWS)</li> <li>Geographic replication - Multi-region backup</li> <li>Point-in-time recovery - Binary log retention</li> </ol>"},{"location":"deployment/production/#failover-configuration","title":"Failover Configuration","text":"<pre><code># Use managed services for auto-failover\n# AWS RDS for MongoDB Atlas\n# Google Cloud MongoDB\n# Or Kubernetes with StatefulSets for self-managed\n</code></pre>"},{"location":"deployment/production/#rolling-deployments","title":"Rolling Deployments","text":""},{"location":"deployment/production/#zero-downtime-updates","title":"Zero-Downtime Updates","text":"<pre><code>#!/bin/bash\n# Rolling deployment script\n\nset -e\n\n# Backend rolling update\ndocker-compose up -d \\\n  --no-deps \\\n  --build \\\n  --remove-orphans \\\n  backend\n\n# Wait for health check\nsleep 30\ncurl -f http://backend:8000/health || exit 1\n\n# Update frontend\ndocker-compose up -d \\\n  --no-deps \\\n  --build \\\n  frontend\n\n# Update voice server (requires client reconnection)\n# Can be done during low-traffic period\ndocker-compose up -d \\\n  --no-deps \\\n  --build \\\n  voice_server\n</code></pre>"},{"location":"deployment/production/#monitoring-checklist","title":"Monitoring Checklist","text":"<ul> <li>[ ] Uptime monitoring (e.g., Pingdom, Datadog)</li> <li>[ ] Error tracking (e.g., Sentry)</li> <li>[ ] Performance monitoring (e.g., New Relic)</li> <li>[ ] Security scanning (e.g., Snyk)</li> <li>[ ] Log aggregation (e.g., ELK, Splunk)</li> <li>[ ] Alerting configured (PagerDuty, OpsGenie)</li> </ul>"},{"location":"deployment/production/#next-steps","title":"Next Steps","text":"<ul> <li>Environment Variables - Production configuration</li> <li>Docker Deployment - Container deployment</li> <li>Quick Start - Development setup</li> </ul>"},{"location":"development/contributing/","title":"Contributing to VoiceERA","text":"<p>Guidelines for contributing to VoiceERA.</p>"},{"location":"development/contributing/#code-of-conduct","title":"Code of Conduct","text":"<ul> <li>Be respectful and inclusive</li> <li>No harassment or discrimination</li> <li>Provide constructive feedback</li> <li>Help others learn and improve</li> </ul>"},{"location":"development/contributing/#getting-started","title":"Getting Started","text":"<ol> <li> <p>Fork the repository <pre><code># Go to https://github.com/voicera/voicera_mono_repository\n# Click \"Fork\"\n</code></pre></p> </li> <li> <p>Clone your fork <pre><code>git clone https://github.com/your-username/voicera_mono_repository.git\ncd voicera_mono_repository\n</code></pre></p> </li> <li> <p>Set up development environment <pre><code># See Local Development Setup\n</code></pre></p> </li> <li> <p>Create a branch <pre><code>git checkout -b feature/your-feature\n</code></pre></p> </li> </ol>"},{"location":"development/contributing/#development-process","title":"Development Process","text":""},{"location":"development/contributing/#1-before-you-start","title":"1. Before You Start","text":"<ul> <li>Check Issues for existing work</li> <li>Create an issue for new features</li> <li>Discuss major changes in issues first</li> <li>Follow the Roadmap for planned features</li> </ul>"},{"location":"development/contributing/#2-code-style","title":"2. Code Style","text":""},{"location":"development/contributing/#python","title":"Python","text":"<pre><code># Follow PEP 8\n# Use type hints\ndef calculate_statistics(\n    call_logs: list[CallLog],\n    filter_date: datetime\n) -&gt; dict[str, float]:\n    \"\"\"Calculate statistics from call logs.\n\n    Args:\n        call_logs: List of call logs to analyze\n        filter_date: Date filter for logs\n\n    Returns:\n        Dictionary with statistics\n    \"\"\"\n    total_calls = len(call_logs)\n    return {\"total\": total_calls}\n\n# Use meaningful names\nagent_name = \"Customer Support Bot\"  # Good\nx = \"Customer Support Bot\"  # Bad\n\n# Add docstrings to all functions\n</code></pre> <p>Format with: <pre><code>pip install black isort\nblack .\nisort .\n</code></pre></p>"},{"location":"development/contributing/#javascripttypescript","title":"JavaScript/TypeScript","text":"<pre><code>// Use TypeScript for type safety\ninterface Agent {\n  id: string;\n  name: string;\n  config: AgentConfig;\n}\n\n// Use const and let, not var\nconst agentName = \"Support Bot\";\n\n// Use arrow functions\nconst processCall = async (callId: string): Promise&lt;CallResult&gt; =&gt; {\n  // ...\n};\n\n// Add JSDoc comments\n/**\n * Get agent details\n * @param agentId - The agent ID\n * @returns Agent details\n */\nexport const getAgent = async (agentId: string): Promise&lt;Agent&gt; =&gt; {\n  // ...\n};\n</code></pre> <p>Format with: <pre><code>npm run format\nnpm run lint\n</code></pre></p>"},{"location":"development/contributing/#3-commit-messages","title":"3. Commit Messages","text":"<p>Follow conventional commits:</p> <pre><code>type(scope): subject\n\nbody\n\nfooter\n</code></pre> <p>Types: <code>feat</code>, <code>fix</code>, <code>docs</code>, <code>style</code>, <code>refactor</code>, <code>test</code>, <code>chore</code></p> <p>Examples:</p> <pre><code>feat(agent): Add agent cloning functionality\nfix(api): Return correct status code for 404 responses\ndocs(readme): Update installation instructions\ntest(backend): Add tests for auth service\nchore(deps): Update dependencies\n</code></pre>"},{"location":"development/contributing/#4-testing","title":"4. Testing","text":"<p>Write tests for all code:</p> <pre><code># Backend\ncd voicera_backend\npytest\n\n# Frontend\ncd voicera_frontend\nnpm test\n</code></pre>"},{"location":"development/contributing/#test-coverage","title":"Test Coverage","text":"<ul> <li>Unit tests for functions/components</li> <li>Integration tests for APIs</li> <li>E2E tests for critical flows</li> </ul> <p>Example test:</p> <pre><code># tests/test_agent_service.py\ndef test_create_agent():\n    \"\"\"Test agent creation\"\"\"\n    service = AgentService()\n    agent = service.create_agent(\n        name=\"Test Agent\",\n        llm_provider=\"openai\"\n    )\n\n    assert agent.name == \"Test Agent\"\n    assert agent.llm_provider == \"openai\"\n</code></pre>"},{"location":"development/contributing/#5-documentation","title":"5. Documentation","text":"<p>Update docs for all changes:</p> <pre><code># Create feature docs\ntouch docs/features/your-feature.md\n</code></pre> <p>Docs should include: - What it does - How to use it - Code examples - Configuration options - Troubleshooting</p>"},{"location":"development/contributing/#6-pull-request","title":"6. Pull Request","text":""},{"location":"development/contributing/#create-pr","title":"Create PR","text":"<pre><code>git push origin feature/your-feature\n# Go to https://github.com/voicera/voicera_mono_repository/pull/new/feature/your-feature\n</code></pre>"},{"location":"development/contributing/#pr-template","title":"PR Template","text":"<pre><code>## Description\nBrief description of changes\n\n## Type of Change\n- [ ] Bug fix\n- [ ] New feature\n- [ ] Breaking change\n- [ ] Documentation\n\n## Changes\n- Change 1\n- Change 2\n\n## Testing\n- [ ] Tested locally\n- [ ] Added/updated tests\n- [ ] Tests pass\n\n## Checklist\n- [ ] Code follows style guide\n- [ ] Documentation updated\n- [ ] No new warnings\n- [ ] Ready for review\n</code></pre>"},{"location":"development/contributing/#pr-review-guidelines","title":"PR Review Guidelines","text":"<ul> <li>All PRs require at least 1 approval</li> <li>Tests must pass</li> <li>Code coverage should not decrease</li> <li>Documentation should be updated</li> </ul>"},{"location":"development/contributing/#7-code-review","title":"7. Code Review","text":"<p>When reviewing:</p> <pre><code>\u2705 Approve if:\n- Code is correct and follows style guide\n- Tests are adequate\n- Documentation is updated\n- No major issues\n\n\u26a0\ufe0f Request changes if:\n- Logic issues\n- Missing tests\n- Poor naming or style\n- Security concerns\n\n\ud83d\udcac Comment with suggestions\n</code></pre>"},{"location":"development/contributing/#architecture-decisions","title":"Architecture Decisions","text":""},{"location":"development/contributing/#adr-architecture-decision-records","title":"ADR (Architecture Decision Records)","text":"<p>Document major decisions:</p> <pre><code># ADR 001: Use Pipecat for Voice Processing\n\n## Status\nACCEPTED\n\n## Context\nNeed real-time voice processing for agent calls\n\n## Decision\nUse Pipecat framework for voice bot pipeline\n\n## Consequences\n- Benefits: Real-time, modular, extensible\n- Drawbacks: Learning curve for team\n- Mitigations: Documentation, examples, training\n</code></pre> <p>Save as: <code>docs/adr/001-use-pipecat.md</code></p>"},{"location":"development/contributing/#code-structure","title":"Code Structure","text":""},{"location":"development/contributing/#backend-structure","title":"Backend Structure","text":"<pre><code>voicera_backend/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 main.py              # App initialization\n\u2502   \u251c\u2500\u2500 config.py            # Configuration\n\u2502   \u251c\u2500\u2500 models/              # Data models\n\u2502   \u251c\u2500\u2500 routers/             # API endpoints\n\u2502   \u251c\u2500\u2500 services/            # Business logic\n\u2502   \u251c\u2500\u2500 schemas/             # Pydantic schemas\n\u2502   \u2514\u2500\u2500 utils/               # Utilities\n\u251c\u2500\u2500 tests/                   # Test files\n\u251c\u2500\u2500 requirements.txt\n\u2514\u2500\u2500 README.md\n</code></pre> <p>Guidelines: - Models: Data structures only - Schemas: API request/response - Services: Business logic - Routers: API endpoints - Utils: Shared helpers</p>"},{"location":"development/contributing/#frontend-structure","title":"Frontend Structure","text":"<pre><code>voicera_frontend/\n\u251c\u2500\u2500 app/                     # Next.js app\n\u251c\u2500\u2500 components/              # React components\n\u251c\u2500\u2500 hooks/                   # Custom hooks\n\u251c\u2500\u2500 lib/                     # Utilities\n\u251c\u2500\u2500 public/                  # Static files\n\u251c\u2500\u2500 styles/                  # CSS modules\n\u2514\u2500\u2500 __tests__/              # Tests\n</code></pre> <p>Guidelines: - Components: UI components only - Hooks: Reusable logic - Lib: API, utilities, helpers - Use TypeScript for type safety</p>"},{"location":"development/contributing/#voice-server-structure","title":"Voice Server Structure","text":"<pre><code>voice_2_voice_server/\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 server.py            # FastAPI server\n\u2502   \u251c\u2500\u2500 bot.py               # Bot logic\n\u2502   \u2514\u2500\u2500 services.py          # Service integrations\n\u251c\u2500\u2500 config/                  # Configuration\n\u251c\u2500\u2500 services/                # Service providers\n\u2502   \u251c\u2500\u2500 ai4bharat/\n\u2502   \u251c\u2500\u2500 bhashini/\n\u2502   \u2514\u2500\u2500 kenpath_llm/\n\u251c\u2500\u2500 storage/                 # Data storage\n\u2514\u2500\u2500 main.py                  # Entry point\n</code></pre>"},{"location":"development/contributing/#security","title":"Security","text":""},{"location":"development/contributing/#security-checklist","title":"Security Checklist","text":"<p>Before submitting PR:</p> <ul> <li>[ ] No hardcoded secrets</li> <li>[ ] Input validation added</li> <li>[ ] SQL injection prevention (if applicable)</li> <li>[ ] XSS prevention (for frontend)</li> <li>[ ] CSRF tokens used</li> <li>[ ] Rate limiting considered</li> <li>[ ] Error messages don't leak info</li> <li>[ ] Dependencies scanned for vulnerabilities</li> </ul>"},{"location":"development/contributing/#reporting-security-issues","title":"Reporting Security Issues","text":"<p>Don't open public issues for security vulnerabilities!</p> <p>Email: security@voicera.ai</p> <p>Include: - Description of vulnerability - Steps to reproduce - Potential impact - Suggested fix (if any)</p>"},{"location":"development/contributing/#performance-guidelines","title":"Performance Guidelines","text":""},{"location":"development/contributing/#backend","title":"Backend","text":"<pre><code># Use async/await\nasync def get_agent(agent_id: str) -&gt; Agent:\n    return await Agent.find_by_id(agent_id)\n\n# Use indexes for database queries\n# Add caching for frequently accessed data\n@cache(expire=300)  # 5 minute cache\nasync def get_agent_config(agent_id: str):\n    return await Agent.find_by_id(agent_id)\n\n# Avoid N+1 queries\nagents = await Agent.find_many().populate(\"campaigns\")\n</code></pre>"},{"location":"development/contributing/#frontend","title":"Frontend","text":"<pre><code>// Use React.memo for expensive components\nconst ExpensiveComponent = React.memo(({ data }) =&gt; {\n  return &lt;div&gt;{data}&lt;/div&gt;;\n});\n\n// Use useMemo for expensive calculations\nconst memoizedValue = useMemo(() =&gt; {\n  return expensiveCalculation(a, b);\n}, [a, b]);\n\n// Use useCallback to avoid unnecessary rerenders\nconst handleClick = useCallback(() =&gt; {\n  // ...\n}, [dependencies]);\n\n// Code split large components\nconst HeavyComponent = dynamic(() =&gt; import('./Heavy'));\n</code></pre>"},{"location":"development/contributing/#documentation-standards","title":"Documentation Standards","text":""},{"location":"development/contributing/#code-comments","title":"Code Comments","text":"<pre><code># Good: Explains WHY, not WHAT\n# We cache the agent config because it's accessed frequently\n# and rarely changes, reducing database load by ~40%\nagent_config = cache.get_or_fetch(...)\n\n# Bad: Explains what the code does (obvious from code)\n# Set agent_config variable\nagent_config = cache.get_or_fetch(...)\n</code></pre>"},{"location":"development/contributing/#readme-files","title":"README Files","text":"<p>Each service should have: - Quick description - Prerequisites - Installation steps - Configuration options - Running instructions - Troubleshooting</p>"},{"location":"development/contributing/#api-documentation","title":"API Documentation","text":"<p>Use docstrings:</p> <pre><code>@router.post(\"/agents\", response_model=Agent)\nasync def create_agent(\n    agent: AgentCreate,\n    current_user: User = Depends(get_current_user)\n) -&gt; Agent:\n    \"\"\"Create a new voice agent.\n\n    Args:\n        agent: Agent creation data\n        current_user: Current authenticated user\n\n    Returns:\n        Created agent\n\n    Raises:\n        HTTPException: If agent creation fails\n\n    Example:\n        POST /agents\n        {\n            \"name\": \"Support Bot\",\n            \"llm_provider\": \"openai\"\n        }\n    \"\"\"\n    return await AgentService.create(agent, current_user)\n</code></pre>"},{"location":"development/contributing/#running-tests","title":"Running Tests","text":"<pre><code># Backend\ncd voicera_backend\npytest                          # Run all tests\npytest tests/test_auth.py       # Run single file\npytest -v                       # Verbose output\npytest --cov=app               # With coverage\npytest -k \"test_create\"        # Run tests matching pattern\n\n# Frontend\ncd voicera_frontend\nnpm test                        # Run tests\nnpm test -- --watch            # Watch mode\nnpm test -- --coverage         # With coverage\n</code></pre>"},{"location":"development/contributing/#cicd","title":"CI/CD","text":""},{"location":"development/contributing/#github-actions","title":"GitHub Actions","text":"<p>Tests run automatically on: - Push to main branch - All pull requests - Scheduled nightly builds</p> <p>Check status in PR: \"All checks passed\" \u2705</p>"},{"location":"development/contributing/#release-process","title":"Release Process","text":""},{"location":"development/contributing/#versioning","title":"Versioning","text":"<p>Follow semantic versioning: <code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR: Breaking changes</li> <li>MINOR: New features</li> <li>PATCH: Bug fixes</li> </ul> <p>Example: <code>v1.2.3</code></p>"},{"location":"development/contributing/#creating-release","title":"Creating Release","text":"<pre><code># Update version in setup.py/package.json\n# Update CHANGELOG.md\ngit tag -a v1.2.3 -m \"Release v1.2.3\"\ngit push origin v1.2.3\n# GitHub creates release automatically\n</code></pre>"},{"location":"development/contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Questions: Open GitHub discussion</li> <li>Bugs: Report on GitHub issues</li> <li>Security: Email security@voicera.ai</li> <li>Chat: Join our Slack/Discord community</li> <li>Docs: Check documentation</li> </ul>"},{"location":"development/contributing/#useful-resources","title":"Useful Resources","text":"<ul> <li>Local Development Setup</li> <li>Architecture</li> <li>API Documentation</li> <li>Style Guide</li> <li>Roadmap</li> </ul>"},{"location":"development/contributing/#thank-you","title":"Thank You!","text":"<p>Thank you for contributing to VoiceERA! Your efforts help make this project better for everyone.</p> <p>For questions, reach out on GitHub or community channels. Happy coding! \ud83d\ude80</p>"},{"location":"development/local-setup/","title":"Local Development Setup","text":"<p>Complete guide for setting up VoiceERA for local development.</p>"},{"location":"development/local-setup/#development-environment","title":"Development Environment","text":""},{"location":"development/local-setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>Node.js 18+</li> <li>Docker &amp; Docker Compose</li> <li>Git</li> <li>Text editor or IDE (VS Code, PyCharm, etc.)</li> </ul>"},{"location":"development/local-setup/#frontend-development","title":"Frontend Development","text":""},{"location":"development/local-setup/#setup","title":"Setup","text":"<pre><code>cd voicera_frontend\n\n# Install dependencies\nnpm install\n\n# Create development environment\ncp .env.example .env.local\n\n# Edit configuration\nnano .env.local\n</code></pre>"},{"location":"development/local-setup/#environment-configuration","title":"Environment Configuration","text":"<pre><code># .env.local\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\nNEXT_PUBLIC_VOICE_SERVER_URL=http://localhost:7860\nNEXT_PUBLIC_WS_URL=ws://localhost:7860\nNEXT_PUBLIC_LOG_LEVEL=debug\nNEXT_PUBLIC_DEBUG=true\n</code></pre>"},{"location":"development/local-setup/#running-dev-server","title":"Running Dev Server","text":"<pre><code>npm run dev\n\n# Open http://localhost:3000\n</code></pre>"},{"location":"development/local-setup/#hot-reload","title":"Hot Reload","text":"<p>Changes to files automatically reload the browser. If not:</p> <pre><code># Hard restart\nnpm run dev -- --turbo  # With Turbopack for faster builds\n</code></pre>"},{"location":"development/local-setup/#building-for-production","title":"Building for Production","text":"<pre><code>npm run build\nnpm start  # Test production build\n</code></pre>"},{"location":"development/local-setup/#backend-development","title":"Backend Development","text":""},{"location":"development/local-setup/#setup_1","title":"Setup","text":"<pre><code>cd voicera_backend\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create development environment\ncp env.example .env\n\n# Edit configuration\nnano .env\n</code></pre>"},{"location":"development/local-setup/#environment-configuration_1","title":"Environment Configuration","text":"<pre><code># .env for development\nDEBUG=true\nLOG_LEVEL=DEBUG\nRELOAD=true\n\n# Database\nMONGODB_HOST=localhost\nMONGODB_PORT=27017\n\n# JWT\nJWT_SECRET_KEY=dev-secret-key-change-in-production\n\n# API\nCORS_ORIGINS=[\"http://localhost:3000\"]\n</code></pre>"},{"location":"development/local-setup/#start-database-docker","title":"Start Database (Docker)","text":"<pre><code># From repo root\ndocker-compose up -d mongodb minio\n\n# Wait for healthy status\ndocker-compose ps\n</code></pre>"},{"location":"development/local-setup/#running-dev-server_1","title":"Running Dev Server","text":"<pre><code># With auto-reload\nuvicorn app.main:app --reload --port 8000\n\n# Open http://localhost:8000/docs (Swagger UI)\n</code></pre>"},{"location":"development/local-setup/#database-migrations-if-applicable","title":"Database Migrations (if applicable)","text":"<pre><code># Run migrations\nalembic upgrade head\n\n# Create new migration\nalembic revision --autogenerate -m \"Add new column\"\n</code></pre>"},{"location":"development/local-setup/#running-tests","title":"Running Tests","text":"<pre><code># Install test dependencies\npip install pytest pytest-asyncio\n\n# Run tests\npytest\n\n# Run with coverage\npytest --cov=app\n\n# Run specific test file\npytest tests/test_auth.py\n</code></pre>"},{"location":"development/local-setup/#voice-server-development","title":"Voice Server Development","text":""},{"location":"development/local-setup/#setup_2","title":"Setup","text":"<pre><code>cd voice_2_voice_server\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create configuration\ncp .env.example .env\n\n# Edit configuration\nnano .env\n</code></pre>"},{"location":"development/local-setup/#environment-configuration_2","title":"Environment Configuration","text":"<pre><code># .env for development\nLOG_LEVEL=DEBUG\nDEBUG_MODE=true\nENABLE_AUDIO_LOGGING=false\n\n# LLM\nLLM_PROVIDER=openai\nOPENAI_API_KEY=sk-...\n\n# STT\nSTT_PROVIDER=deepgram\nDEEPGRAM_API_KEY=...\n\n# TTS\nTTS_PROVIDER=cartesia\nCARTESIA_API_KEY=...\n\n# Backend\nBACKEND_API_URL=http://localhost:8000\n</code></pre>"},{"location":"development/local-setup/#running-dev-server_2","title":"Running Dev Server","text":"<pre><code># Start voice server\npython main.py\n\n# Should output: \n# INFO: Started server process [12345]\n# Open http://localhost:7860\n</code></pre>"},{"location":"development/local-setup/#testing-audio-processing","title":"Testing Audio Processing","text":"<pre><code># Create test script\ncat &gt; test_audio.py &lt;&lt; 'EOF'\nimport asyncio\nfrom services.ai4bharat.stt import AI4BharatSTT\n\nasync def test_stt():\n    stt = AI4BharatSTT(\"http://localhost:8001\")\n\n    # Test with audio file\n    with open(\"test_audio.wav\", \"rb\") as f:\n        audio_data = f.read()\n\n    transcript = await stt.transcribe(audio_data)\n    print(f\"Transcript: {transcript}\")\n\nasyncio.run(test_stt())\nEOF\n\n# Run test\npython test_audio.py\n</code></pre>"},{"location":"development/local-setup/#ide-setup","title":"IDE Setup","text":""},{"location":"development/local-setup/#vs-code-extensions","title":"VS Code Extensions","text":"<p>Recommended extensions:</p> <pre><code>{\n  \"recommendations\": [\n    \"ms-python.python\",\n    \"ms-python.vscode-pylance\",\n    \"ms-python.debugpy\",\n    \"esbenp.prettier-vscode\",\n    \"dbaeumer.vscode-eslint\",\n    \"GitHub.copilot\",\n    \"ms-vscode.makefile-tools\",\n    \"ms-vscode.docker\"\n  ]\n}\n</code></pre> <p>Install with: <pre><code>code --install-extension &lt;extension-id&gt;\n</code></pre></p>"},{"location":"development/local-setup/#python-debugging-vs-code","title":"Python Debugging (VS Code)","text":"<p>Create <code>.vscode/launch.json</code>:</p> <pre><code>{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Backend\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"program\": \"${workspaceFolder}/voicera_backend/app/main.py\",\n      \"console\": \"integratedTerminal\",\n      \"env\": {\n        \"PYTHONPATH\": \"${workspaceFolder}/voicera_backend\",\n        \"RELOAD\": \"true\"\n      }\n    },\n    {\n      \"name\": \"Voice Server\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"program\": \"${workspaceFolder}/voice_2_voice_server/main.py\",\n      \"console\": \"integratedTerminal\"\n    }\n  ]\n}\n</code></pre> <p>Press <code>F5</code> to start debugging.</p>"},{"location":"development/local-setup/#javascript-debugging-vs-code","title":"JavaScript Debugging (VS Code)","text":"<pre><code>{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"type\": \"node\",\n      \"request\": \"launch\",\n      \"name\": \"Next.js\",\n      \"skipFiles\": [\"&lt;node_internals&gt;/**\"],\n      \"program\": \"${workspaceFolder}/voicera_frontend/node_modules/.bin/next\",\n      \"args\": [\"dev\"],\n      \"console\": \"integratedTerminal\"\n    }\n  ]\n}\n</code></pre>"},{"location":"development/local-setup/#development-workflow","title":"Development Workflow","text":""},{"location":"development/local-setup/#1-create-feature-branch","title":"1. Create Feature Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n</code></pre>"},{"location":"development/local-setup/#2-make-changes","title":"2. Make Changes","text":"<p>Edit files in your editor with hot-reload:</p> <pre><code># Terminal 1: Frontend\ncd voicera_frontend &amp;&amp; npm run dev\n\n# Terminal 2: Backend\ncd voicera_backend &amp;&amp; uvicorn app.main:app --reload\n\n# Terminal 3: Voice Server\ncd voice_2_voice_server &amp;&amp; python main.py\n</code></pre>"},{"location":"development/local-setup/#3-test-changes","title":"3. Test Changes","text":"<pre><code># Backend tests\ncd voicera_backend &amp;&amp; pytest\n\n# Frontend tests (if added)\ncd voicera_frontend &amp;&amp; npm test\n\n# Manual testing via Swagger\ncurl http://localhost:8000/docs\n</code></pre>"},{"location":"development/local-setup/#4-commit-and-push","title":"4. Commit and Push","text":"<pre><code>git add .\ngit commit -m \"feat: Add new feature\"\ngit push origin feature/your-feature-name\n</code></pre>"},{"location":"development/local-setup/#5-create-pull-request","title":"5. Create Pull Request","text":"<p>Submit PR with: - Clear description - Tests for new features - Updated documentation</p>"},{"location":"development/local-setup/#debugging-tips","title":"Debugging Tips","text":""},{"location":"development/local-setup/#backend-debugging","title":"Backend Debugging","text":"<pre><code># Add breakpoint\nimport pdb; pdb.set_trace()\n\n# Or use VS Code debugger - set breakpoint and press F5\n</code></pre>"},{"location":"development/local-setup/#frontend-debugging","title":"Frontend Debugging","text":"<pre><code>// Open DevTools (F12)\n// Set breakpoints in Sources tab\n// Use console for debugging\nconsole.log(\"Debug info\", variable);\n</code></pre>"},{"location":"development/local-setup/#log-analysis","title":"Log Analysis","text":"<pre><code># View logs in real-time\ndocker-compose logs -f &lt;service&gt;\n\n# Filter logs\ndocker-compose logs | grep \"error\"\n\n# Save logs to file\ndocker-compose logs &gt; logs.txt\n</code></pre>"},{"location":"development/local-setup/#common-development-tasks","title":"Common Development Tasks","text":""},{"location":"development/local-setup/#add-new-database-model","title":"Add New Database Model","text":"<ol> <li>Create model in <code>voicera_backend/app/models/</code></li> <li>Add Pydantic schema</li> <li>Create MongoDB collection with indexes</li> <li>Add API endpoints in <code>routers/</code></li> </ol>"},{"location":"development/local-setup/#add-new-api-endpoint","title":"Add New API Endpoint","text":"<pre><code># voicera_backend/app/routers/new_feature.py\nfrom fastapi import APIRouter, Depends\nfrom app.models.schemas import MySchema\n\nrouter = APIRouter(prefix=\"/feature\", tags=[\"feature\"])\n\n@router.get(\"/\")\nasync def list_items():\n    \"\"\"List all items\"\"\"\n    return {\"items\": []}\n\n# In app/main.py\nfrom app.routers import new_feature\napp.include_router(new_feature.router)\n</code></pre>"},{"location":"development/local-setup/#add-frontend-component","title":"Add Frontend Component","text":"<pre><code># Create component file\ntouch voicera_frontend/components/MyComponent.tsx\n\n# Create story for Storybook (if using)\ntouch voicera_frontend/components/MyComponent.stories.tsx\n\n# Use component\nimport MyComponent from '@/components/MyComponent';\n\nexport default function Page() {\n  return &lt;MyComponent /&gt;;\n}\n</code></pre>"},{"location":"development/local-setup/#add-test","title":"Add Test","text":"<pre><code># Backend\ntouch voicera_backend/tests/test_new_feature.py\n\n# Frontend (if using Jest)\ntouch voicera_frontend/__tests__/MyComponent.test.tsx\n</code></pre>"},{"location":"development/local-setup/#performance-optimization","title":"Performance Optimization","text":""},{"location":"development/local-setup/#backend-profiling","title":"Backend Profiling","text":"<pre><code># Add to code\nimport cProfile\nimport pstats\n\nprofiler = cProfile.Profile()\nprofiler.enable()\n\n# ... your code ...\n\nprofiler.disable()\nstats = pstats.Stats(profiler)\nstats.print_stats()\n</code></pre>"},{"location":"development/local-setup/#frontend-performance","title":"Frontend Performance","text":"<pre><code># Build analysis\nnpm run build -- --analyze\n\n# Lighthouse audit\nnpm run build &amp;&amp; npm start\n# Then run Chrome Lighthouse\n</code></pre>"},{"location":"development/local-setup/#dependency-management","title":"Dependency Management","text":""},{"location":"development/local-setup/#update-dependencies","title":"Update Dependencies","text":"<pre><code># Backend\npip list --outdated\npip install --upgrade package-name\n\n# Frontend\nnpm outdated\nnpm update\n</code></pre>"},{"location":"development/local-setup/#security-checks","title":"Security Checks","text":"<pre><code># Backend\nsafety check\n\n# Frontend\nnpm audit\n</code></pre>"},{"location":"development/local-setup/#next-steps","title":"Next Steps","text":"<ul> <li>Contributing - Contribution guidelines</li> <li>Testing - Testing guide</li> <li>Quick Start - Get running</li> </ul>"},{"location":"development/testing/","title":"Testing Guide","text":"<p>Complete testing guide for VoiceERA development.</p>"},{"location":"development/testing/#testing-overview","title":"Testing Overview","text":"<p>VoiceERA uses automated testing across all services:</p> <ul> <li>Backend: Unit tests, integration tests, API tests</li> <li>Frontend: Component tests, integration tests, E2E tests</li> <li>Voice Server: Integration tests, audio processing tests</li> <li>CI/CD: All tests run automatically on PRs</li> </ul>"},{"location":"development/testing/#backend-testing","title":"Backend Testing","text":""},{"location":"development/testing/#setup","title":"Setup","text":"<pre><code>cd voicera_backend\npip install pytest pytest-asyncio pytest-cov pytest-mock\n</code></pre>"},{"location":"development/testing/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\npytest\n\n# Run specific test file\npytest tests/test_auth.py\n\n# Run specific test function\npytest tests/test_auth.py::test_login\n\n# Verbose output\npytest -v\n\n# With coverage report\npytest --cov=app\n\n# Stop on first failure\npytest -x\n\n# Run only failed tests\npytest --lf\n\n# Run tests matching pattern\npytest -k \"auth\"\n\n# Parallel testing\npytest -n auto\n</code></pre>"},{"location":"development/testing/#test-structure","title":"Test Structure","text":"<pre><code>voicera_backend/\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 conftest.py              # Shared fixtures\n\u2502   \u251c\u2500\u2500 test_auth.py             # Auth tests\n\u2502   \u251c\u2500\u2500 test_agents.py           # Agent tests\n\u2502   \u251c\u2500\u2500 test_campaigns.py        # Campaign tests\n\u2502   \u251c\u2500\u2500 test_api/\n\u2502   \u2502   \u251c\u2500\u2500 test_auth_routes.py\n\u2502   \u2502   \u251c\u2500\u2500 test_agent_routes.py\n\u2502   \u2502   \u2514\u2500\u2500 test_campaign_routes.py\n\u2502   \u251c\u2500\u2500 test_services/\n\u2502   \u2502   \u251c\u2500\u2500 test_agent_service.py\n\u2502   \u2502   \u2514\u2500\u2500 test_campaign_service.py\n\u2502   \u2514\u2500\u2500 test_models/\n\u2502       \u251c\u2500\u2500 test_schemas.py\n\u2502       \u2514\u2500\u2500 test_database.py\n</code></pre>"},{"location":"development/testing/#writing-tests","title":"Writing Tests","text":""},{"location":"development/testing/#unit-test-example","title":"Unit Test Example","text":"<pre><code># tests/test_agents.py\nimport pytest\nfrom app.models.schemas import AgentCreate\nfrom app.services.agent_service import AgentService\n\n@pytest.fixture\ndef agent_service():\n    \"\"\"Fixture for agent service\"\"\"\n    return AgentService()\n\ndef test_create_agent(agent_service):\n    \"\"\"Test agent creation\"\"\"\n    agent_data = AgentCreate(\n        name=\"Support Bot\",\n        llm_provider=\"openai\",\n        system_prompt=\"You are a helpful support agent\"\n    )\n\n    agent = agent_service.create_agent(agent_data)\n\n    assert agent.name == \"Support Bot\"\n    assert agent.llm_provider == \"openai\"\n\ndef test_get_agent(agent_service):\n    \"\"\"Test get agent\"\"\"\n    # Create agent first\n    agent_data = AgentCreate(\n        name=\"Test Agent\",\n        llm_provider=\"openai\"\n    )\n    created_agent = agent_service.create_agent(agent_data)\n\n    # Get agent\n    retrieved = agent_service.get_agent(created_agent.id)\n\n    assert retrieved.id == created_agent.id\n    assert retrieved.name == \"Test Agent\"\n</code></pre>"},{"location":"development/testing/#async-test-example","title":"Async Test Example","text":"<pre><code># tests/test_voice_server.py\nimport pytest\nfrom voice_2_voice_server.services.llm import LLMService\n\n@pytest.mark.asyncio\nasync def test_llm_response():\n    \"\"\"Test LLM response generation\"\"\"\n    service = LLMService(\"openai\")\n\n    response = await service.generate(\n        messages=[{\"role\": \"user\", \"content\": \"Hello\"}],\n        max_tokens=100\n    )\n\n    assert response.content\n    assert len(response.content) &gt; 0\n</code></pre>"},{"location":"development/testing/#mocking-example","title":"Mocking Example","text":"<pre><code># tests/test_external_services.py\nfrom unittest.mock import patch, AsyncMock\nimport pytest\n\n@pytest.mark.asyncio\nasync def test_stt_fallback():\n    \"\"\"Test STT fallback on error\"\"\"\n    with patch('services.deepgram.transcribe') as mock_stt:\n        # Mock Deepgram error\n        mock_stt.side_effect = Exception(\"API Error\")\n\n        # Should fall back to AI4Bharat\n        result = await transcribe_with_fallback(audio_data)\n\n        assert result.provider == \"ai4bharat\"\n</code></pre>"},{"location":"development/testing/#test-fixtures","title":"Test Fixtures","text":"<pre><code># tests/conftest.py\nimport pytest\nfrom app.database import get_db\nfrom app.models.user import User\n\n@pytest.fixture\ndef db():\n    \"\"\"Test database fixture\"\"\"\n    db = get_test_db()\n    yield db\n    db.cleanup()\n\n@pytest.fixture\ndef auth_headers(db):\n    \"\"\"Authentication headers for tests\"\"\"\n    user = User.create(\n        email=\"test@example.com\",\n        password=\"testpass\"\n    )\n    token = create_test_token(user)\n    return {\"Authorization\": f\"Bearer {token}\"}\n\n@pytest.fixture\ndef client(db):\n    \"\"\"FastAPI test client\"\"\"\n    from fastapi.testclient import TestClient\n    from app.main import app\n    return TestClient(app)\n</code></pre>"},{"location":"development/testing/#api-testing","title":"API Testing","text":"<pre><code># tests/test_api/test_agents.py\nfrom fastapi.testclient import TestClient\n\ndef test_list_agents(client, auth_headers):\n    \"\"\"Test list agents endpoint\"\"\"\n    response = client.get(\n        \"/agents\",\n        headers=auth_headers\n    )\n\n    assert response.status_code == 200\n    data = response.json()\n    assert \"agents\" in data\n\ndef test_create_agent(client, auth_headers):\n    \"\"\"Test create agent endpoint\"\"\"\n    response = client.post(\n        \"/agents\",\n        json={\n            \"name\": \"Support Bot\",\n            \"llm_provider\": \"openai\",\n            \"system_prompt\": \"Help users\"\n        },\n        headers=auth_headers\n    )\n\n    assert response.status_code == 201\n    data = response.json()\n    assert data[\"name\"] == \"Support Bot\"\n    assert data[\"id\"]\n\ndef test_unauthorized(client):\n    \"\"\"Test unauthorized access\"\"\"\n    response = client.get(\"/agents\")\n\n    assert response.status_code == 401\n</code></pre>"},{"location":"development/testing/#frontend-testing","title":"Frontend Testing","text":""},{"location":"development/testing/#setup_1","title":"Setup","text":"<pre><code>cd voicera_frontend\n\n# Install dependencies\nnpm install --save-dev jest @testing-library/react @testing-library/jest-dom\n</code></pre>"},{"location":"development/testing/#running-tests_1","title":"Running Tests","text":"<pre><code># Run all tests\nnpm test\n\n# Watch mode\nnpm test -- --watch\n\n# Coverage report\nnpm test -- --coverage\n\n# Run specific test\nnpm test -- auth.test.tsx\n\n# Update snapshots\nnpm test -- -u\n</code></pre>"},{"location":"development/testing/#writing-tests_1","title":"Writing Tests","text":""},{"location":"development/testing/#component-test-example","title":"Component Test Example","text":"<pre><code>// __tests__/components/AgentCard.test.tsx\nimport { render, screen } from '@testing-library/react';\nimport { AgentCard } from '@/components/AgentCard';\n\ndescribe('AgentCard', () =&gt; {\n  it('renders agent information', () =&gt; {\n    const agent = {\n      id: '123',\n      name: 'Support Bot',\n      status: 'active'\n    };\n\n    render(&lt;AgentCard agent={agent} /&gt;);\n\n    expect(screen.getByText('Support Bot')).toBeInTheDocument();\n    expect(screen.getByText('active')).toBeInTheDocument();\n  });\n\n  it('handles delete action', async () =&gt; {\n    const onDelete = jest.fn();\n    const agent = { id: '123', name: 'Bot', status: 'active' };\n\n    render(&lt;AgentCard agent={agent} onDelete={onDelete} /&gt;);\n\n    const deleteButton = screen.getByRole('button', { name: /delete/i });\n    fireEvent.click(deleteButton);\n\n    expect(onDelete).toHaveBeenCalledWith('123');\n  });\n});\n</code></pre>"},{"location":"development/testing/#hook-test-example","title":"Hook Test Example","text":"<pre><code>// __tests__/hooks/useAuth.test.ts\nimport { renderHook, act } from '@testing-library/react';\nimport { useAuth } from '@/hooks/useAuth';\n\ndescribe('useAuth', () =&gt; {\n  it('returns user after login', async () =&gt; {\n    const { result } = renderHook(() =&gt; useAuth());\n\n    await act(async () =&gt; {\n      await result.current.login('user@example.com', 'password');\n    });\n\n    expect(result.current.user).toBeDefined();\n    expect(result.current.user?.email).toBe('user@example.com');\n  });\n\n  it('clears user on logout', async () =&gt; {\n    const { result } = renderHook(() =&gt; useAuth());\n\n    await act(async () =&gt; {\n      await result.current.logout();\n    });\n\n    expect(result.current.user).toBeNull();\n  });\n});\n</code></pre>"},{"location":"development/testing/#voice-server-testing","title":"Voice Server Testing","text":""},{"location":"development/testing/#audio-processing-tests","title":"Audio Processing Tests","text":"<pre><code># voice_2_voice_server/tests/test_audio_processing.py\nimport pytest\nimport numpy as np\nfrom api.bot import VoiceBot\n\n@pytest.mark.asyncio\nasync def test_audio_frame_processing():\n    \"\"\"Test audio frame processing\"\"\"\n    bot = VoiceBot()\n\n    # Create test audio (16-bit PCM, 16kHz, mono)\n    audio_data = np.random.randint(-32768, 32767, 16000, dtype=np.int16)\n\n    result = await bot.process_audio(audio_data)\n\n    assert result is not None\n    assert hasattr(result, 'transcript')\n</code></pre>"},{"location":"development/testing/#stttts-tests","title":"STT/TTS Tests","text":"<pre><code># voice_2_voice_server/tests/test_services.py\nimport pytest\n\n@pytest.mark.asyncio\nasync def test_deepgram_stt():\n    \"\"\"Test Deepgram STT service\"\"\"\n    from services.deepgram.stt import DeepgramSTT\n\n    stt = DeepgramSTT(api_key=\"test-key\")\n\n    # Mock API response\n    with patch.object(stt, '_call_api') as mock:\n        mock.return_value = {\"transcript\": \"hello world\"}\n\n        result = await stt.transcribe(audio_data)\n\n        assert result == \"hello world\"\n\n@pytest.mark.asyncio\nasync def test_cartesia_tts():\n    \"\"\"Test Cartesia TTS service\"\"\"\n    from services.cartesia.tts import CartesiaTTS\n\n    tts = CartesiaTTS(api_key=\"test-key\")\n\n    audio = await tts.synthesize(\"Hello world\")\n\n    assert audio is not None\n    assert len(audio) &gt; 0\n</code></pre>"},{"location":"development/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"development/testing/#load-testing","title":"Load Testing","text":"<pre><code># tests/load_test.py\nimport pytest\nfrom locust import HttpUser, task\n\nclass VoiceERAUser(HttpUser):\n    \"\"\"Simulated VoiceERA user\"\"\"\n\n    @task(3)\n    def list_agents(self):\n        self.client.get(\"/agents\")\n\n    @task(1)\n    def create_agent(self):\n        self.client.post(\n            \"/agents\",\n            json={\n                \"name\": \"Load Test Bot\",\n                \"llm_provider\": \"openai\"\n            }\n        )\n</code></pre> <p>Run with: <pre><code>locust -f tests/load_test.py\n</code></pre></p>"},{"location":"development/testing/#latency-testing","title":"Latency Testing","text":"<pre><code># tests/test_latency.py\nimport pytest\nimport time\n\ndef test_agent_creation_latency():\n    \"\"\"Test agent creation latency\"\"\"\n    start = time.time()\n\n    for _ in range(100):\n        create_agent({\"name\": \"Bot\"})\n\n    duration = time.time() - start\n    avg_latency = duration / 100\n\n    # Should create agent in &lt; 100ms\n    assert avg_latency &lt; 0.1\n</code></pre>"},{"location":"development/testing/#continuous-integration","title":"Continuous Integration","text":""},{"location":"development/testing/#github-actions","title":"GitHub Actions","text":"<p>Tests run automatically on:</p> <pre><code># .github/workflows/tests.yml\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Backend tests\n        run: |\n          cd voicera_backend\n          pip install -r requirements.txt\n          pytest\n\n      - name: Frontend tests\n        run: |\n          cd voicera_frontend\n          npm install\n          npm test\n\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n</code></pre>"},{"location":"development/testing/#coverage-reports","title":"Coverage Reports","text":""},{"location":"development/testing/#generate-coverage","title":"Generate Coverage","text":"<pre><code># Backend\ncd voicera_backend\npytest --cov=app --cov-report=html\n# Open htmlcov/index.html\n\n# Frontend\ncd voicera_frontend\nnpm test -- --coverage\n# Open coverage/lcov-report/index.html\n</code></pre>"},{"location":"development/testing/#coverage-goals","title":"Coverage Goals","text":"<ul> <li>Minimum: 70% code coverage</li> <li>Target: 85% code coverage</li> <li>Critical paths: 95% coverage</li> </ul>"},{"location":"development/testing/#common-testing-issues","title":"Common Testing Issues","text":""},{"location":"development/testing/#issue-async-tests-failing","title":"Issue: Async Tests Failing","text":"<p>Solution: Use <code>@pytest.mark.asyncio</code></p> <pre><code>@pytest.mark.asyncio\nasync def test_something():\n    result = await async_function()\n    assert result\n</code></pre>"},{"location":"development/testing/#issue-database-tests-interfering","title":"Issue: Database Tests Interfering","text":"<p>Solution: Use test fixtures to isolate</p> <pre><code>@pytest.fixture(autouse=True)\ndef reset_db():\n    \"\"\"Reset database before each test\"\"\"\n    clear_test_db()\n    yield\n    clear_test_db()\n</code></pre>"},{"location":"development/testing/#issue-timeout-on-websocket-tests","title":"Issue: Timeout on WebSocket Tests","text":"<p>Solution: Increase timeout</p> <pre><code>@pytest.mark.asyncio(timeout=30)\nasync def test_websocket():\n    # ...\n</code></pre>"},{"location":"development/testing/#best-practices","title":"Best Practices","text":"<ol> <li>Write tests alongside code - Test-driven development</li> <li>Use descriptive names - <code>test_create_agent_with_valid_data</code></li> <li>One assertion per test - Keep tests focused</li> <li>Use fixtures - Reduce code duplication</li> <li>Mock external services - Don't hit real APIs</li> <li>Test edge cases - Negative cases are important</li> <li>Keep tests fast - &lt;100ms per test</li> <li>Use CI/CD - Automate test running</li> </ol>"},{"location":"development/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Contributing Guide - How to contribute</li> <li>Local Setup - Development environment</li> <li>Architecture - System design</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration Guide","text":"<p>Comprehensive guide to configuring VoiceERA services.</p>"},{"location":"getting-started/configuration/#configuration-overview","title":"Configuration Overview","text":"<p>VoiceERA uses environment variables for configuration. Each service has its own <code>.env</code> file:</p> <ul> <li><code>voicera_backend/.env</code> - Backend API configuration</li> <li><code>voice_2_voice_server/.env</code> - Voice server &amp; AI provider keys</li> <li><code>voicera_frontend/.env.local</code> - Frontend configuration</li> <li><code>ai4bharat_stt_server/.env</code> - STT service (optional)</li> <li><code>ai4bharat_tts_server/.env</code> - TTS service (optional)</li> </ul>"},{"location":"getting-started/configuration/#backend-configuration","title":"Backend Configuration","text":""},{"location":"getting-started/configuration/#file-voicera_backendenv","title":"File: <code>voicera_backend/.env</code>","text":""},{"location":"getting-started/configuration/#database-settings","title":"Database Settings","text":"<pre><code># MongoDB Connection\nMONGODB_HOST=mongodb              # Hostname (docker: 'mongodb', local: 'localhost')\nMONGODB_PORT=27017               # Default MongoDB port\nMONGODB_USER=admin               # Root username\nMONGODB_PASSWORD=admin123        # Root password\nMONGODB_DATABASE=voicera         # Database name\n\n# Connection options\nMONGODB_MAX_POOL_SIZE=50         # Connection pool size\nMONGODB_TIMEOUT_MS=5000          # Connection timeout\n</code></pre>"},{"location":"getting-started/configuration/#minio-storage","title":"MinIO Storage","text":"<pre><code># MinIO S3-Compatible Storage\nMINIO_HOST=minio                 # Hostname\nMINIO_PORT=9000                  # API port\nMINIO_ROOT_USER=minioadmin       # Root access key\nMINIO_ROOT_PASSWORD=minioadmin   # Root secret key\nMINIO_SECURE=false               # Use HTTPS (false for local)\nMINIO_REGION=us-east-1           # AWS region\n\n# Buckets\nMINIO_BUCKET_RECORDINGS=recordings        # Call recordings\nMINIO_BUCKET_TRANSCRIPTS=transcripts      # Transcripts\nMINIO_BUCKET_AGENT_CONFIGS=agent-configs # Agent configs\n</code></pre>"},{"location":"getting-started/configuration/#security","title":"Security","text":"<pre><code># JWT Authentication\nJWT_SECRET_KEY=your-secret-key-change-this        # Secret for signing tokens\nJWT_ALGORITHM=HS256                               # Signing algorithm\nJWT_EXPIRATION_HOURS=24                           # Token expiration time\n\n# CORS\nCORS_ORIGINS=[\"http://localhost:3000\",\"https://yourdomain.com\"]\n</code></pre>"},{"location":"getting-started/configuration/#api-keys-services","title":"API Keys &amp; Services","text":"<pre><code># Backend API\nAPI_TITLE=VoiceERA API\nAPI_VERSION=1.0.0\nLOG_LEVEL=INFO                   # DEBUG, INFO, WARNING, ERROR\n\n# Email (optional)\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=your-email@gmail.com\nSMTP_PASSWORD=your-app-password\nSMTP_FROM=noreply@voicera.ai\n</code></pre>"},{"location":"getting-started/configuration/#voice-server-configuration","title":"Voice Server Configuration","text":""},{"location":"getting-started/configuration/#file-voice_2_voice_serverenv","title":"File: <code>voice_2_voice_server/.env</code>","text":""},{"location":"getting-started/configuration/#vobiz-telephony","title":"Vobiz Telephony","text":"<pre><code># Vobiz API Configuration\nVOBIZ_API_BASE=https://api.vobiz.ai/api/v1\nVOBIZ_AUTH_ID=your_auth_id              # From Vobiz dashboard\nVOBIZ_AUTH_PASSWORD=your_auth_password  # From Vobiz dashboard\nVOBIZ_ENABLED=true\n</code></pre>"},{"location":"getting-started/configuration/#llm-providers","title":"LLM Providers","text":"OpenAILocal LLMOther Providers <pre><code>LLM_PROVIDER=openai\nOPENAI_API_KEY=sk-...           # Get from https://platform.openai.com/api-keys\nOPENAI_MODEL=gpt-4              # gpt-4, gpt-3.5-turbo\nOPENAI_TEMPERATURE=0.7\n</code></pre> <pre><code>LLM_PROVIDER=local\nLOCAL_LLM_API_BASE=http://localhost:8000\nLOCAL_LLM_MODEL=mistral-7b\n</code></pre> <pre><code>LLM_PROVIDER=anthropic          # or cohere, huggingface\nANTHROPIC_API_KEY=...\n</code></pre>"},{"location":"getting-started/configuration/#speech-to-text-stt-providers","title":"Speech-to-Text (STT) Providers","text":"DeepgramAI4Bharat (Local)Other Providers <pre><code>STT_PROVIDER=deepgram\nDEEPGRAM_API_KEY=...            # Get from https://console.deepgram.com\nDEEPGRAM_MODEL=nova-2\nDEEPGRAM_LANGUAGE=en\n</code></pre> <pre><code>STT_PROVIDER=ai4bharat\nSTT_SERVICE_URL=http://ai4bharat_stt_server:8001\nSTT_LANGUAGE=hi                 # Language code\n</code></pre> <pre><code>STT_PROVIDER=google             # or azure, ibm, etc.\nGOOGLE_CLOUD_STT_CREDENTIALS=./path/to/credentials.json\n</code></pre>"},{"location":"getting-started/configuration/#text-to-speech-tts-providers","title":"Text-to-Speech (TTS) Providers","text":"CartesiaAI4Bharat (Local)Other Providers <pre><code>TTS_PROVIDER=cartesia\nCARTESIA_API_KEY=...            # Get from https://console.cartesia.ai\nCARTESIA_VOICE=english_male     # Voice selection\n</code></pre> <pre><code>TTS_PROVIDER=ai4bharat\nTTS_SERVICE_URL=http://ai4bharat_tts_server:8002\nTTS_LANGUAGE=hi                 # Language code\n</code></pre> <pre><code>TTS_PROVIDER=google             # or azure, elevenlabs, etc.\nGOOGLE_CLOUD_TTS_CREDENTIALS=./path/to/credentials.json\n</code></pre>"},{"location":"getting-started/configuration/#johnaic-external-webhook-optional","title":"Johnaic / External Webhook (Optional)","text":"<p>If you expose your local <code>voice_2_voice_server</code> via Ngrok (or another tunnel), set the public URLs here so external systems can call your local server.</p> <pre><code># Example (replace with your Ngrok URL)\nJOHNAIC_SERVER_URL=\"https://abcd-12-34-56-78.ngrok-free.app\"\nJOHNAIC_WEBSOCKET_URL=\"ws://abcd-12-34-56-78.ngrok-free.app\"\n</code></pre> <p>Use <code>wss://</code> in <code>JOHNAIC_WEBSOCKET_URL</code> when Ngrok provides a secure websocket endpoint.</p> <p>See the Installation section for Ngrok setup steps and examples.</p>"},{"location":"getting-started/configuration/#backend-integration","title":"Backend Integration","text":"<pre><code># Backend API Connection\nBACKEND_API_URL=http://backend:8000      # For Docker\n# BACKEND_API_URL=http://localhost:8000   # For local dev\n\n# Session Management\nSESSION_TIMEOUT_MINUTES=30\nMAX_CONCURRENT_CALLS=10\n</code></pre>"},{"location":"getting-started/configuration/#logging-debugging","title":"Logging &amp; Debugging","text":"<pre><code>LOG_LEVEL=INFO                   # DEBUG, INFO, WARNING, ERROR\nENABLE_AUDIO_LOGGING=false       # Log audio streams (CPU intensive!)\nDEBUG_MODE=false\n</code></pre>"},{"location":"getting-started/configuration/#frontend-configuration","title":"Frontend Configuration","text":""},{"location":"getting-started/configuration/#file-voicera_frontendenvlocal","title":"File: <code>voicera_frontend/.env.local</code>","text":"<pre><code># API Configuration\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\nNEXT_PUBLIC_API_TIMEOUT=30000                # Timeout in ms\n\n# Voice Server (WebSocket)\nNEXT_PUBLIC_VOICE_SERVER_URL=http://localhost:7860\nNEXT_PUBLIC_WS_URL=ws://localhost:7860\n\n# Authentication\nNEXT_PUBLIC_AUTH_ENABLED=true\nNEXT_PUBLIC_JWT_STORAGE_KEY=voicera_token\n\n# Application\nNEXT_PUBLIC_APP_NAME=VoiceERA\nNEXT_PUBLIC_APP_VERSION=1.0.0\nNEXT_PUBLIC_LOG_LEVEL=info                  # debug, info, warn, error\n\n# Analytics (optional)\nNEXT_PUBLIC_ANALYTICS_ENABLED=false\nNEXT_PUBLIC_GA_TRACKING_ID=\n</code></pre>"},{"location":"getting-started/configuration/#ai4bharat-services-optional","title":"AI4Bharat Services (Optional)","text":""},{"location":"getting-started/configuration/#file-ai4bharat_stt_serverenv","title":"File: <code>ai4bharat_stt_server/.env</code>","text":"<pre><code># Model Configuration\nSTT_MODEL=indic-conformer-hi    # Language-specific model\nMODEL_PATH=/models              # Path to downloaded model\nDEVICE=cuda                     # cuda or cpu\nBATCH_SIZE=32\n\n# Server\nHOST=0.0.0.0\nPORT=8001\nWORKERS=4\n</code></pre>"},{"location":"getting-started/configuration/#file-ai4bharat_tts_serverenv","title":"File: <code>ai4bharat_tts_server/.env</code>","text":"<pre><code># Model Configuration\nTTS_MODEL=indic-parler-hi       # Language-specific model\nMODEL_PATH=/models              # Path to downloaded model\nDEVICE=cuda                     # cuda or cpu\n\n# Server\nHOST=0.0.0.0\nPORT=8002\nWORKERS=2\n</code></pre>"},{"location":"getting-started/configuration/#environment-variables-by-use-case","title":"Environment Variables by Use Case","text":""},{"location":"getting-started/configuration/#development-setup","title":"Development Setup","text":"<pre><code># backend/.env\nLOG_LEVEL=DEBUG\nJWT_SECRET_KEY=dev-secret-key-not-secure\nCORS_ORIGINS=[\"http://localhost:3000\",\"http://localhost:8000\"]\n\n# voice_server/.env\nLLM_PROVIDER=openai\nSTT_PROVIDER=deepgram\nTTS_PROVIDER=cartesia\nLOG_LEVEL=DEBUG\nDEBUG_MODE=true\n\n# frontend/.env.local\nNEXT_PUBLIC_LOG_LEVEL=debug\n</code></pre>"},{"location":"getting-started/configuration/#production-setup","title":"Production Setup","text":"<pre><code># backend/.env\nLOG_LEVEL=WARNING\nJWT_SECRET_KEY=&lt;generated-secure-key&gt;\nCORS_ORIGINS=[\"https://yourdomain.com\"]\nMONGODB_SECURE=true\nMINIO_SECURE=true\n\n# voice_server/.env\nLLM_PROVIDER=openai\nSTT_PROVIDER=deepgram\nTTS_PROVIDER=cartesia\nLOG_LEVEL=INFO\nDEBUG_MODE=false\nBACKEND_API_URL=https://api.yourdomain.com\n\n# frontend/.env.local\nNEXT_PUBLIC_API_BASE_URL=https://api.yourdomain.com\nNEXT_PUBLIC_VOICE_SERVER_URL=https://voice.yourdomain.com\nNEXT_PUBLIC_LOG_LEVEL=warn\n</code></pre>"},{"location":"getting-started/configuration/#testing-setup","title":"Testing Setup","text":"<pre><code># backend/.env\nMONGODB_DATABASE=voicera_test\nLOG_LEVEL=DEBUG\n\n# voice_server/.env\nMAX_CONCURRENT_CALLS=5\nSESSION_TIMEOUT_MINUTES=5\n</code></pre>"},{"location":"getting-started/configuration/#configuration-validation","title":"Configuration Validation","text":""},{"location":"getting-started/configuration/#check-backend-config","title":"Check Backend Config","text":"<pre><code># Access backend container\ndocker-compose exec backend bash\n\n# Test MongoDB connection\npython -c \"from app.database import get_db; print('\u2713 MongoDB connected')\"\n\n# Test MinIO connection\npython -c \"from app.storage import get_minio; print('\u2713 MinIO connected')\"\n</code></pre>"},{"location":"getting-started/configuration/#check-voice-server-config","title":"Check Voice Server Config","text":"<pre><code># Access voice server container\ndocker-compose exec voice_server bash\n\n# Test LLM provider\npython -c \"from api.services import get_llm_service; print('\u2713 LLM provider ready')\"\n\n# Test Backend connection\ncurl http://backend:8000/health\n</code></pre>"},{"location":"getting-started/configuration/#check-frontend-config","title":"Check Frontend Config","text":"<pre><code># Frontend configuration is embedded during build\n# Check build output for configuration summary\ndocker-compose logs frontend | grep -i config\n</code></pre>"},{"location":"getting-started/configuration/#regenerating-secrets","title":"Regenerating Secrets","text":""},{"location":"getting-started/configuration/#generate-a-new-jwt-secret","title":"Generate a new JWT secret","text":"<pre><code># Using OpenSSL\nopenssl rand -hex 32\n\n# Using Python\npython -c \"import secrets; print(secrets.token_hex(32))\"\n\n# Output: a1b2c3d4e5f6... (copy this to JWT_SECRET_KEY)\n</code></pre>"},{"location":"getting-started/configuration/#generate-minio-credentials","title":"Generate MinIO credentials","text":"<pre><code># Using OpenSSL\nopenssl rand -base64 32   # For username\nopenssl rand -base64 32   # For password\n</code></pre>"},{"location":"getting-started/configuration/#reload-configuration","title":"Reload Configuration","text":"<p>After modifying <code>.env</code> files:</p> <pre><code># Restart affected services\ndocker-compose restart backend voice_server frontend\n\n# View updated configuration in logs\ndocker-compose logs backend | head -50\n</code></pre>"},{"location":"getting-started/configuration/#troubleshooting-configuration","title":"Troubleshooting Configuration","text":""},{"location":"getting-started/configuration/#connection-refused-errors","title":"\"Connection refused\" errors","text":"<ol> <li>Check host/port in <code>.env</code> matches docker-compose.yml</li> <li>For Docker containers, use service names (not localhost)</li> <li>For local development, use localhost/127.0.0.1</li> </ol>"},{"location":"getting-started/configuration/#invalid-api-key-errors","title":"\"Invalid API key\" errors","text":"<ol> <li>Verify API key is set correctly (no extra spaces)</li> <li>Check API key is still valid on provider's dashboard</li> <li>Ensure key has correct permissions</li> </ol>"},{"location":"getting-started/configuration/#port-already-in-use","title":"\"Port already in use\"","text":"<ol> <li>Change port in docker-compose.yml AND <code>.env</code></li> <li>Example: Change <code>MINIO_PORT=9001</code> to <code>MINIO_PORT=9002</code></li> </ol>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Start services with your configuration</li> <li>Architecture Guide - Understand config impact</li> <li>Troubleshooting - Solve common issues</li> </ul>"},{"location":"getting-started/installation/","title":"Installation Guide","text":"<p>This guide will help you install and set up VoiceERA on your system.</p>"},{"location":"getting-started/installation/#system-requirements","title":"System Requirements","text":""},{"location":"getting-started/installation/#minimum-requirements","title":"Minimum Requirements","text":"<ul> <li>OS: Linux, macOS, or Windows (WSL2)</li> <li>RAM: 8GB</li> <li>Disk Space: 50GB (including Docker images)</li> <li>Docker: 20.10+</li> <li>Docker Compose: 1.29+</li> </ul>"},{"location":"getting-started/installation/#recommended-requirements","title":"Recommended Requirements","text":"<ul> <li>OS: Linux (Ubuntu 20.04 LTS or newer)</li> <li>RAM: 16GB+</li> <li>CPU Cores: 4+</li> <li>GPU: NVIDIA GPU with CUDA support (for local AI4Bharat services)</li> <li>SSD: 100GB+ NVMe SSD</li> </ul>"},{"location":"getting-started/installation/#install-prerequisites","title":"Install Prerequisites","text":""},{"location":"getting-started/installation/#docker-docker-compose","title":"Docker &amp; Docker Compose","text":"Ubuntu/DebianmacOSWindows <pre><code># Install Docker\nsudo apt-get update\nsudo apt-get install -y docker.io docker-compose\n\n# Add your user to docker group (optional, avoids sudo)\nsudo usermod -aG docker $USER\nnewgrp docker\n</code></pre> <pre><code># Using Homebrew\nbrew install docker docker-compose\n\n# Or download Docker Desktop from docker.com\n</code></pre> <ol> <li>Download Docker Desktop for Windows</li> <li>Install with WSL2 backend</li> <li>Enable WSL2 in Windows Features</li> <li>Restart your computer</li> </ol>"},{"location":"getting-started/installation/#nodejs-optional-for-local-frontend-development","title":"Node.js (Optional - for local frontend development)","text":"<pre><code># Using nvm (recommended)\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash\nnvm install 18\nnvm use 18\n\n# Or using package manager\n# Ubuntu/Debian\nsudo apt-get install nodejs npm\n\n# macOS\nbrew install node\n\n# Windows\n# Download from https://nodejs.org/\n</code></pre>"},{"location":"getting-started/installation/#python-310-optional-for-local-development","title":"Python 3.10+ (Optional - for local development)","text":"<pre><code># Ubuntu/Debian\nsudo apt-get install python3.10 python3-pip\n\n# macOS\nbrew install python@3.10\n\n# Windows\n# Download from https://python.org/\n</code></pre>"},{"location":"getting-started/installation/#make-optional-for-using-makefile","title":"Make (Optional - for using Makefile)","text":"Ubuntu/DebianmacOSWindows <pre><code>sudo apt-get install make\n</code></pre> <pre><code># Included with Xcode Command Line Tools\nxcode-select --install\n</code></pre> <pre><code># Download from https://gnuwin32.sourceforge.net/packages/make.htm\n# Or use WSL2 with Linux installation\n</code></pre>"},{"location":"getting-started/installation/#clone-the-repository","title":"Clone the Repository","text":"<pre><code># Clone the repository\ngit clone https://github.com/voicera/voicera.git\ncd voicera_mono_repository\n\n# Verify structure\nls -la  # Check for docker-compose.yml, Makefile, etc.\n</code></pre>"},{"location":"getting-started/installation/#environment-setup","title":"Environment Setup","text":""},{"location":"getting-started/installation/#1-backend-configuration","title":"1. Backend Configuration","text":"<pre><code># Copy example environment file\ncp voicera_backend/env.example voicera_backend/.env\n\n# Edit with your configuration\nnano voicera_backend/.env  # or use your preferred editor\n</code></pre> <p>Key environment variables to configure:</p> <pre><code># Database\nMONGODB_HOST=mongodb\nMONGODB_PORT=27017\nMONGODB_USER=admin\nMONGODB_PASSWORD=admin123\n\n# Storage\nMINIO_HOST=minio\nMINIO_PORT=9000\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\n\n# JWT\nJWT_SECRET_KEY=your-secret-key-here\nJWT_ALGORITHM=HS256\nJWT_EXPIRATION_HOURS=24\n</code></pre>"},{"location":"getting-started/installation/#2-voice-server-configuration","title":"2. Voice Server Configuration","text":"<pre><code># Copy example environment file\ncp voice_2_voice_server/.env.example voice_2_voice_server/.env\n\n# Edit with your API keys\nnano voice_2_voice_server/.env\n</code></pre> <p>Required API keys:</p> <pre><code># Vobiz Telephony\nVOBIZ_API_BASE=https://api.vobiz.ai/api/v1\nVOBIZ_AUTH_ID=your_auth_id\nVOBIZ_AUTH_PASSWORD=your_auth_password\n\n# LLM Provider (choose one)\nOPENAI_API_KEY=sk-...  # For OpenAI\n\n# STT Provider (choose one)\nDEEPGRAM_API_KEY=...   # For Deepgram\n\n# TTS Provider (choose one)\nCARTESIA_API_KEY=...   # For Cartesia\n</code></pre>"},{"location":"getting-started/installation/#optional-ngrok-expose-local-voice-server","title":"Optional: Ngrok (Expose Local Voice Server)","text":"<p>If you need to expose your local <code>voice_2_voice_server</code> to the public internet (for testing webhooks, external integrations or remote callbacks), you can use Ngrok to create a public URL that tunnels to your local port.</p> <pre><code># Ngrok setup:\n\n# Install pyngrok (optional helper) or the ngrok CLI\n# Python helper (optional):\npip install pyngrok\n\n# Or download the ngrok CLI from https://ngrok.com and install it\n\n# Authenticate ngrok with your token (get it from https://ngrok.com)\nngrok config add-authtoken &lt;YOUR_AUTH_TOKEN&gt;\n\n# Start your local server and forward the port (example uses 7860)\nngrok http 7860\n\n# Ngrok will print a public URL like:\n# https://abcd-12-34-56-78.ngrok-free.app\n</code></pre> <p>Copy the generated public URL and add it to your <code>voice_2_voice_server/.env</code> as follows:</p> <pre><code># Johnaic / external webhook (example)\nJOHNAIC_SERVER_URL=\"https://abcd-12-34-56-78.ngrok-free.app\"\nJOHNAIC_WEBSOCKET_URL=\"ws://abcd-12-34-56-78.ngrok-free.app\"\n</code></pre> <p>If ngrok provides a secure websocket endpoint use <code>wss://</code> for <code>JOHNAIC_WEBSOCKET_URL</code> (recommended).</p> <p>Note: Keep these URLs private; they allow external access to your local server while the tunnel is active.</p>"},{"location":"getting-started/installation/#3-frontend-configuration","title":"3. Frontend Configuration","text":"<pre><code># Copy example environment file\ncp voicera_frontend/.env.example voicera_frontend/.env.local\n\n# Edit configuration\nnano voicera_frontend/.env.local\n</code></pre> <pre><code># API Configuration\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\nNEXT_PUBLIC_VOICE_SERVER_URL=http://localhost:7860\n\n# Authentication\nNEXT_PUBLIC_AUTH_ENABLED=true\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":""},{"location":"getting-started/installation/#check-docker-installation","title":"Check Docker Installation","text":"<pre><code># Verify Docker version\ndocker --version\n# Output: Docker version 20.10.x, build ...\n\n# Verify Docker Compose\ndocker-compose --version\n# Output: Docker Compose version 1.29.x, ...\n\n# Test Docker\ndocker run hello-world\n</code></pre>"},{"location":"getting-started/installation/#check-python-installation-optional","title":"Check Python Installation (Optional)","text":"<pre><code>python3 --version\n# Output: Python 3.10.x\n</code></pre>"},{"location":"getting-started/installation/#check-nodejs-installation-optional","title":"Check Node.js Installation (Optional)","text":"<pre><code>node --version\n# Output: v18.x.x\n\nnpm --version\n# Output: 9.x.x\n</code></pre>"},{"location":"getting-started/installation/#build-docker-images","title":"Build Docker Images","text":"<pre><code># Build all services\nmake build-all-services\n\n# Or manually\ndocker-compose build\n</code></pre> <p>This will build images for: - Frontend (Next.js) - Backend (FastAPI) - Voice Server (Pipecat) - AI4Bharat STT (optional) - AI4Bharat TTS (optional)</p>"},{"location":"getting-started/installation/#verify-build","title":"Verify Build","text":"<pre><code># List Docker images\ndocker images | grep voicera\n\n# Expected output:\n# voicera_mono_repository_frontend   latest    ...\n# voicera_mono_repository_backend    latest    ...\n# voicera_mono_repository_voice_server latest ...\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ol> <li>Quick Start - Start all services and access the application</li> <li>Configuration Guide - Learn about all configuration options</li> <li>Architecture Overview - Understand the system</li> </ol>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#docker-daemon-not-running","title":"Docker daemon not running","text":"LinuxmacOSWindows <pre><code>sudo systemctl start docker\nsudo systemctl enable docker  # Auto-start on boot\n</code></pre> <p>Open Docker Desktop from Applications</p> <p>Open Docker Desktop from Start Menu</p>"},{"location":"getting-started/installation/#permission-denied-errors","title":"Permission denied errors","text":"<pre><code># Add current user to docker group\nsudo usermod -aG docker $USER\nnewgrp docker\n\n# Log out and back in for changes to take effect\n</code></pre>"},{"location":"getting-started/installation/#port-already-in-use","title":"Port already in use","text":"<pre><code># Find and kill process using port (example: 8000)\nlsof -i :8000\nkill -9 &lt;PID&gt;\n\n# Or modify port in docker-compose.yml\n</code></pre>"},{"location":"getting-started/installation/#out-of-disk-space","title":"Out of disk space","text":"<pre><code># Clean up Docker resources\ndocker system prune -a\n\n# Remove unused volumes\ndocker volume prune\n</code></pre>"},{"location":"getting-started/installation/#getting-help","title":"Getting Help","text":"<ul> <li>Check Troubleshooting Guide</li> <li>Read Docker Documentation</li> <li>Visit GitHub Discussions</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start Guide","text":"<p>Get VoiceERA up and running in 5 minutes!</p>"},{"location":"getting-started/quickstart/#prerequisites-checklist","title":"Prerequisites Checklist","text":"<p>Before starting, ensure you have completed:</p> <ul> <li>\u2705 Docker &amp; Docker Compose installed</li> <li>\u2705 Repository cloned</li> <li>\u2705 Environment files configured (<code>.env</code> files)</li> <li>\u2705 Docker images built (<code>make build-all-services</code>)</li> </ul>"},{"location":"getting-started/quickstart/#5-minute-startup","title":"5-Minute Startup","text":""},{"location":"getting-started/quickstart/#step-1-start-all-services","title":"Step 1: Start All Services","text":"<pre><code>cd voicera_mono_repository\n\n# Start all services in detached mode\nmake start-all-services\n\n# Or manually\ndocker-compose up -d\n</code></pre> <p>Monitor startup progress:</p> <pre><code># View logs\ndocker-compose logs -f\n\n# Check service health\ndocker-compose ps\n</code></pre> <p>Expected output:</p> <pre><code>NAME                COMMAND                  SERVICE             STATUS\nvoicera_backend     \"uvicorn app.main:...\"  backend             Up (healthy)\nvoicera_frontend    \"npm run dev\"           frontend            Up\nvoicera_minio       \"/usr/bin/minio serve\"  minio               Up (healthy)\nvoicera_mongodb     \"mongod --bind_ip_all\"  mongodb             Up (healthy)\nvoicera_voice_server \"python main.py\"       voice_server        Up\n</code></pre>"},{"location":"getting-started/quickstart/#step-2-wait-for-services-to-be-ready","title":"Step 2: Wait for Services to Be Ready","text":"Using Health ChecksUsing Docker LogsManual Check <pre><code># Wait for all services to be healthy\ndocker-compose ps | grep -i healthy\n</code></pre> <pre><code># Watch for startup messages\ndocker-compose logs -f backend\n\n# Look for message like:\n# \"Application startup complete\"\n</code></pre> <pre><code># Test backend\ncurl http://localhost:8000/health\n# Should return: {\"status\":\"ok\"}\n\n# Test frontend\ncurl -I http://localhost:3000\n# Should return: 200 OK\n</code></pre>"},{"location":"getting-started/quickstart/#step-3-access-the-application","title":"Step 3: Access the Application","text":"<p>Once all services are running, open your browser and navigate to:</p> Service URL Purpose Frontend http://localhost:3000 Web dashboard Backend API http://localhost:8000/docs Swagger UI documentation Backend API http://localhost:8000/redoc ReDoc documentation MinIO http://localhost:9001 Object storage console"},{"location":"getting-started/quickstart/#step-4-first-login","title":"Step 4: First Login","text":"<ol> <li>Open http://localhost:3000</li> <li>Sign up or log in with credentials:</li> <li>Email: admin@example.com</li> <li>Password: (configured in your <code>.env</code> file)</li> </ol>"},{"location":"getting-started/quickstart/#common-tasks","title":"Common Tasks","text":""},{"location":"getting-started/quickstart/#view-service-logs","title":"View Service Logs","text":"<pre><code># All services\ndocker-compose logs\n\n# Specific service\ndocker-compose logs backend\ndocker-compose logs voice_server\n\n# Real-time follow\ndocker-compose logs -f frontend\n\n# Last 100 lines\ndocker-compose logs --tail 100 backend\n</code></pre>"},{"location":"getting-started/quickstart/#stop-services","title":"Stop Services","text":"<pre><code># Stop all services (keeps data)\nmake stop-all-services\n\n# Or manually\ndocker-compose stop\n\n# Remove containers (keeps volumes/data)\ndocker-compose down\n\n# Remove containers AND volumes (wipes data!)\ndocker-compose down -v\n</code></pre>"},{"location":"getting-started/quickstart/#restart-a-service","title":"Restart a Service","text":"<pre><code># Restart specific service\ndocker-compose restart backend\n\n# Restart all services\ndocker-compose restart\n</code></pre>"},{"location":"getting-started/quickstart/#check-service-status","title":"Check Service Status","text":"<pre><code># View all containers\ndocker-compose ps\n\n# Show detailed info\ndocker inspect voicera_backend\n\n# Check resource usage\ndocker stats\n</code></pre>"},{"location":"getting-started/quickstart/#troubleshooting-quick-fixes","title":"Troubleshooting Quick Fixes","text":""},{"location":"getting-started/quickstart/#port-already-in-use","title":"\"Port already in use\"","text":"<pre><code># Find and stop the process using the port\nlsof -i :8000        # Check port 8000\nkill -9 &lt;PID&gt;        # Kill the process\n\n# Or change port in docker-compose.yml\n</code></pre>"},{"location":"getting-started/quickstart/#connection-refused","title":"\"Connection refused\"","text":"<pre><code># Services need time to start, wait a moment\nsleep 10\n\n# Check if services are running\ndocker-compose ps\n\n# View startup logs\ndocker-compose logs backend\n</code></pre>"},{"location":"getting-started/quickstart/#database-connection-error","title":"\"Database connection error\"","text":"<pre><code># MongoDB may still be initializing\ndocker-compose logs mongodb | tail -20\n\n# Restart MongoDB\ndocker-compose restart mongodb\n\n# Wait for health check\ndocker-compose ps mongodb  # Should show \"healthy\"\n</code></pre>"},{"location":"getting-started/quickstart/#out-of-memory","title":"\"Out of memory\"","text":"<pre><code># Check Docker's allocated memory\ndocker stats\n\n# Increase Docker memory allocation\n# Linux: Edit /etc/docker/daemon.json\n# macOS/Windows: Docker Desktop Settings &gt; Resources\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":""},{"location":"getting-started/quickstart/#create-your-first-agent","title":"Create Your First Agent","text":"<ol> <li>Go to http://localhost:3000</li> <li>Navigate to Agents &gt; Create Agent</li> <li>Configure:</li> <li>Name: My First Agent</li> <li>Language: English</li> <li>LLM Model: GPT-3.5 or GPT-4</li> <li>Voice: Choose a voice</li> <li>Click Create</li> </ol>"},{"location":"getting-started/quickstart/#make-a-test-call","title":"Make a Test Call","text":"<ol> <li>Go to Campaigns &gt; Create Campaign</li> <li>Configure voice settings</li> <li>Test with a phone number</li> <li>Monitor in Call Recordings</li> </ol>"},{"location":"getting-started/quickstart/#explore-the-api","title":"Explore the API","text":"<ol> <li>Open http://localhost:8000/docs (Swagger UI)</li> <li>Try out API endpoints:</li> <li><code>GET /agents</code> - List all agents</li> <li><code>GET /health</code> - Service health</li> <li><code>GET /campaigns</code> - List campaigns</li> </ol>"},{"location":"getting-started/quickstart/#development-mode","title":"Development Mode","text":"<p>For faster iteration during development, run services locally:</p> <pre><code># Start just infrastructure (DB, storage)\nmake start-backend-services\n\n# In separate terminals, start services locally:\n\n# Terminal 1: Backend\ncd voicera_backend\nsource venv/bin/activate  # or .venv\\Scripts\\activate on Windows\npython -m uvicorn app.main:app --reload --port 8000\n\n# Terminal 2: Frontend\ncd voicera_frontend\nnpm run dev\n\n# Terminal 3: Voice Server\ncd voice_2_voice_server\nsource venv/bin/activate  # or .venv\\Scripts\\activate on Windows\npython main.py\n</code></pre>"},{"location":"getting-started/quickstart/#useful-commands-reference","title":"Useful Commands Reference","text":"<pre><code># Build all images\nmake build-all-services\n\n# Start all services\nmake start-all-services\n\n# Stop all services\nmake stop-all-services\n\n# View logs\ndocker-compose logs -f\n\n# Access backend shell\ndocker-compose exec backend /bin/bash\n\n# Run backend migrations (if needed)\ndocker-compose exec backend alembic upgrade head\n\n# Seed example data\ndocker-compose exec backend python -m app.scripts.seed_data\n</code></pre>"},{"location":"getting-started/quickstart/#whats-next","title":"What's Next?","text":"<ul> <li>Configuration Guide - Customize environment variables</li> <li>Architecture Overview - Understand system design</li> <li>API Documentation - Explore REST API</li> <li>Troubleshooting - Solve common issues</li> </ul>"},{"location":"getting-started/quickstart/#getting-help","title":"Getting Help","text":"<ul> <li>\ud83d\udcd6 Full Documentation</li> <li>\ud83d\udc1b Issue Tracker</li> <li>\ud83d\udcac Discussions</li> <li>\ud83d\udce7 Support Email</li> </ul>"},{"location":"services/ai4bharat-stt/","title":"AI4Bharat STT Service","text":"<p>Documentation for the AI4Bharat Speech-to-Text (STT) service integration.</p>"},{"location":"services/ai4bharat-stt/#overview","title":"Overview","text":"<p>This optional service provides high-accuracy speech-to-text for Indic languages using AI4Bharat's IndicConformer model.</p> <p>Supported Languages: - Hindi (hi) - Tamil (ta) - Telugu (te) - Kannada (kn) - Malayalam (ml) - Bengali (bn) - Punjabi (pa) - Marathi (mr) - Gujarat (gu) - And more...</p> <p>Advantages: - Free and open-source - Optimized for Indic languages - Self-hosted (no API calls needed) - Low latency - Can run on GPU for better performance</p>"},{"location":"services/ai4bharat-stt/#quick-start","title":"Quick Start","text":""},{"location":"services/ai4bharat-stt/#installation","title":"Installation","text":"<pre><code>cd ai4bharat_stt_server\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Download models\npython download_models.py\n</code></pre>"},{"location":"services/ai4bharat-stt/#running-the-service","title":"Running the Service","text":"<pre><code># Development\npython server.py\n\n# Via Docker\ndocker build -t ai4bharat-stt .\ndocker run -p 8001:8001 ai4bharat-stt\n\n# With GPU support\ndocker run --gpus all -p 8001:8001 ai4bharat-stt\n</code></pre>"},{"location":"services/ai4bharat-stt/#configuration","title":"Configuration","text":""},{"location":"services/ai4bharat-stt/#environment-variables","title":"Environment Variables","text":"<pre><code># Server\nHOST=0.0.0.0\nPORT=8001\nWORKERS=4\n\n# Model\nMODEL_NAME=indic-conformer-hi\nMODEL_PATH=/models\nDEVICE=cuda                    # cuda or cpu\nBATCH_SIZE=32\n\n# Audio\nSAMPLE_RATE=16000\nAUDIO_FORMAT=wav\n\n# Logging\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"services/ai4bharat-stt/#api-endpoints","title":"API Endpoints","text":""},{"location":"services/ai4bharat-stt/#transcribe-streaming","title":"Transcribe (Streaming)","text":"<p>Endpoint: <code>POST /transcribe</code></p> <p>Request: <pre><code>{\n  \"audio\": \"base64-encoded-audio\",\n  \"language\": \"hi\",\n  \"format\": \"wav\"\n}\n</code></pre></p> <p>Response: <pre><code>{\n  \"transcript\": \"\u0928\u092e\u0938\u094d\u0924\u0947, \u092f\u0939 \u090f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0938\u0902\u0926\u0947\u0936 \u0939\u0948\u0964\",\n  \"confidence\": 0.98,\n  \"language\": \"hi\"\n}\n</code></pre></p>"},{"location":"services/ai4bharat-stt/#health-check","title":"Health Check","text":"<pre><code>GET /health\n</code></pre>"},{"location":"services/ai4bharat-stt/#integration-with-voiceera","title":"Integration with VoiceERA","text":""},{"location":"services/ai4bharat-stt/#configuration_1","title":"Configuration","text":"<p>In <code>voice_2_voice_server/.env</code>:</p> <pre><code>STT_PROVIDER=ai4bharat\nSTT_SERVICE_URL=http://ai4bharat_stt_server:8001\nSTT_LANGUAGE=hi\n</code></pre>"},{"location":"services/ai4bharat-stt/#usage","title":"Usage","text":"<pre><code>class AI4BharatSTT:\n    def __init__(self, service_url, language=\"hi\"):\n        self.service_url = service_url\n        self.language = language\n\n    async def transcribe(self, audio_data):\n        import base64\n        import aiohttp\n\n        async with aiohttp.ClientSession() as session:\n            response = await session.post(\n                f\"{self.service_url}/transcribe\",\n                json={\n                    \"audio\": base64.b64encode(audio_data).decode(),\n                    \"language\": self.language\n                }\n            )\n            result = await response.json()\n            return result[\"transcript\"]\n</code></pre>"},{"location":"services/ai4bharat-stt/#performance","title":"Performance","text":""},{"location":"services/ai4bharat-stt/#benchmarks","title":"Benchmarks","text":"Language Accuracy Speed GPU Required Hindi 95%+ Real-time Yes (recommended) Tamil 92%+ Real-time Yes (recommended) Telugu 93%+ Real-time Yes (recommended) Kannada 91%+ Real-time Yes (recommended)"},{"location":"services/ai4bharat-stt/#optimization-tips","title":"Optimization Tips","text":"<ul> <li>Use GPU for production deployments</li> <li>Batch audio chunks for better throughput</li> <li>Pre-download models to avoid startup delays</li> <li>Use appropriate sample rate (16kHz recommended)</li> </ul>"},{"location":"services/ai4bharat-stt/#troubleshooting","title":"Troubleshooting","text":""},{"location":"services/ai4bharat-stt/#service-wont-start","title":"Service won't start","text":"<pre><code># Check Python version\npython --version  # Should be 3.10+\n\n# Check dependencies\npip list | grep torch\n\n# Download models\npython download_models.py\n</code></pre>"},{"location":"services/ai4bharat-stt/#low-accuracy","title":"Low accuracy","text":"<ul> <li>Verify audio quality (16kHz, mono)</li> <li>Check language configuration matches audio</li> <li>Ensure model is properly downloaded</li> </ul>"},{"location":"services/ai4bharat-stt/#out-of-memory","title":"Out of memory","text":"<ul> <li>Reduce BATCH_SIZE in config</li> <li>Use CPU instead of GPU for development</li> <li>Enable model quantization for production</li> </ul>"},{"location":"services/ai4bharat-stt/#next-steps","title":"Next Steps","text":"<ul> <li>TTS Service - Text-to-Speech documentation</li> <li>Configuration - Full configuration guide</li> <li>Quick Start - Get VoiceERA running</li> </ul>"},{"location":"services/ai4bharat-tts/","title":"AI4Bharat TTS Service","text":"<p>Documentation for the AI4Bharat Text-to-Speech (TTS) service integration.</p>"},{"location":"services/ai4bharat-tts/#overview","title":"Overview","text":"<p>This optional service provides natural speech synthesis for Indic languages using AI4Bharat's IndicParler model.</p> <p>Supported Languages: - Hindi (hi) - Tamil (ta) - Telugu (te) - Kannada (kn) - Malayalam (ml) - Bengali (bn) - Punjabi (pa) - Marathi (mr) - Gujarati (gu) - And more...</p> <p>Advantages: - Free and open-source - Optimized for Indic languages - Self-hosted (no API calls needed) - Natural-sounding voices - Multiple speaker options - Can run on GPU for better performance</p>"},{"location":"services/ai4bharat-tts/#quick-start","title":"Quick Start","text":""},{"location":"services/ai4bharat-tts/#installation","title":"Installation","text":"<pre><code>cd ai4bharat_tts_server\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Download models\npython download_models.py\n</code></pre>"},{"location":"services/ai4bharat-tts/#running-the-service","title":"Running the Service","text":"<pre><code># Development\npython server.py\n\n# Via Docker\ndocker build -t ai4bharat-tts .\ndocker run -p 8002:8002 ai4bharat-tts\n\n# With GPU support\ndocker run --gpus all -p 8002:8002 ai4bharat-tts\n</code></pre>"},{"location":"services/ai4bharat-tts/#configuration","title":"Configuration","text":""},{"location":"services/ai4bharat-tts/#environment-variables","title":"Environment Variables","text":"<pre><code># Server\nHOST=0.0.0.0\nPORT=8002\nWORKERS=2\n\n# Model\nMODEL_NAME=indic-parler-hi\nMODEL_PATH=/models\nDEVICE=cuda                    # cuda or cpu\nENABLE_CACHING=true\n\n# Audio\nSAMPLE_RATE=16000\nAUDIO_FORMAT=wav\nSPEED=1.0                      # 0.5 - 2.0\n\n# Logging\nLOG_LEVEL=INFO\n</code></pre>"},{"location":"services/ai4bharat-tts/#api-endpoints","title":"API Endpoints","text":""},{"location":"services/ai4bharat-tts/#synthesize","title":"Synthesize","text":"<p>Endpoint: <code>POST /synthesize</code></p> <p>Request: <pre><code>{\n  \"text\": \"\u0928\u092e\u0938\u094d\u0924\u0947, \u0906\u092a\u0915\u093e \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948\u0964\",\n  \"language\": \"hi\",\n  \"speaker\": \"female\",\n  \"speed\": 1.0\n}\n</code></pre></p> <p>Response: <pre><code>Content-Type: audio/wav\nBody: Binary audio data (16-bit PCM, 16kHz)\n</code></pre></p>"},{"location":"services/ai4bharat-tts/#health-check","title":"Health Check","text":"<pre><code>GET /health\n</code></pre>"},{"location":"services/ai4bharat-tts/#speakers-voices","title":"Speakers &amp; Voices","text":""},{"location":"services/ai4bharat-tts/#available-speakers","title":"Available Speakers","text":"<p>Each language supports multiple speakers:</p> <pre><code>Hindi (hi):\n  - female (default)\n  - male\n  - child\n\nTamil (ta):\n  - female (default)\n  - male\n\nTelugu (te):\n  - female (default)\n  - male\n\nAnd so on for other languages...\n</code></pre>"},{"location":"services/ai4bharat-tts/#integration-with-voiceera","title":"Integration with VoiceERA","text":""},{"location":"services/ai4bharat-tts/#configuration_1","title":"Configuration","text":"<p>In <code>voice_2_voice_server/.env</code>:</p> <pre><code>TTS_PROVIDER=ai4bharat\nTTS_SERVICE_URL=http://ai4bharat_tts_server:8002\nTTS_LANGUAGE=hi\nTTS_SPEAKER=female\nTTS_SPEED=1.0\n</code></pre>"},{"location":"services/ai4bharat-tts/#usage","title":"Usage","text":"<pre><code>class AI4BharatTTS:\n    def __init__(self, service_url, language=\"hi\", speaker=\"female\"):\n        self.service_url = service_url\n        self.language = language\n        self.speaker = speaker\n\n    async def synthesize(self, text, speed=1.0):\n        import aiohttp\n\n        async with aiohttp.ClientSession() as session:\n            response = await session.post(\n                f\"{self.service_url}/synthesize\",\n                json={\n                    \"text\": text,\n                    \"language\": self.language,\n                    \"speaker\": self.speaker,\n                    \"speed\": speed\n                }\n            )\n            audio_data = await response.read()\n            return audio_data\n</code></pre>"},{"location":"services/ai4bharat-tts/#voice-customization","title":"Voice Customization","text":""},{"location":"services/ai4bharat-tts/#adjust-speed","title":"Adjust Speed","text":"<pre><code># Slow down speech\nawait tts.synthesize(\"Hello\", speed=0.8)\n\n# Speed up speech\nawait tts.synthesize(\"Hello\", speed=1.2)\n\n# Range: 0.5 (very slow) to 2.0 (very fast)\n</code></pre>"},{"location":"services/ai4bharat-tts/#choose-speaker","title":"Choose Speaker","text":"<pre><code># Female voice\nresponse = await session.post(\n    url,\n    json={\n        \"text\": \"\u0928\u092e\u0938\u094d\u0924\u0947\",\n        \"speaker\": \"female\"\n    }\n)\n\n# Male voice\nresponse = await session.post(\n    url,\n    json={\n        \"text\": \"\u0928\u092e\u0938\u094d\u0924\u0947\",\n        \"speaker\": \"male\"\n    }\n)\n</code></pre>"},{"location":"services/ai4bharat-tts/#performance","title":"Performance","text":""},{"location":"services/ai4bharat-tts/#benchmarks","title":"Benchmarks","text":"Language Quality Speed GPU Required Hindi High Real-time Yes (recommended) Tamil High Real-time Yes (recommended) Telugu High Real-time Yes (recommended) Kannada High Real-time Yes (recommended)"},{"location":"services/ai4bharat-tts/#optimization-tips","title":"Optimization Tips","text":"<ul> <li>Enable audio caching for repeated text</li> <li>Use GPU for production deployments</li> <li>Pre-warm models on service startup</li> <li>Batch synthesis requests when possible</li> <li>Use appropriate sample rate (16kHz recommended)</li> </ul>"},{"location":"services/ai4bharat-tts/#caching-strategy","title":"Caching Strategy","text":""},{"location":"services/ai4bharat-tts/#enable-caching","title":"Enable Caching","text":"<pre><code>ENABLE_CACHING=true\nCACHE_SIZE_MB=500\nCACHE_TTL_HOURS=24\n</code></pre>"},{"location":"services/ai4bharat-tts/#how-caching-works","title":"How Caching Works","text":"<pre><code>Request: \"\u0928\u092e\u0938\u094d\u0924\u0947\" in Hindi\n  \u2502\n  \u251c\u2500\u25ba Check cache\n  \u2502      \u251c\u2500\u25ba Cache HIT: Return cached audio\n  \u2502      \u2514\u2500\u25ba Cache MISS: Generate and cache\n  \u2502\n  \u2514\u2500\u25ba Return audio to client\n</code></pre>"},{"location":"services/ai4bharat-tts/#cache-key","title":"Cache Key","text":"<pre><code>cache_key = f\"{text}:{language}:{speaker}:{speed}\"\n# Example: \"\u0928\u092e\u0938\u094d\u0924\u0947:hi:female:1.0\"\n</code></pre>"},{"location":"services/ai4bharat-tts/#troubleshooting","title":"Troubleshooting","text":""},{"location":"services/ai4bharat-tts/#service-wont-start","title":"Service won't start","text":"<pre><code># Check Python version\npython --version  # Should be 3.10+\n\n# Check dependencies\npip list | grep torch\n\n# Download models\npython download_models.py\n</code></pre>"},{"location":"services/ai4bharat-tts/#no-audio-output","title":"No audio output","text":"<ul> <li>Verify text is in the correct language</li> <li>Check speaker name is valid for the language</li> <li>Ensure model is properly downloaded</li> <li>Check service logs for errors</li> </ul>"},{"location":"services/ai4bharat-tts/#audio-quality-issues","title":"Audio quality issues","text":"<ul> <li>Verify language matches text language</li> <li>Try different speaker</li> <li>Adjust speed parameter</li> <li>Check input text for special characters</li> </ul>"},{"location":"services/ai4bharat-tts/#out-of-memory","title":"Out of memory","text":"<ul> <li>Reduce cache size</li> <li>Disable caching if not needed</li> <li>Use CPU instead of GPU</li> <li>Enable model quantization</li> </ul>"},{"location":"services/ai4bharat-tts/#slow-synthesis","title":"Slow synthesis","text":"<ul> <li>Enable GPU if available</li> <li>Check system resources (CPU, memory)</li> <li>Enable caching for repeated text</li> <li>Reduce batch size</li> </ul>"},{"location":"services/ai4bharat-tts/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"services/ai4bharat-tts/#docker-compose-integration","title":"Docker Compose Integration","text":"<pre><code>services:\n  ai4bharat_tts_server:\n    build: ./ai4bharat_tts_server\n    container_name: voicera_tts\n    restart: unless-stopped\n    ports:\n      - \"8002:8002\"\n    environment:\n      HOST: 0.0.0.0\n      PORT: 8002\n      MODEL_PATH: /models\n      DEVICE: cuda\n    volumes:\n      - ./models:/models\n    devices:\n      - /dev/nvidia.com/gpu=all  # GPU support\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8002/health\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n</code></pre>"},{"location":"services/ai4bharat-tts/#next-steps","title":"Next Steps","text":"<ul> <li>STT Service - Speech-to-Text documentation</li> <li>Configuration - Full configuration guide</li> <li>Quick Start - Get VoiceERA running</li> </ul>"},{"location":"services/backend/","title":"Backend API Service","text":"<p>Comprehensive documentation for the VoiceERA Backend API service.</p>"},{"location":"services/backend/#overview","title":"Overview","text":"<p>The Backend API is the central orchestrator for the VoiceERA platform, built with FastAPI and Python 3.10+.</p> <p>Key Responsibilities: - User authentication &amp; authorization - Agent and campaign management - Call log storage and retrieval - Analytics aggregation - MinIO storage integration - Integration with Voice Server</p>"},{"location":"services/backend/#getting-started","title":"Getting Started","text":""},{"location":"services/backend/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>pip</li> <li>MongoDB</li> <li>MinIO (optional for local development)</li> </ul>"},{"location":"services/backend/#installation","title":"Installation","text":"<pre><code>cd voicera_backend\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Configure environment\ncp env.example .env\n# Edit .env with your settings\n</code></pre>"},{"location":"services/backend/#running-locally","title":"Running Locally","text":"<pre><code># Development mode (auto-reload)\nuvicorn app.main:app --reload --port 8000\n\n# Production mode\nuvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4\n</code></pre>"},{"location":"services/backend/#via-docker","title":"Via Docker","text":"<pre><code># Build image\ndocker build -t voicera-backend .\n\n# Run container\ndocker run -p 8000:8000 \\\n  -e MONGODB_HOST=localhost \\\n  -e MONGODB_PORT=27017 \\\n  voicera-backend\n</code></pre>"},{"location":"services/backend/#project-structure","title":"Project Structure","text":"<pre><code>voicera_backend/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 main.py                    # Application entry point\n\u2502   \u251c\u2500\u2500 auth.py                    # Authentication utilities\n\u2502   \u251c\u2500\u2500 config.py                  # Configuration\n\u2502   \u251c\u2500\u2500 database.py                # Database connection\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 schemas.py             # Pydantic models\n\u2502   \u2502   \u2514\u2500\u2500 database_models.py     # MongoDB models\n\u2502   \u251c\u2500\u2500 routers/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 users.py               # User endpoints\n\u2502   \u2502   \u251c\u2500\u2500 agents.py              # Agent endpoints\n\u2502   \u2502   \u251c\u2500\u2500 campaigns.py           # Campaign endpoints\n\u2502   \u2502   \u251c\u2500\u2500 call_logs.py           # Call log endpoints\n\u2502   \u2502   \u251c\u2500\u2500 call_recordings.py     # Recording endpoints\n\u2502   \u2502   \u251c\u2500\u2500 analytics.py           # Analytics endpoints\n\u2502   \u2502   \u251c\u2500\u2500 integrations.py        # Third-party integrations\n\u2502   \u2502   \u2514\u2500\u2500 health.py              # Health check\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 agent_service.py       # Agent business logic\n\u2502   \u2502   \u251c\u2500\u2500 campaign_service.py    # Campaign business logic\n\u2502   \u2502   \u251c\u2500\u2500 call_recording_service.py\n\u2502   \u2502   \u251c\u2500\u2500 analytics_service.py   # Analytics queries\n\u2502   \u2502   \u251c\u2500\u2500 auth_service.py        # JWT &amp; permissions\n\u2502   \u2502   \u2514\u2500\u2500 storage_service.py     # MinIO integration\n\u2502   \u251c\u2500\u2500 storage/\n\u2502   \u2502   \u2514\u2500\u2500 minio_client.py        # MinIO wrapper\n\u2502   \u251c\u2500\u2500 utils/\n\u2502   \u2502   \u251c\u2500\u2500 security.py            # Encryption, hashing\n\u2502   \u2502   \u251c\u2500\u2500 validators.py          # Data validation\n\u2502   \u2502   \u2514\u2500\u2500 constants.py           # Constant values\n\u2502   \u2514\u2500\u2500 scripts/\n\u2502       \u2514\u2500\u2500 seed_data.py           # Sample data for development\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 test_auth.py\n\u2502   \u251c\u2500\u2500 test_agents.py\n\u2502   \u251c\u2500\u2500 test_campaigns.py\n\u2502   \u2514\u2500\u2500 conftest.py                # Test fixtures\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 env.example\n\u251c\u2500\u2500 docker-compose.yml\n\u2514\u2500\u2500 Dockerfile\n</code></pre>"},{"location":"services/backend/#key-models-schemas","title":"Key Models &amp; Schemas","text":""},{"location":"services/backend/#user-model","title":"User Model","text":"<pre><code># MongoDB document\n{\n  \"_id\": ObjectId,\n  \"id\": UUID,\n  \"email\": str,\n  \"password_hash\": str,\n  \"role\": \"admin\" | \"user\",\n  \"first_name\": str,\n  \"last_name\": str,\n  \"is_active\": bool,\n  \"created_at\": datetime,\n  \"updated_at\": datetime\n}\n</code></pre>"},{"location":"services/backend/#agent-model","title":"Agent Model","text":"<pre><code>{\n  \"_id\": ObjectId,\n  \"id\": UUID,\n  \"user_id\": UUID,\n  \"name\": str,\n  \"description\": str,\n  \"llm_provider\": str,  # \"openai\", \"anthropic\", \"local\"\n  \"llm_model\": str,     # \"gpt-4\", \"claude-3\", etc.\n  \"stt_provider\": str,  # \"deepgram\", \"google\", \"ai4bharat\"\n  \"tts_provider\": str,  # \"cartesia\", \"google\", \"ai4bharat\"\n  \"system_prompt\": str,\n  \"language\": str,      # \"en\", \"hi\", etc.\n  \"voice_parameters\": {\n    \"voice_id\": str,\n    \"speed\": float,\n    \"tone\": str\n  },\n  \"status\": \"active\" | \"inactive\" | \"archived\",\n  \"created_at\": datetime,\n  \"updated_at\": datetime\n}\n</code></pre>"},{"location":"services/backend/#campaign-model","title":"Campaign Model","text":"<pre><code>{\n  \"_id\": ObjectId,\n  \"id\": UUID,\n  \"user_id\": UUID,\n  \"agent_id\": UUID,\n  \"name\": str,\n  \"description\": str,\n  \"phone_numbers\": [str],\n  \"status\": \"draft\" | \"scheduled\" | \"active\" | \"completed\" | \"paused\",\n  \"start_time\": datetime,\n  \"end_time\": datetime,\n  \"max_concurrent_calls\": int,\n  \"retry_config\": {\n    \"max_retries\": int,\n    \"retry_delay\": int\n  },\n  \"created_at\": datetime,\n  \"updated_at\": datetime\n}\n</code></pre>"},{"location":"services/backend/#calllog-model","title":"CallLog Model","text":"<pre><code>{\n  \"_id\": ObjectId,\n  \"id\": UUID,\n  \"campaign_id\": UUID,\n  \"agent_id\": UUID,\n  \"phone_number\": str,\n  \"caller_id\": str,\n  \"status\": \"initiated\" | \"ringing\" | \"connected\" | \"completed\" | \"failed\",\n  \"duration_seconds\": int,\n  \"transcript\": str,\n  \"summary\": str,\n  \"sentiment\": \"positive\" | \"neutral\" | \"negative\",\n  \"emotions\": [str],\n  \"key_phrases\": [str],\n  \"recording_path\": str,       # Path in MinIO\n  \"error_message\": str,        # If failed\n  \"cost\": float,               # API call costs\n  \"created_at\": datetime,\n  \"updated_at\": datetime\n}\n</code></pre>"},{"location":"services/backend/#core-endpoints","title":"Core Endpoints","text":""},{"location":"services/backend/#authentication","title":"Authentication","text":"<pre><code>POST   /auth/register          # User registration\nPOST   /auth/login             # User login\nPOST   /auth/refresh-token     # Refresh JWT\nGET    /auth/me                # Get current user\nPOST   /auth/logout            # Logout\nPOST   /auth/forgot-password   # Password reset\nPOST   /auth/reset-password    # Confirm password reset\n</code></pre>"},{"location":"services/backend/#agents","title":"Agents","text":"<pre><code>GET    /agents                 # List agents\nPOST   /agents                 # Create agent\nGET    /agents/{agent_id}      # Get agent details\nPUT    /agents/{agent_id}      # Update agent\nDELETE /agents/{agent_id}      # Delete agent\nGET    /agents/{agent_id}/config  # Get agent config\n</code></pre>"},{"location":"services/backend/#campaigns","title":"Campaigns","text":"<pre><code>GET    /campaigns              # List campaigns\nPOST   /campaigns              # Create campaign\nGET    /campaigns/{campaign_id}    # Get campaign details\nPUT    /campaigns/{campaign_id}    # Update campaign\nDELETE /campaigns/{campaign_id}    # Delete campaign\nPOST   /campaigns/{campaign_id}/launch  # Start campaign\nPOST   /campaigns/{campaign_id}/pause   # Pause campaign\n</code></pre>"},{"location":"services/backend/#call-logs","title":"Call Logs","text":"<pre><code>GET    /call-logs              # List call logs\nGET    /call-logs/{call_id}    # Get call details\nGET    /call-logs/campaign/{campaign_id}  # Campaign call logs\nDELETE /call-logs/{call_id}    # Delete call log\n</code></pre>"},{"location":"services/backend/#call-recordings","title":"Call Recordings","text":"<pre><code>GET    /call-recordings/{call_id}  # Get recording metadata\nGET    /call-recordings/{call_id}/download  # Download recording\nGET    /call-recordings/{call_id}/transcript  # Get transcript\n</code></pre>"},{"location":"services/backend/#analytics","title":"Analytics","text":"<pre><code>GET    /analytics/calls         # Call statistics\nGET    /analytics/sentiment     # Sentiment analysis\nGET    /analytics/top-phrases   # Most common phrases\nGET    /analytics/agent-performance  # Agent metrics\nGET    /analytics/campaign-stats    # Campaign statistics\n</code></pre>"},{"location":"services/backend/#health","title":"Health","text":"<pre><code>GET    /health                 # Service health check\nGET    /readiness              # Readiness probe\nGET    /liveness               # Liveness probe\n</code></pre>"},{"location":"services/backend/#authentication-authorization","title":"Authentication &amp; Authorization","text":""},{"location":"services/backend/#jwt-token-structure","title":"JWT Token Structure","text":"<pre><code>{\n  \"sub\": \"user-uuid\",\n  \"email\": \"user@example.com\",\n  \"role\": \"admin\",\n  \"permissions\": [\"read\", \"write\", \"delete\"],\n  \"iat\": 1674003600,\n  \"exp\": 1674007200,\n  \"aud\": \"voicera-api\"\n}\n</code></pre>"},{"location":"services/backend/#request-header","title":"Request Header","text":"<pre><code>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\n</code></pre>"},{"location":"services/backend/#permission-scopes","title":"Permission Scopes","text":"<ul> <li><code>read:agents</code> - List agents</li> <li><code>write:agents</code> - Create/edit agents</li> <li><code>delete:agents</code> - Delete agents</li> <li><code>read:campaigns</code> - List campaigns</li> <li><code>write:campaigns</code> - Create/edit campaigns</li> <li><code>admin</code> - Full access</li> </ul>"},{"location":"services/backend/#requestresponse-examples","title":"Request/Response Examples","text":""},{"location":"services/backend/#create-agent","title":"Create Agent","text":"<p>Request: <pre><code>curl -X POST http://localhost:8000/agents \\\n  -H \"Authorization: Bearer &lt;token&gt;\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Sales Agent\",\n    \"description\": \"Handles sales inquiries\",\n    \"llm_provider\": \"openai\",\n    \"llm_model\": \"gpt-4\",\n    \"stt_provider\": \"deepgram\",\n    \"tts_provider\": \"cartesia\",\n    \"system_prompt\": \"You are a helpful sales agent...\",\n    \"language\": \"en\",\n    \"voice_parameters\": {\n      \"voice_id\": \"english_male\",\n      \"speed\": 1.0,\n      \"tone\": \"professional\"\n    }\n  }'\n</code></pre></p> <p>Response: <pre><code>{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n  \"name\": \"Sales Agent\",\n  \"status\": \"active\",\n  \"created_at\": \"2024-01-29T10:30:00Z\",\n  \"updated_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"services/backend/#get-call-log-with-transcript","title":"Get Call Log with Transcript","text":"<p>Request: <pre><code>curl http://localhost:8000/call-logs/call-uuid \\\n  -H \"Authorization: Bearer &lt;token&gt;\"\n</code></pre></p> <p>Response: <pre><code>{\n  \"id\": \"call-uuid\",\n  \"campaign_id\": \"campaign-uuid\",\n  \"phone_number\": \"+1234567890\",\n  \"status\": \"completed\",\n  \"duration_seconds\": 120,\n  \"transcript\": \"User: Hello... Agent: Hi there...\",\n  \"sentiment\": \"positive\",\n  \"emotions\": [\"satisfied\", \"engaged\"],\n  \"recording_path\": \"s3://voicera-recordings/call-uuid.wav\",\n  \"created_at\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre></p>"},{"location":"services/backend/#environment-configuration","title":"Environment Configuration","text":"<pre><code># Database\nMONGODB_HOST=localhost\nMONGODB_PORT=27017\nMONGODB_USER=admin\nMONGODB_PASSWORD=admin123\nMONGODB_DATABASE=voicera\n\n# Storage\nMINIO_HOST=localhost\nMINIO_PORT=9000\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\n\n# Security\nJWT_SECRET_KEY=your-secret-key\nJWT_ALGORITHM=HS256\nJWT_EXPIRATION_HOURS=24\n\n# CORS\nCORS_ORIGINS=[\"http://localhost:3000\",\"https://yourdomain.com\"]\n\n# API\nAPI_TITLE=VoiceERA API\nAPI_VERSION=1.0.0\nLOG_LEVEL=INFO\nDEBUG=False\n</code></pre>"},{"location":"services/backend/#error-handling","title":"Error Handling","text":""},{"location":"services/backend/#standard-error-response","title":"Standard Error Response","text":"<pre><code>{\n  \"detail\": \"Authentication failed\",\n  \"error_code\": \"AUTH_001\",\n  \"status_code\": 401,\n  \"timestamp\": \"2024-01-29T10:30:00Z\"\n}\n</code></pre>"},{"location":"services/backend/#common-status-codes","title":"Common Status Codes","text":"Code Meaning 200 Success 201 Created 400 Bad Request 401 Unauthorized 403 Forbidden 404 Not Found 409 Conflict 429 Rate Limited 500 Server Error"},{"location":"services/backend/#next-steps","title":"Next Steps","text":"<ul> <li>REST API Details - Complete API documentation</li> <li>Quick Start - Get started quickly</li> <li>Configuration - Configuration options</li> </ul>"},{"location":"services/frontend/","title":"Frontend Service","text":"<p>Comprehensive documentation for the VoiceERA Frontend service.</p>"},{"location":"services/frontend/#overview","title":"Overview","text":"<p>The Frontend is the user-facing web interface for VoiceERA, built with Next.js 16+, React 18+, and TailwindCSS 4+.</p> <p>Key Responsibilities: - User authentication &amp; account management - Agent creation and management - Campaign management and monitoring - Real-time voice call interface - Call history and recordings - Analytics dashboard</p>"},{"location":"services/frontend/#getting-started","title":"Getting Started","text":""},{"location":"services/frontend/#prerequisites","title":"Prerequisites","text":"<ul> <li>Node.js 18+</li> <li>npm or yarn</li> <li>Modern web browser (Chrome, Firefox, Safari, Edge)</li> </ul>"},{"location":"services/frontend/#installation","title":"Installation","text":"<pre><code>cd voicera_frontend\n\n# Install dependencies\nnpm install\n# or\nyarn install\n\n# Configure environment\ncp .env.example .env.local\n# Edit with your settings\n</code></pre>"},{"location":"services/frontend/#development","title":"Development","text":"<pre><code># Run dev server (with hot reload)\nnpm run dev\n\n# Open in browser\n# http://localhost:3000\n</code></pre>"},{"location":"services/frontend/#production-build","title":"Production Build","text":"<pre><code># Build for production\nnpm run build\n\n# Start production server\nnpm run start\n\n# Or via Docker\ndocker build -t voicera-frontend .\ndocker run -p 3000:3000 voicera-frontend\n</code></pre>"},{"location":"services/frontend/#project-structure","title":"Project Structure","text":"<pre><code>voicera_frontend/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 layout.tsx             # Root layout\n\u2502   \u251c\u2500\u2500 page.tsx               # Home page\n\u2502   \u251c\u2500\u2500 (auth)/                # Auth routes\n\u2502   \u2502   \u251c\u2500\u2500 login/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u251c\u2500\u2500 signup/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u2514\u2500\u2500 forgot-password/\n\u2502   \u2502       \u2514\u2500\u2500 page.tsx\n\u2502   \u251c\u2500\u2500 (dashboard)/           # Protected routes\n\u2502   \u2502   \u251c\u2500\u2500 layout.tsx\n\u2502   \u2502   \u251c\u2500\u2500 page.tsx           # Dashboard home\n\u2502   \u2502   \u251c\u2500\u2500 agents/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 page.tsx       # Agents list\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [id]/\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 page.tsx   # Agent details\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 new/\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 page.tsx   # Create agent\n\u2502   \u2502   \u251c\u2500\u2500 campaigns/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 page.tsx\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 [id]/\n\u2502   \u2502   \u2502   \u2502   \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 new/\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u251c\u2500\u2500 call-logs/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 page.tsx\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 [id]/\n\u2502   \u2502   \u2502       \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u251c\u2500\u2500 analytics/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u251c\u2500\u2500 settings/\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 page.tsx\n\u2502   \u2502   \u2514\u2500\u2500 profile/\n\u2502   \u2502       \u2514\u2500\u2500 page.tsx\n\u2502   \u2514\u2500\u2500 api/                   # API routes (if needed)\n\u2502       \u251c\u2500\u2500 auth/\n\u2502       \u2514\u2500\u2500 proxy/\n\u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 app-sidebar.tsx        # Navigation sidebar\n\u2502   \u251c\u2500\u2500 assistants/            # Agent components\n\u2502   \u2502   \u251c\u2500\u2500 agent-form.tsx\n\u2502   \u2502   \u251c\u2500\u2500 agent-card.tsx\n\u2502   \u2502   \u2514\u2500\u2500 agent-list.tsx\n\u2502   \u251c\u2500\u2500 campaigns/             # Campaign components\n\u2502   \u2502   \u251c\u2500\u2500 campaign-form.tsx\n\u2502   \u2502   \u251c\u2500\u2500 campaign-card.tsx\n\u2502   \u2502   \u2514\u2500\u2500 campaign-list.tsx\n\u2502   \u251c\u2500\u2500 voice/                 # Voice call components\n\u2502   \u2502   \u251c\u2500\u2500 voice-interface.tsx\n\u2502   \u2502   \u251c\u2500\u2500 audio-player.tsx\n\u2502   \u2502   \u2514\u2500\u2500 call-status.tsx\n\u2502   \u251c\u2500\u2500 analytics/             # Analytics components\n\u2502   \u2502   \u251c\u2500\u2500 metrics-card.tsx\n\u2502   \u2502   \u251c\u2500\u2500 chart-widget.tsx\n\u2502   \u2502   \u2514\u2500\u2500 analytics-dashboard.tsx\n\u2502   \u251c\u2500\u2500 ui/                    # Reusable UI components\n\u2502   \u2502   \u251c\u2500\u2500 button.tsx\n\u2502   \u2502   \u251c\u2500\u2500 card.tsx\n\u2502   \u2502   \u251c\u2500\u2500 modal.tsx\n\u2502   \u2502   \u251c\u2500\u2500 dropdown.tsx\n\u2502   \u2502   \u251c\u2500\u2500 input.tsx\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u251c\u2500\u2500 header.tsx\n\u2502   \u251c\u2500\u2500 footer.tsx\n\u2502   \u2514\u2500\u2500 layouts/\n\u2502       \u251c\u2500\u2500 authenticated-layout.tsx\n\u2502       \u2514\u2500\u2500 public-layout.tsx\n\u251c\u2500\u2500 hooks/\n\u2502   \u251c\u2500\u2500 use-auth.ts            # Auth hook\n\u2502   \u251c\u2500\u2500 use-voice.ts           # Voice call hook\n\u2502   \u251c\u2500\u2500 use-api.ts             # API interaction\n\u2502   \u251c\u2500\u2500 use-mobile.ts          # Mobile detection\n\u2502   \u2514\u2500\u2500 use-analytics.ts\n\u251c\u2500\u2500 lib/\n\u2502   \u251c\u2500\u2500 api.ts                 # API client\n\u2502   \u251c\u2500\u2500 api-config.ts          # API configuration\n\u2502   \u251c\u2500\u2500 auth.ts                # Auth utilities\n\u2502   \u251c\u2500\u2500 websocket.ts           # WebSocket client\n\u2502   \u251c\u2500\u2500 utils.ts               # Utility functions\n\u2502   \u2514\u2500\u2500 constants.ts           # Constants\n\u251c\u2500\u2500 styles/\n\u2502   \u2514\u2500\u2500 globals.css\n\u251c\u2500\u2500 public/                    # Static assets\n\u2502   \u2514\u2500\u2500 images/\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 next.config.ts\n\u251c\u2500\u2500 tailwind.config.js\n\u251c\u2500\u2500 postcss.config.js\n\u2514\u2500\u2500 .env.example\n</code></pre>"},{"location":"services/frontend/#key-features","title":"Key Features","text":""},{"location":"services/frontend/#authentication","title":"Authentication","text":"<pre><code>// Custom hook for auth state\nfunction useAuth() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() =&gt; {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    if (token) {\n      verifyToken(token).then(setUser);\n    }\n    setLoading(false);\n  }, []);\n\n  const login = async (email, password) =&gt; {\n    const response = await api.post('/auth/login', {\n      email,\n      password\n    });\n    localStorage.setItem('token', response.token);\n    setUser(response.user);\n  };\n\n  const logout = () =&gt; {\n    localStorage.removeItem('token');\n    setUser(null);\n  };\n\n  return { user, loading, login, logout };\n}\n</code></pre>"},{"location":"services/frontend/#voice-call-interface","title":"Voice Call Interface","text":"<pre><code>// Component for real-time voice calls\nfunction VoiceInterface({ campaignId, agentId }) {\n  const [callActive, setCallActive] = useState(false);\n  const [transcript, setTranscript] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const mediaRecorder = useRef(null);\n  const ws = useRef(null);\n\n  const startCall = async () =&gt; {\n    // Establish WebSocket connection\n    ws.current = new WebSocket(\n      process.env.NEXT_PUBLIC_VOICE_SERVER_URL\n    );\n\n    ws.current.onopen = async () =&gt; {\n      // Send auth token\n      ws.current.send(JSON.stringify({\n        type: 'auth',\n        token: getToken(),\n        agent_id: agentId\n      }));\n    };\n\n    ws.current.onmessage = (event) =&gt; {\n      const message = JSON.parse(event.data);\n\n      if (message.type === 'ready') {\n        setCallActive(true);\n        startAudioCapture();\n      } else if (message.type === 'audio') {\n        playAudio(message.data);\n      }\n    };\n  };\n\n  const startAudioCapture = async () =&gt; {\n    const stream = await navigator.mediaDevices\n      .getUserMedia({ audio: true });\n    mediaRecorder.current = new MediaRecorder(stream);\n\n    mediaRecorder.current.ondataavailable = (event) =&gt; {\n      const audioData = event.data;\n      ws.current.send(JSON.stringify({\n        type: 'audio',\n        data: audioData\n      }));\n    };\n\n    mediaRecorder.current.start(100); // Send chunks every 100ms\n    setIsListening(true);\n  };\n\n  const endCall = () =&gt; {\n    mediaRecorder.current.stop();\n    ws.current.send(JSON.stringify({\n      type: 'control',\n      action: 'end'\n    }));\n    ws.current.close();\n    setCallActive(false);\n    setIsListening(false);\n  };\n\n  return (\n    &lt;div className=\"voice-interface\"&gt;\n      &lt;div className=\"call-status\"&gt;\n        {callActive ? 'Call in Progress' : 'Call Ended'}\n      &lt;/div&gt;\n\n      &lt;div className=\"transcript\"&gt;\n        &lt;p&gt;{transcript}&lt;/p&gt;\n      &lt;/div&gt;\n\n      &lt;div className=\"controls\"&gt;\n        {!callActive ? (\n          &lt;button onClick={startCall} className=\"btn-primary\"&gt;\n            Start Call\n          &lt;/button&gt;\n        ) : (\n          &lt;button onClick={endCall} className=\"btn-danger\"&gt;\n            End Call\n          &lt;/button&gt;\n        )}\n      &lt;/div&gt;\n\n      &lt;div className=\"audio-status\"&gt;\n        {isListening &amp;&amp; (\n          &lt;span className=\"recording-indicator\"&gt;\n            \ud83c\udfa4 Recording...\n          &lt;/span&gt;\n        )}\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"services/frontend/#analytics-dashboard","title":"Analytics Dashboard","text":"<pre><code>// Analytics component\nfunction AnalyticsDashboard() {\n  const [metrics, setMetrics] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() =&gt; {\n    const fetchMetrics = async () =&gt; {\n      const response = await api.get('/analytics/calls');\n      setMetrics(response.data);\n      setLoading(false);\n    };\n\n    fetchMetrics();\n    const interval = setInterval(fetchMetrics, 30000); // Refresh every 30s\n    return () =&gt; clearInterval(interval);\n  }, []);\n\n  if (loading) return &lt;LoadingSpinner /&gt;;\n\n  return (\n    &lt;div className=\"analytics-grid\"&gt;\n      &lt;MetricCard\n        title=\"Total Calls\"\n        value={metrics.total_calls}\n        icon=\"\ud83d\udcde\"\n      /&gt;\n\n      &lt;MetricCard\n        title=\"Average Duration\"\n        value={`${Math.round(metrics.avg_duration)}s`}\n        icon=\"\u23f1\ufe0f\"\n      /&gt;\n\n      &lt;MetricCard\n        title=\"Sentiment Score\"\n        value={`${metrics.sentiment_positive}%`}\n        icon=\"\ud83d\ude0a\"\n      /&gt;\n\n      &lt;ChartWidget\n        title=\"Calls Over Time\"\n        data={metrics.calls_by_hour}\n        type=\"line\"\n      /&gt;\n\n      &lt;ChartWidget\n        title=\"Sentiment Distribution\"\n        data={metrics.sentiment_distribution}\n        type=\"pie\"\n      /&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"services/frontend/#api-integration","title":"API Integration","text":""},{"location":"services/frontend/#api-client-configuration","title":"API Client Configuration","text":"<pre><code>// lib/api-config.ts\nexport const API_BASE_URL = \n  process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8000';\n\nexport const API_TIMEOUT = 30000;\n\nexport const API_ENDPOINTS = {\n  AUTH: {\n    LOGIN: '/auth/login',\n    SIGNUP: '/auth/signup',\n    REFRESH: '/auth/refresh-token',\n    ME: '/auth/me'\n  },\n  AGENTS: {\n    LIST: '/agents',\n    CREATE: '/agents',\n    DETAIL: (id: string) =&gt; `/agents/${id}`,\n    UPDATE: (id: string) =&gt; `/agents/${id}`,\n    DELETE: (id: string) =&gt; `/agents/${id}`\n  },\n  CAMPAIGNS: {\n    LIST: '/campaigns',\n    CREATE: '/campaigns',\n    DETAIL: (id: string) =&gt; `/campaigns/${id}`,\n    LAUNCH: (id: string) =&gt; `/campaigns/${id}/launch`\n  },\n  CALL_LOGS: {\n    LIST: '/call-logs',\n    DETAIL: (id: string) =&gt; `/call-logs/${id}`\n  },\n  ANALYTICS: {\n    CALLS: '/analytics/calls',\n    SENTIMENT: '/analytics/sentiment'\n  }\n};\n</code></pre>"},{"location":"services/frontend/#api-client","title":"API Client","text":"<pre><code>// lib/api.ts\nimport axios from 'axios';\n\nexport const apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: API_TIMEOUT\n});\n\n// Add token to headers\napiClient.interceptors.request.use((config) =&gt; {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Handle errors\napiClient.interceptors.response.use(\n  response =&gt; response,\n  error =&gt; {\n    if (error.response?.status === 401) {\n      // Redirect to login\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  get: (url: string) =&gt; apiClient.get(url),\n  post: (url: string, data: any) =&gt; apiClient.post(url, data),\n  put: (url: string, data: any) =&gt; apiClient.put(url, data),\n  delete: (url: string) =&gt; apiClient.delete(url)\n};\n</code></pre>"},{"location":"services/frontend/#styling","title":"Styling","text":""},{"location":"services/frontend/#tailwindcss-configuration","title":"TailwindCSS Configuration","text":"<pre><code>// tailwind.config.js\nmodule.exports = {\n  content: [\n    './app/**/*.{js,ts,jsx,tsx}',\n    './components/**/*.{js,ts,jsx,tsx}'\n  ],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#3B82F6',\n        secondary: '#10B981',\n        danger: '#EF4444'\n      },\n      spacing: {\n        'container': '1200px'\n      }\n    }\n  },\n  plugins: []\n};\n</code></pre>"},{"location":"services/frontend/#example-component-styling","title":"Example Component Styling","text":"<pre><code>export function AgentCard({ agent }) {\n  return (\n    &lt;div className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\"&gt;\n      &lt;h3 className=\"text-lg font-semibold text-gray-900\"&gt;\n        {agent.name}\n      &lt;/h3&gt;\n\n      &lt;p className=\"text-sm text-gray-600 mt-2\"&gt;\n        {agent.description}\n      &lt;/p&gt;\n\n      &lt;div className=\"flex gap-2 mt-4\"&gt;\n        &lt;button className=\"px-4 py-2 bg-primary text-white rounded hover:bg-blue-600\"&gt;\n          Edit\n        &lt;/button&gt;\n        &lt;button className=\"px-4 py-2 bg-danger text-white rounded hover:bg-red-600\"&gt;\n          Delete\n        &lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"services/frontend/#environment-variables","title":"Environment Variables","text":"<pre><code># API Configuration\nNEXT_PUBLIC_API_BASE_URL=http://localhost:8000\nNEXT_PUBLIC_API_TIMEOUT=30000\n\n# Voice Server\nNEXT_PUBLIC_VOICE_SERVER_URL=http://localhost:7860\nNEXT_PUBLIC_WS_URL=ws://localhost:7860\n\n# Authentication\nNEXT_PUBLIC_AUTH_ENABLED=true\nNEXT_PUBLIC_JWT_STORAGE_KEY=voicera_token\n\n# Application\nNEXT_PUBLIC_APP_NAME=VoiceERA\nNEXT_PUBLIC_APP_VERSION=1.0.0\nNEXT_PUBLIC_LOG_LEVEL=info\n\n# Analytics\nNEXT_PUBLIC_ANALYTICS_ENABLED=false\n</code></pre>"},{"location":"services/frontend/#next-steps","title":"Next Steps","text":"<ul> <li>Installation - Set up development</li> <li>Quick Start - Get running</li> <li>Backend API - API documentation</li> </ul>"},{"location":"services/voice-server/","title":"Voice Server Service","text":"<p>Comprehensive documentation for the VoiceERA Voice Server service.</p>"},{"location":"services/voice-server/#overview","title":"Overview","text":"<p>The Voice Server is the real-time voice processing engine for VoiceERA, built with Pipecat and Python 3.10+.</p> <p>Key Responsibilities: - Establish WebSocket connections with clients - Process real-time audio streams - Orchestrate STT, LLM, and TTS services - Manage concurrent voice sessions - Handle audio input/output - Store call recordings and transcripts</p>"},{"location":"services/voice-server/#getting-started","title":"Getting Started","text":""},{"location":"services/voice-server/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>pip</li> <li>Vobiz telephony credentials (for production)</li> <li>API keys for AI services (OpenAI, Deepgram, Cartesia, etc.)</li> </ul>"},{"location":"services/voice-server/#installation","title":"Installation","text":"<pre><code>cd voice_2_voice_server\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\n</code></pre>"},{"location":"services/voice-server/#configuration","title":"Configuration","text":"<pre><code># Copy example config\ncp .env.example .env\n\n# Edit with your settings\nnano .env\n</code></pre>"},{"location":"services/voice-server/#running-locally","title":"Running Locally","text":"<pre><code># Development mode\npython main.py\n\n# With logging\npython main.py --log-level DEBUG\n\n# Via Docker\ndocker build -t voicera-voice-server .\ndocker run -p 7860:7860 \\\n  -e OPENAI_API_KEY=sk-... \\\n  -e DEEPGRAM_API_KEY=... \\\n  voicera-voice-server\n</code></pre>"},{"location":"services/voice-server/#project-structure","title":"Project Structure","text":"<pre><code>voice_2_voice_server/\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 server.py              # FastAPI server &amp; WebSocket\n\u2502   \u251c\u2500\u2500 bot.py                 # Voice bot pipeline\n\u2502   \u2514\u2500\u2500 services.py            # Service factories\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 llm_mappings.py        # LLM provider configs\n\u2502   \u251c\u2500\u2500 stt_mappings.py        # STT language mappings\n\u2502   \u251c\u2500\u2500 tts_mappings.py        # TTS language mappings\n\u2502   \u251c\u2500\u2500 config.yaml            # Main config (gitignored)\n\u2502   \u2514\u2500\u2500 config.example.yaml    # Example config\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 ai4bharat/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 stt.py             # IndicConformer\n\u2502   \u2502   \u2514\u2500\u2500 tts.py             # IndicParler\n\u2502   \u251c\u2500\u2500 audio/\n\u2502   \u2502   \u251c\u2500\u2500 greeting_interruption_filter.py\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 bhashini/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 stt.py\n\u2502   \u2502   \u2514\u2500\u2500 tts.py\n\u2502   \u251c\u2500\u2500 kenpath_llm/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 llm.py\n\u2502   \u2514\u2500\u2500 __init__.py\n\u251c\u2500\u2500 serializer/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 vobiz_serializer.py    # Protocol serializer\n\u251c\u2500\u2500 storage/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 minio_client.py        # MinIO integration\n\u251c\u2500\u2500 agent_configs/             # Agent config files\n\u2502   \u251c\u2500\u2500 default_agent.json\n\u2502   \u251c\u2500\u2500 sales_agent.json\n\u2502   \u2514\u2500\u2500 indic_english.json\n\u251c\u2500\u2500 main.py                    # Application entry\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 env.example\n\u251c\u2500\u2500 Dockerfile\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"services/voice-server/#core-components","title":"Core Components","text":""},{"location":"services/voice-server/#voice-bot-pipeline","title":"Voice Bot Pipeline","text":"<p>The heart of the system - orchestrates STT, LLM, and TTS.</p> <pre><code>class VoiceBot:\n    \"\"\"\n    Real-time voice processing pipeline\n\n    Flow: Audio Input \u2192 STT \u2192 LLM \u2192 TTS \u2192 Audio Output\n    \"\"\"\n\n    def __init__(self, agent_config):\n        self.stt_service = create_stt_service(agent_config)\n        self.llm_service = create_llm_service(agent_config)\n        self.tts_service = create_tts_service(agent_config)\n\n    async def process_audio(self, audio_chunk):\n        # Step 1: Convert audio to text\n        transcript = await self.stt_service.transcribe(audio_chunk)\n\n        # Step 2: Get LLM response\n        response = await self.llm_service.generate(\n            transcript,\n            system_prompt=self.agent_config.system_prompt\n        )\n\n        # Step 3: Convert response to speech\n        audio_response = await self.tts_service.synthesize(response)\n\n        return audio_response\n</code></pre>"},{"location":"services/voice-server/#websocket-protocol","title":"WebSocket Protocol","text":"<p>Message Format: <pre><code>{\n  \"type\": \"audio|control|status\",\n  \"session_id\": \"uuid\",\n  \"timestamp\": 1674003600000,\n  \"payload\": {...}\n}\n</code></pre></p> <p>Audio Message: <pre><code>{\n  \"type\": \"audio\",\n  \"session_id\": \"session-uuid\",\n  \"sequence\": 1,\n  \"format\": \"pcm_16k\",\n  \"data\": \"base64-encoded-audio\"\n}\n</code></pre></p> <p>Control Message: <pre><code>{\n  \"type\": \"control\",\n  \"action\": \"pause|resume|end\",\n  \"session_id\": \"session-uuid\"\n}\n</code></pre></p>"},{"location":"services/voice-server/#session-management","title":"Session Management","text":"<pre><code>class SessionManager:\n    \"\"\"Manage active voice sessions\"\"\"\n\n    async def create_session(self, auth_token, agent_id):\n        session = Session(\n            session_id=uuid4(),\n            agent_id=agent_id,\n            user_id=extract_user_id(auth_token),\n            created_at=datetime.now(),\n            status=\"active\"\n        )\n        self.active_sessions[session.session_id] = session\n        return session\n\n    async def end_session(self, session_id):\n        session = self.active_sessions.get(session_id)\n        if session:\n            # Save recording\n            await self.save_recording(session)\n            # Save transcript\n            await self.save_transcript(session)\n            # Cleanup\n            del self.active_sessions[session_id]\n</code></pre>"},{"location":"services/voice-server/#service-providers","title":"Service Providers","text":""},{"location":"services/voice-server/#llm-services","title":"LLM Services","text":""},{"location":"services/voice-server/#openai","title":"OpenAI","text":"<pre><code>class OpenAIService:\n    def __init__(self, api_key, model=\"gpt-4\"):\n        self.client = OpenAI(api_key=api_key)\n        self.model = model\n\n    async def generate(self, prompt, system_prompt=\"\"):\n        response = await self.client.chat.completions.create(\n            model=self.model,\n            messages=[\n                {\"role\": \"system\", \"content\": system_prompt},\n                {\"role\": \"user\", \"content\": prompt}\n            ],\n            temperature=0.7,\n            max_tokens=200\n        )\n        return response.choices[0].message.content\n</code></pre>"},{"location":"services/voice-server/#local-llm","title":"Local LLM","text":"<pre><code>class LocalLLMService:\n    def __init__(self, api_base, model=\"mistral-7b\"):\n        self.api_base = api_base\n        self.model = model\n\n    async def generate(self, prompt, system_prompt=\"\"):\n        # Call local Ollama or similar\n        response = await aiohttp.post(\n            f\"{self.api_base}/api/generate\",\n            json={\"model\": self.model, \"prompt\": prompt}\n        )\n        return response.json()\n</code></pre>"},{"location":"services/voice-server/#stt-services","title":"STT Services","text":""},{"location":"services/voice-server/#deepgram","title":"Deepgram","text":"<pre><code>class DeepgramSTT:\n    def __init__(self, api_key):\n        self.client = DeepgramClient(api_key=api_key)\n\n    async def transcribe(self, audio_data):\n        # Streaming transcription\n        response = await self.client.transcribe_streaming(\n            audio_data,\n            model=\"nova-2\",\n            language=\"en\"\n        )\n        return response.transcript\n</code></pre>"},{"location":"services/voice-server/#ai4bharat-indic-languages","title":"AI4Bharat (Indic Languages)","text":"<pre><code>class AI4BharatSTT:\n    def __init__(self, service_url):\n        self.service_url = service_url\n\n    async def transcribe(self, audio_data, language=\"hi\"):\n        # WebSocket to local AI4Bharat server\n        response = await aiohttp.post(\n            f\"{self.service_url}/transcribe\",\n            json={\"audio\": base64.b64encode(audio_data).decode(),\n                  \"language\": language}\n        )\n        return response.json()[\"transcript\"]\n</code></pre>"},{"location":"services/voice-server/#tts-services","title":"TTS Services","text":""},{"location":"services/voice-server/#cartesia","title":"Cartesia","text":"<pre><code>class CartesiaTTS:\n    def __init__(self, api_key):\n        self.client = CartesiaClient(api_key=api_key)\n\n    async def synthesize(self, text, voice=\"english_male\"):\n        audio = await self.client.synthesize(\n            text=text,\n            voice_id=voice,\n            sample_rate=16000\n        )\n        return audio\n</code></pre>"},{"location":"services/voice-server/#ai4bharat","title":"AI4Bharat","text":"<pre><code>class AI4BharatTTS:\n    def __init__(self, service_url):\n        self.service_url = service_url\n\n    async def synthesize(self, text, language=\"hi\", voice=\"female\"):\n        response = await aiohttp.post(\n            f\"{self.service_url}/synthesize\",\n            json={\n                \"text\": text,\n                \"language\": language,\n                \"voice\": voice\n            }\n        )\n        return response.json()[\"audio\"]\n</code></pre>"},{"location":"services/voice-server/#websocket-api","title":"WebSocket API","text":""},{"location":"services/voice-server/#connection-flow","title":"Connection Flow","text":"<pre><code>// Client-side example\nconst socket = new WebSocket('ws://localhost:7860/voice');\n\nsocket.onopen = () =&gt; {\n  // Send authentication\n  socket.send(JSON.stringify({\n    type: 'auth',\n    token: jwtToken\n  }));\n};\n\nsocket.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n\n  if (message.type === 'ready') {\n    // Server is ready, start sending audio\n    const audioContext = new AudioContext();\n    // ... capture and send audio frames\n  } else if (message.type === 'audio') {\n    // Play response audio\n    playAudio(message.data);\n  }\n};\n</code></pre>"},{"location":"services/voice-server/#server-side-handlers","title":"Server-side Handlers","text":"<pre><code># FastAPI WebSocket endpoint\n@app.websocket(\"/voice\")\nasync def websocket_endpoint(websocket: WebSocket):\n    await websocket.accept()\n\n    try:\n        # Authenticate\n        auth_msg = await websocket.receive_json()\n        user_id = validate_token(auth_msg['token'])\n\n        # Create session\n        session = await session_manager.create_session(\n            auth_msg['token'],\n            agent_id=auth_msg.get('agent_id')\n        )\n\n        # Signal ready\n        await websocket.send_json({\n            'type': 'ready',\n            'session_id': str(session.session_id)\n        })\n\n        # Process messages\n        while True:\n            message = await websocket.receive_json()\n\n            if message['type'] == 'audio':\n                audio_chunk = base64.b64decode(message['data'])\n                response_audio = await voice_bot.process_audio(\n                    audio_chunk\n                )\n                await websocket.send_json({\n                    'type': 'audio',\n                    'data': base64.b64encode(response_audio).decode()\n                })\n\n            elif message['type'] == 'control':\n                if message['action'] == 'end':\n                    break\n\n    finally:\n        await session_manager.end_session(session.session_id)\n</code></pre>"},{"location":"services/voice-server/#configuration_1","title":"Configuration","text":""},{"location":"services/voice-server/#configyaml-structure","title":"config.yaml Structure","text":"<pre><code>stt:\n  provider: deepgram          # or ai4bharat, google, azure\n  deepgram:\n    api_key: ${DEEPGRAM_API_KEY}\n    model: nova-2\n    language: en\n  ai4bharat:\n    service_url: http://ai4bharat_stt_server:8001\n    language: hi\n\nllm:\n  provider: openai            # or anthropic, local\n  openai:\n    api_key: ${OPENAI_API_KEY}\n    model: gpt-4\n    temperature: 0.7\n    max_tokens: 200\n  local:\n    api_base: http://localhost:8000\n    model: mistral-7b\n\ntts:\n  provider: cartesia          # or google, ai4bharat\n  cartesia:\n    api_key: ${CARTESIA_API_KEY}\n    voice: english_male\n    sample_rate: 16000\n  ai4bharat:\n    service_url: http://ai4bharat_tts_server:8002\n    language: hi\n    voice: female\n\nserver:\n  host: 0.0.0.0\n  port: 7860\n  max_connections: 100\n  session_timeout: 1800       # 30 minutes\n\nbackend:\n  api_url: http://backend:8000\n  upload_recordings: true\n  upload_transcripts: true\n</code></pre>"},{"location":"services/voice-server/#monitoring-health","title":"Monitoring &amp; Health","text":""},{"location":"services/voice-server/#health-check-endpoint","title":"Health Check Endpoint","text":"<pre><code>@app.get(\"/health\")\nasync def health_check():\n    return {\n        \"status\": \"healthy\",\n        \"services\": {\n            \"stt\": await stt_service.health_check(),\n            \"llm\": await llm_service.health_check(),\n            \"tts\": await tts_service.health_check(),\n            \"backend\": await backend.health_check()\n        },\n        \"active_sessions\": len(session_manager.active_sessions),\n        \"timestamp\": datetime.utcnow().isoformat()\n    }\n</code></pre>"},{"location":"services/voice-server/#metrics","title":"Metrics","text":"<p>Track these key metrics: - Session count - Active concurrent sessions - Audio latency - Time from audio received to response audio sent - Error rate - STT/LLM/TTS failures - Uptime - Service availability - Resource usage - CPU, memory, connections</p>"},{"location":"services/voice-server/#error-handling","title":"Error Handling","text":""},{"location":"services/voice-server/#retry-logic","title":"Retry Logic","text":"<pre><code>@retry_with_backoff(max_retries=3, base_delay=1)\nasync def call_external_service(service, *args):\n    try:\n        return await service.call(*args)\n    except ServiceError as e:\n        if e.is_retryable():\n            raise  # Will trigger retry\n        else:\n            # Don't retry for non-transient errors\n            raise NoRetryError(str(e))\n</code></pre>"},{"location":"services/voice-server/#graceful-degradation","title":"Graceful Degradation","text":"<pre><code>async def process_audio(audio_chunk):\n    try:\n        transcript = await stt_service.transcribe(audio_chunk)\n    except STTError:\n        # Fallback: ask user to repeat\n        return await tts_service.synthesize(\n            \"Sorry, I didn't catch that. Could you repeat?\"\n        )\n\n    try:\n        response = await llm_service.generate(transcript)\n    except LLMError:\n        # Fallback response\n        return await tts_service.synthesize(\n            \"I'm having trouble processing your request. Please try again.\"\n        )\n\n    try:\n        audio = await tts_service.synthesize(response)\n    except TTSError:\n        # Log error and disconnect\n        logger.error(\"TTS failed, ending session\")\n        raise SessionEndError()\n\n    return audio\n</code></pre>"},{"location":"services/voice-server/#performance-optimization","title":"Performance Optimization","text":""},{"location":"services/voice-server/#audio-buffering","title":"Audio Buffering","text":"<pre><code>class AudioBuffer:\n    def __init__(self, sample_rate=16000, duration_ms=100):\n        self.sample_rate = sample_rate\n        self.buffer_size = (sample_rate * duration_ms) // 1000\n        self.buffer = []\n\n    def add(self, chunk):\n        self.buffer.extend(chunk)\n        if len(self.buffer) &gt;= self.buffer_size:\n            return self.get_and_clear()\n        return None\n</code></pre>"},{"location":"services/voice-server/#connection-pooling","title":"Connection Pooling","text":"<pre><code># Reuse HTTP connections\nsession = aiohttp.ClientSession(\n    connector=aiohttp.TCPConnector(\n        limit=100,\n        limit_per_host=30,\n        ttl_dns_cache=300\n    )\n)\n</code></pre>"},{"location":"services/voice-server/#next-steps","title":"Next Steps","text":"<ul> <li>WebSocket API Details - Protocol specifications</li> <li>Quick Start - Get running</li> <li>Configuration - Configure services</li> </ul>"}]}